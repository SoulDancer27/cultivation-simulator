(this["webpackJsonpcultivation-simulator"]=this["webpackJsonpcultivation-simulator"]||[]).push([[0],{152:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(34),s=a.n(r),l=a(121),c=a(4),o=a(210),u=a(214),m=a(226),d=a(225),h=a(120),p=Object(d.a)(Object(h.a)({palette:{background:{default:"rgb(240, 240, 240)",paper:"rgb(240, 240, 240)"}}})),j=a(17),b=10,x=72e3,g=x/12,f=g/30,O=[{name:"Fist Strike",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/red.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,stats:{attack:.01}},{name:"Block",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/yellow.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,stats:{defence:.01}},{name:"Meditation",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/green.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,stats:{health:.01,healthRegen:.01}},{name:"Training Guidance",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/purple.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,skills:{training:.01}}];function v(e,t,a){return 10*e}function y(e){return 5*(1+e)*e}var k={attack:1,health:10,healthRegen:.5,defence:0,insight:1},C={training:0,mining:0,crafting:0,gathering:0},S=["weapon","armor","helmet","ring","pendant"],w=a(11),M={stats:Object(j.a)({age:10*x},k),currentStats:{health:10},baseStats:k,skills:C,baseSkills:C,realm:{index:0,power:{}},manuals:O.map((function(e){return{manual:e,learningProgress:{exp:0,level:0},isEquipped:!1}})),inventory:new w.b({countableItemTypes:["money","mineral","herb"],uniqueItemTypes:["treasure","potion"],items:[]}),state:{action:"idle"}},T=i.a.createContext(Object(j.a)(Object(j.a)({},M),{},{updateContext:function(e){},setContext:function(e){}}));var R=["money","mineral","herb"],I=["treasure","potion"];function z(e){return"treasure"===e.type&&e.id&&e.item}function H(e,t){var a=E(e,t.manuals),n=q(e,t.inventory.items),i=P(e,t.inventory.items);return t.baseSkills[e]*a*n+i}function L(e){for(var t=Object(j.a)({},e.baseSkills),a=0,n=Object.entries(e.baseSkills);a<n.length;a++){var i=Object(c.a)(n[a],1)[0];t[i]=H(i,e)}return Object(j.a)(Object(j.a)({},e.skills),t)}function E(e,t){var a=1;return t?(t.forEach((function(t){try{if(!t.isEquipped||!t.manual.skills)throw new Error("skip");var n=(t.manual.skills[e]||0)*t.learningProgress.level;a+=n}catch(i){}})),a):1}function q(e,t){var a=1;return t?(t.forEach((function(t){if(z(t)&&t.isEquipped){var n=t.item.stats.skillsMulti,i=n&&n[e]||0;a*=1+i}})),a):0}function P(e,t){var a=0;return t?(t.forEach((function(t){if(z(t)&&t.isEquipped){var n=t.item.stats.skills,i=n&&n[e]||0;a+=i}})),a):0}function Y(e,t){var a=A(e,t.manuals),n=t.realm.power[e]||1,i=W(e,t.inventory.items),r=F(e,t.inventory.items);return t.baseStats[e]*n*a*i+r}function X(e){for(var t=Object(j.a)({},e.baseStats),a=0,n=Object.entries(e.baseStats);a<n.length;a++){var i=Object(c.a)(n[a],1)[0];t[i]=Y(i,e)}return Object(j.a)(Object(j.a)({},e.stats),t)}function A(e,t){var a=1;return t?(t.forEach((function(t){try{if(!t.isEquipped||!t.manual.stats)throw new Error("skip");var n=(t.manual.stats[e]||0)*t.learningProgress.level;a+=n}catch(i){}})),a):1}function W(e,t){var a=1;return t?(t.forEach((function(t){if(z(t)&&t.isEquipped){var n=t.item.stats.statsMulti,i=n&&n[e]||0;a*=1+i}})),a):0}function F(e,t){var a=0;return t?(t.forEach((function(t){if(z(t)&&t.isEquipped){var n=t.item.stats.stats,i=n&&n[e]||0;a+=i}})),a):0}function G(e,t){return e.stats.attack/(1+.01*t.defence)-t.healthRegen}function B(e,t){return e.attack/(1+.01*t.stats.defence)-t.stats.healthRegen}function N(e,t,a){for(var n=0,i=Object.entries(t);n<i.length;n++){var r=Object(c.a)(i[n],2),s=r[0],l=r[1];try{e[s]+=l*a}catch(o){console.log("addBaseStats: ".concat(o))}}return e}function D(e,t,a){for(var n=0,i=Object.entries(t);n<i.length;n++){var r=Object(c.a)(i[n],2),s=r[0],l=r[1];try{e[s]+=l*a}catch(o){console.log("addSkillExp: ".concat(o))}}return e}function J(e){var t=i.a.useContext(T),a=t.stats,n=t.baseStats,r=t.baseSkills,s=t.currentStats,l=t.state,c=t.skills,o=t.inventory,u=t.updateContext,m=i.a.useContext(w.c).gameSpeed,d=e.currentTime;e.previousTime;i.a.useEffect((function(){var i=(e.currentTime-e.previousTime)*m;if("fighting"===l.action&&l.enemy){var d=l.enemy,h=G(t,d)*i/1e3,p=B(d,t)*i/1e3,j=function(e,t,a){var n=a.currentStats,i=G(a,t)*e/1e3,r=B(t,a)*e/1e3;return r>=n.health&&(i*=n.health/r),i<t.currentHealth?0:i<t.health?i>t.currentHealth?1:0:Math.floor((i-t.currentHealth)/t.health)}(i,d,t),b=Math.min(d.currentHealth-(h-d.health*j),d.health),x=Math.min(s.health-p,a.health);j>0&&(d.result.baseStats&&(n=N(n,d.result.baseStats,j)),d.result.skills&&(r=D(r,d.result.skills,j))),x<=0?l={action:"idle",enemy:void 0}:(s.health=x,l.enemy.currentHealth=b),a=X(t),c=L(t),u({currentStats:s,baseStats:n,baseSkills:r,inventory:o,state:l,stats:a,skills:c})}}),[d])}var Q=[{name:"Running",baseTime:5*f,result:{baseStats:{health:.5,attack:.1},skills:{training:.01}}},{name:"Breathing Practice",baseTime:5*f,result:{baseStats:{health:1,healthRegen:.01},skills:{training:.01}}},{name:"Squats",baseTime:5*f,result:{baseStats:{attack:.2},skills:{training:.01}}},{name:"Dodge",baseTime:5*f,result:{baseStats:{defence:.1},skills:{training:.01}}},{name:"Situps",baseTime:g,result:{baseStats:{health:1.5,attack:.3},skills:{training:.03}}},{name:"Relaxation",baseTime:g,result:{baseStats:{health:3,healthRegen:.03},skills:{training:.03}}},{name:"Basic Punch",baseTime:g,result:{baseStats:{attack:.6},skills:{training:.03}}},{name:"Block",baseTime:g,result:{baseStats:{defence:.3},skills:{training:.03}}},{name:"Swimming",baseTime:5*g,result:{baseStats:{health:5,attack:1},skills:{training:.1}}},{name:"Climb Mountains",baseTime:5*g,result:{baseStats:{health:10,healthRegen:.1},skills:{training:.1}}},{name:"Hit the Scarecrows",baseTime:5*g,result:{baseStats:{attack:2},skills:{training:.1}}},{name:"Defence Stance",baseTime:5*g,result:{baseStats:{defence:1},skills:{training:.1}}}],V=Q=Q.map((function(e){return e.time||(e.time="training time"),e.result.baseStats&&!e.result.baseStatsMulti&&(e.result.baseStatsMulti="default"),e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="default"),e})),U=[{name:"Copper",baseTime:5*f,result:{skills:{mining:.01},items:[{type:"mineral",name:"Copper",amount:1}]}},{name:"Iron",baseTime:g,result:{skills:{mining:.03},items:[{type:"mineral",name:"Iron",amount:1}]}},{name:"Steel",baseTime:6*g,result:{skills:{mining:.1},items:[{type:"mineral",name:"Steel",amount:1}]}},{name:"Cold Steel",baseTime:30*g,result:{skills:{mining:.3},items:[{type:"mineral",name:"Cold Steel",amount:1}]}},{name:"Celestial Gold",baseTime:150*g,result:{skills:{mining:1},items:[{type:"mineral",name:"Celestial Gold",amount:1}]}}],K=U=U.map((function(e){return e.time||(e.time="mining time"),e.result.baseStats&&!e.result.baseStatsMulti&&(e.result.baseStatsMulti="default"),e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="default"),e})),_=[{name:"Copper Sword",baseTime:30*f,description:"boosts attack",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Copper Armor",baseTime:30*f,description:"boosts health",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Copper Helmet",baseTime:30*f,description:"boosts health and defence",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Copper Pendant",baseTime:30*f,description:"boosts health and regen",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Copper Ring",baseTime:30*f,description:"boosts attack and training",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Iron Sword",baseTime:30*f,description:"boosts attack",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Iron Armor",baseTime:30*f,description:"boosts health",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Iron Helmet",baseTime:30*f,description:"boosts health and defence",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Iron Pendant",baseTime:30*f,description:"boosts health and regen",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Iron Ring",baseTime:30*f,description:"boosts attack and training",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Steel Sword",baseTime:30*f,description:"boosts attack",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Steel Armor",baseTime:30*f,description:"boosts health",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Steel Helmet",baseTime:30*f,description:"boosts health and defence",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Steel Pendant",baseTime:30*f,description:"boosts health and regen",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Steel Ring",baseTime:30*f,description:"boosts attack and training",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Cold Steel Sword",baseTime:30*f,description:"boosts attack",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Cold Steel Armor",baseTime:30*f,description:"boosts health",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Cold Steel Helmet",baseTime:30*f,description:"boosts health and defence",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Cold Steel Pendant",baseTime:30*f,description:"boosts health and regen",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Cold Steel Ring",baseTime:30*f,description:"boosts attack and training",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Golden Sword",baseTime:30*f,description:"boosts attack",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Golden Armor",baseTime:30*f,description:"boosts health",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Golden Helmet",baseTime:30*f,description:"boosts health and defence",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Golden Pendant",baseTime:30*f,description:"boosts health and regen",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Golden Ring",baseTime:30*f,description:"boosts attack and training",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Ring",amount:1,type:"treasure",generator:"Ring"}]}}],Z=_=_.map((function(e){return e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="crafting skill reward"),e}));function $(e,t){return e.attack/(1+.01*t.stats.defence)-t.stats.healthRegen}function ee(e,t){return e.stats.attack/(1+.01*t.defence)-t.healthRegen}for(var te=[],ae=function(e,t){return Math.pow(e,t)},ne={steps:10,statsMulti:1.05,multiplier:1.1},ie=0,re=0,se=["Mortal","Body Refinement","Qi Gathering","Foundation","Qi Transformation"];re<se.length;re++)for(var le=se[re],ce=1;ce<=9;ce++){var oe=le+" "+ce;if(0!==ie){var ue=ae(1.5,ie-1),me=ae(1.2,ie);te.push({name:oe,baseStats:{health:100*ue,healthRegen:0,defence:0,attack:3*ue},realmPowers:{health:1*me,healthRegen:1*me,attack:1*me,defence:1*me,insight:1*me},tribulation:1===ce?ne:void 0}),ie++}else te.push({name:oe,baseStats:{health:0,healthRegen:0,defence:0,attack:0},realmPowers:{health:1,healthRegen:1,attack:1,defence:1,insight:1}}),ie++}var de=[{name:"Collect grass",baseTime:5*f,result:{skills:{gathering:.01},items:[{type:"herb",name:"Grass Stalk",amount:1}]}},{name:"Pick tree leaves",baseTime:g,result:{skills:{gathering:.03},items:[{type:"herb",name:"Oak leaf",amount:1}]}}],he={trainings:V,mining:K,crafting:Z,gathering:de=de.map((function(e){return e.time||(e.time="gathering time"),e.result.baseStats&&!e.result.baseStatsMulti&&(e.result.baseStatsMulti="default"),e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="default"),e})),cultivationRealms:te,enemies:[{name:"Random Nobody",description:"A pathetic person with no prospects in life",health:10,healthRegen:0,defence:0,attack:1,result:{items:[{type:"money",amount:1,name:"Copper Coin"}]}},{name:"Street Thug",description:"A gangster from the streets",health:50,healthRegen:0,defence:0,attack:3,result:{items:[{type:"money",amount:5,name:"Copper Coin"}]}},{name:"Ordinary rabbit",description:"Turns out, they are pretty dangerous",health:150,healthRegen:1,defence:10,attack:4,result:{items:[{type:"money",amount:20,name:"Copper Coin"}]}},{name:"Feral Rat",health:250,healthRegen:2,defence:30,attack:10,result:{items:[{type:"money",amount:50,name:"Copper Coin"}]}},{name:"Forest Wolf",health:500,healthRegen:5,defence:10,attack:40,result:{items:[{type:"money",amount:250,name:"Copper Coin"}]}},{name:"Forest Bandit",health:1e3,healthRegen:10,defence:30,attack:70,result:{items:[{type:"money",amount:1e3,name:"Copper Coin"}]}},{name:"Black Boar",health:1500,healthRegen:10,defence:30,attack:150,result:{items:[{type:"money",amount:1,name:"Silver Coin"}]}},{name:"Turtle",health:5e3,healthRegen:25,defence:100,attack:30,result:{items:[{type:"money",amount:5,name:"Silver Coin"}]}},{name:"Stone Wolf",health:8e3,healthRegen:20,defence:50,attack:400,result:{items:[{type:"money",amount:25,name:"Silver Coin"}]}},{name:"White Tiger",health:15e3,healthRegen:100,defence:50,attack:1e3,result:{items:[{type:"money",amount:200,name:"Silver Coin"}]}},{name:"Forest Bandit Leader",health:25e3,healthRegen:200,defence:20,attack:1500,result:{items:[{type:"money",amount:500,name:"Silver Coin"}]}},{name:"Evil Bat",health:5e4,healthRegen:200,defence:60,attack:2500,result:{items:[{type:"money",amount:1500,name:"Silver Coin"}]}},{name:"Spirit Hare",description:"What in the world is this thing?",health:1e5,healthRegen:400,defence:120,attack:4e3,result:{items:[{type:"money",amount:1,name:"Golden Coin"}]}},{name:"Swamp Alligator",health:25e4,healthRegen:1500,defence:200,attack:1e4,result:{items:[{type:"money",amount:5,name:"Golden Coin"}]}},{name:"Thunder Lizard",health:6e5,healthRegen:2500,defence:200,attack:2e4,result:{items:[{type:"money",amount:25,name:"Golden Coin"}]}},{name:"Blazing Leopard",health:12e5,healthRegen:6e3,defence:250,attack:5e4,result:{items:[{type:"money",amount:150,name:"Golden Coin"}]}},{name:"Steel Turtle",health:2e6,healthRegen:1e4,defence:500,attack:2e4,result:{items:[{type:"money",amount:350,name:"Golden Coin"}]}},{name:"Arrogant Young Master",description:"Never heard of you!",health:4e6,healthRegen:1e4,defence:100,attack:15e4,result:{items:[{type:"money",amount:1e3,name:"Golden Coin"}]}}]},pe=he,je=i.a.createContext(Object(j.a)(Object(j.a)({},pe),{},{updateContext:function(e){},setContext:function(e){}})),be=a(20);function xe(e,t){try{var a=Number.MAX_VALUE;if(!t.price)return a;var n=t.price.priceMulti||1;if(t.price.baseStats)for(var i=0,r=Object.entries(t.price.baseStats);i<r.length;i++){var s=Object(c.a)(r[i],2),l=s[0],o=s[1],u=Math.floor(e.baseStats[l]/o/n);u<a&&(a=u)}if(t.price.items){var m,d=Object(be.a)(t.price.items);try{var h=function(){var t=m.value;if(["money","mineral"].includes(t.type)){var i=e.inventory.items.findIndex((function(e){return e.type===t.type&&e.name===t.name}));if(-1===i)return{v:0};var r=e.inventory[i];if(r&&function(e){return e.name&&e.amount}(r)){var s=Math.floor(r.amount/t.amount/n);s<a&&(a=s)}}if("treasure"===t.type){var l=e.inventory.items.filter((function(e){return"treasure"===e.type&&e.item.name===t.name})),c=Math.floor(l.length/t.amount/n);c<a&&(a=c)}};for(d.s();!(m=d.n()).done;){var p=h();if("object"===typeof p)return p.v}}catch(j){d.e(j)}finally{d.f()}}return a}catch(b){console.log("calculateMaxActions: ".concat(b))}return 0}function ge(e,t,a){var n,i=(e+1)/10,r=(n=(1+t)/(10*Math.pow(8,i)),1-Math.exp(-n));return fe*(1+10*t)*r*(1+.1*(Math.sqrt(a||1)-1))}var fe=10;function Oe(e,t){var a=(t+1)/10;return e*Math.pow(6,a)}var ve=[{name:"Copper Sword",description:"",image:{path:"/treasures/swords1.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"weapon"},{name:"Copper Armor",description:"",image:{path:"/treasures/armors.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"armor"},{name:"Copper Helmet",description:"",image:{path:"/treasures/helmets.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"helmet"},{name:"Copper Pendant",description:"",image:{path:"/treasures/pendants.png",x:0,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"pendant"},{name:"Copper Ring",description:"",image:{path:"/treasures/rings.png",x:0,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"ring"},{name:"Iron Sword",description:"",image:{path:"/treasures/swords1.png",x:0,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"weapon"},{name:"Iron Armor",description:"",image:{path:"/treasures/armors.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"armor"},{name:"Iron Helmet",description:"",image:{path:"/treasures/helmets.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"helmet"},{name:"Iron Pendant",description:"",image:{path:"/treasures/pendants.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"pendant"},{name:"Iron Ring",description:"",image:{path:"/treasures/rings.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"ring"},{name:"Steel Sword",description:"",image:{path:"/treasures/swords1.png",x:128,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"weapon"},{name:"Steel Armor",description:"",image:{path:"/treasures/armors.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"armor"},{name:"Steel Helmet",description:"",image:{path:"/treasures/helmets.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"helmet"},{name:"Steel Pendant",description:"",image:{path:"/treasures/pendants.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"pendant"},{name:"Steel Ring",description:"",image:{path:"/treasures/rings.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"ring"},{name:"Cold Steel Sword",description:"",image:{path:"/treasures/swords1.png",x:160,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"weapon"},{name:"Cold Steel Armor",description:"",image:{path:"/treasures/armors.png",x:160,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"armor"},{name:"Cold Steel Helmet",description:"",image:{path:"/treasures/helmets.png",x:160,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"helmet"},{name:"Cold Steel Pendant",description:"",image:{path:"/treasures/pendants.png",x:128,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"pendant"},{name:"Cold Steel Ring",description:"",image:{path:"/treasures/rings.png",x:128,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"ring"},{name:"Golden Sword",description:"",image:{path:"/treasures/swords1.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"weapon"},{name:"Golden Armor",description:"",image:{path:"/treasures/armors.png",x:416,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"armor"},{name:"Golden Helmet",description:"",image:{path:"/treasures/helmets.png",x:416,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"helmet"},{name:"Golden Pendant",description:"",image:{path:"/treasures/pendants.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"pendant"},{name:"Golden Ring",description:"",image:{path:"/treasures/rings.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"ring"}],ye=a(215);function ke(e){return function(t,a,n){try{var i,r=ve.find((function(e){return e.name===n.name}));if(!r)throw new Error("".concat(n.name," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"));var s={type:"treasure",id:Object(ye.a)(),item:r},l=ge(r.realmIndex,a.skills.crafting,(null===t||void 0===t||null===(i=t.price)||void 0===i?void 0:i.priceMulti)||1),c=Oe(l,r.realmIndex);return s.item.stats=e(c),s.item.quality=l,s}catch(o){console.log(o)}}}ke((function(e){return{stats:{attack:e},statsMulti:{attack:Math.sqrt(e)/100}}})),ke((function(e){return{stats:{health:5*e},statsMulti:{health:Math.sqrt(e)/200}}})),ke((function(e){return{stats:{health:e,defence:Math.sqrt(e)},statsMulti:{health:Math.sqrt(e)/200,defence:Math.sqrt(e)/1e3}}})),ke((function(e){return{stats:{attack:e/2},statsMulti:{attack:Math.sqrt(e)/200},skillsMulti:{training:Math.sqrt(e)/200}}})),ke((function(e){return{stats:{health:e,healthRegen:e/30},statsMulti:{health:Math.sqrt(e)/200,healthRegen:Math.sqrt(e)/100}}}));var Ce=[{name:"Grass Stalk",description:"Just an ordinary grass",image:{path:"/herbs/herbs.png",x:32,y:192,sizeX:32,sizeY:32}},{name:"Oak leaf",description:"A leaf from a big tree",image:{path:"/herbs/herbs.png",x:64,y:0,sizeX:32,sizeY:32}}],Se=[{name:"Copper",description:"A good for nothing material",image:{path:"/minerals/icon48.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Iron",description:"The basic crafting necessity",image:{path:"/minerals/icon47.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Steel",description:"Ordinary Steel",image:{path:"/minerals/icon2.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Cold Steel",description:"Much harder than regular Steel",image:{path:"/minerals/icon1.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Celestial Gold",description:"The best material for treasures",image:{path:"/minerals/icon7.png",x:0,y:0,sizeX:32,sizeY:32}}],we=[{name:"Copper Coin",description:"The most common currency of the Mortal World",image:{path:"money/coins.png",x:0,y:36,sizeX:36,sizeY:36}},{name:"Silver Coin",description:"Currency for slighter wealthier mortals",image:{path:"money/coins.png",x:0,y:72,sizeX:36,sizeY:36}},{name:"Golden Coin",description:"The eternal store of value, at least for mortals",image:{path:"money/coins.png",x:0,y:0,sizeX:36,sizeY:36}}];var Me={"training time":function(e,t){var a=1+t.skills.training;return e.baseTime/a},"mining time":function(e,t){var a=1+t.skills.mining;return e.baseTime/a},"gathering time":function(e,t){var a=1+t.skills.gathering;return e.baseTime/a},"crafting skill reward":function(e,t){var a,n=(null===(a=e.price)||void 0===a?void 0:a.priceMulti)||1,i=e.result.items?e.result.items[0]:void 0;if(!i)return 1;var r=ve.find((function(e){return e.name===i.name}));if(!r)return 1;var s=Oe(ge(r.realmIndex,t.skills.crafting,n),r.realmIndex);return Math.max(1,Math.sqrt(.1*s))},default:function(e){return 1/((t=e.timesCompleted||0)<=10?1:.233*(1+Math.sqrt(t)));var t}};function Te(e){var t=i.a.useContext(T),a=i.a.useContext(je),n=i.a.useContext(w.c).gameSpeed,r=t.state,s=t.baseStats,l=t.stats,c=t.inventory,o=t.baseSkills,u=t.skills,m=t.updateContext;i.a.useEffect((function(){try{if("activity"!==r.action||!r.activity)return;var i=(e.currentTime-e.previousTime)*n,d=a[r.activity.source].find((function(e){return r.activity&&e.name===r.activity.name}));if(!d)return;d.currentTime||(d.currentTime=0),0===xe(t,d)&&m({state:r={action:"idle",activity:void 0}});var h=function(e,t,a){var n=t.currentTime||0;n+=e;var i=t.time?Me[t.time](t,a):t.baseTime,r=Math.floor(n/i);n-=r*i;var s=xe(a,t);return s<=r&&(n=0),{timesCompleted:r=Math.min(r,s),currentTime:n}}(i,d,t),p=h.timesCompleted,b=h.currentTime;if(d.currentTime=b,d.timesCompleted=((null===d||void 0===d?void 0:d.timesCompleted)||0)+p,0===p)return void a.updateContext(Object(j.a)({},a));if(d.price){var x=d.priceMulti||1;d.price.baseStats&&(s=N(s,d.price.baseStats,-p*x))}d.result.baseStats&&(s=N(s,d.result.baseStats,p*("string"===typeof d.result.baseStatsMulti?Me[d.result.baseStatsMulti](d,t):1))),d.result.skills&&(o=D(o,d.result.skills,p*("string"===typeof d.result.skillsMulti?Me[d.result.skillsMulti](d,t):1))),d.result.items,l=X(t),u=L(t),m({stats:l,baseStats:s,baseSkills:o,skills:u,inventory:c})}catch(g){console.log("Error in useActivityManager: ".concat(g))}}),[e])}function Re(e,t){for(var a={},n=0,i=Object.entries(k);n<i.length;n++){a[Object(c.a)(i[n],1)[0]]=1}for(var r=0,s=Object.entries(t[e].realmPowers);r<s.length;r++){var l=Object(c.a)(s[r],2),o=l[0],u=l[1];a[o]*=u}for(var m=0;m<=e;m++){var d=t[m];if(d.tribulation&&d.tribulation.stepReached)for(var h=Math.pow(d.tribulation.statsMulti,d.tribulation.stepReached),p=0,j=Object.entries(d.realmPowers);p<j.length;p++){a[Object(c.a)(j[p],1)[0]]*=h}}return a}function Ie(e,t){var a=t[e],n={health:a.baseStats.health,attack:a.baseStats.attack,healthRegen:a.baseStats.healthRegen,defence:a.baseStats.defence};if(!a.tribulation||!a.tribulation.stepReached)return n;for(var i=0;i<=e;i++){var r=t[i];if(r.tribulation&&r.tribulation.stepReached){var s=Math.pow(r.tribulation.multiplier,r.tribulation.stepReached);n.health*=s,n.attack*=s,n.defence*=s,n.healthRegen*=s}}return n}var ze=a(0);function He(e){var t=i.a.useContext(w.c).tickRate,a=i.a.useState({previousTime:Date.now(),currentTime:Date.now()}),n=Object(c.a)(a,2),r=n[0],s=n[1];return i.a.useEffect((function(){var e=setInterval((function(){s((function(e){return{previousTime:e.currentTime,currentTime:Date.now()}}))}),1e3/t);return function(){clearInterval(e)}}),[t]),function(e){var t=i.a.useContext(T),a=t.stats,n=t.state,r=t.updateContext,s=i.a.useContext(w.c).gameSpeed,l=e.currentTime;e.previousTime,i.a.useEffect((function(){if(!["idle","breakthrough"].includes(n.action)){var t=(e.currentTime-e.previousTime)*s;a.age+=t,r({stats:a})}}),[l])}(r),function(e){var t=i.a.useContext(T),a=t.stats,n=t.currentStats,r=t.state,s=t.updateContext,l=i.a.useContext(w.c).gameSpeed,c=e.currentTime,o=e.previousTime;i.a.useEffect((function(){var e=(c-o)*l;if(n.health<=a.health&&["training","activity","cultivating"].includes(r.action)){var t=30*a.health/100*e/g;n.health=Math.min(n.health+a.healthRegen*e/1e3+t,a.health),s({stats:a})}}),[c])}(r),J(r),function(e){var t=i.a.useContext(T),a=i.a.useContext(w.c).gameSpeed,n=t.stats,r=t.state,s=t.skills,l=t.updateContext,c=e.currentTime;e.previousTime,i.a.useEffect((function(){if("cultivating"===r.action&&r.manual){var i=(e.currentTime-e.previousTime)*a,c=r.manual,o=c.learningProgress,u=c.manual,m=o.level,d=o.exp,h=n.insight*i/1e3,p=y(u.maxLevel),j=Math.min(d+h,p),b=j-y(m)>=v(o.level+1,u.realm,u.rarity)?m+1:m;r.manual.learningProgress.exp=j,b!==m&&(r.manual.learningProgress.level=b,u.stats&&(n=X(t)),u.skills&&(s=L(t))),j>=p&&(r={action:"idle",manual:void 0}),l({state:r,stats:n,skills:s})}}),[c])}(r),Te(r),function(e){var t=i.a.useContext(T),a=i.a.useContext(w.c).gameSpeed,n=i.a.useContext(je),r=n.cultivationRealms,s=n.updateContext,l=t.stats,c=t.state,o=t.realm,u=t.updateContext,m=t.currentStats,d=e.currentTime;e.previousTime,i.a.useEffect((function(){if("breakthrough"===c.action&&c.realm){var n=(e.currentTime-e.previousTime)*a,i=r[c.realm.index];if(i&&i.currentStats){var d=ee(t,i.currentStats||i.baseStats)*n/1e3,h=$(i.currentStats||i.baseStats,t)*n/1e3,p=Math.min(i.currentStats.currentHealth-d,i.currentStats.health),j=Math.min(m.health-h,l.health);if(p<=0){if(i.tribulation){var b=i.tribulation.stepReached;if(!b||i.tribulation.steps>b){var x=void 0!==b?b+1:1;i.tribulation.stepReached=x;var g=Ie(c.realm.index,r),f=g.health,O=g.healthRegen,v=g.attack,y=g.defence;return i.currentStats.health=f,i.currentStats.healthRegen=O,i.currentStats.attack=v,i.currentStats.defence=y,i.currentStats.currentHealth=f,void s({cultivationRealms:r.slice()})}return o.index=c.realm.index,i.tribulation&&(i.tribulation.stepReached=i.tribulation.steps),o.power=Re(o.index,r),c={action:"idle",realm:void 0},i.currentStats=void 0,l=X(t),u({stats:l,currentStats:m,state:c,realm:o}),s({cultivationRealms:r.slice()}),void alert("Breakthrough success!")}o.index=c.realm.index,c={action:"idle",realm:void 0},o.power=Re(o.index,r),l=X(t),i.currentStats=void 0,u({stats:l,currentStats:m,state:c,realm:o}),s({cultivationRealms:r.slice()}),alert("Breakthrough success!")}else if(j<=0){if(i.tribulation){if(i.tribulation.stepReached)return o.index=c.realm.index,o.power=Re(o.index,r),c={action:"idle",realm:void 0},l=X(t),i.currentStats=void 0,i.tribulation.stepReached-=1,u({stats:l,currentStats:m,state:c,realm:o}),s({cultivationRealms:r.slice()}),void alert("Breakthrough success!");u({state:c={action:"idle",realm:void 0}})}c={action:"idle",realm:void 0},i.currentStats=void 0,alert("Breakthrough failed, you are not strong enough yet")}else m.health=j,i.currentStats.currentHealth=p,u({currentStats:m,state:c,realm:o}),s({cultivationRealms:r})}}}),[d])}(r),Object(ze.jsx)(ze.Fragment,{children:e.children})}var Le=a(29),Ee=a(222),qe=a(227),Pe=a(113),Ye=a.n(Pe);function Xe(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var Ae={age:"Age",health:"Hp",healthRegen:"Hp.regen",attack:"Atk",defence:"Def",training:"training",mining:"mining",crafting:"crafting"};function We(e){return Ae[e]||e}function Fe(e){for(var t=Object(j.a)({},e.currentStats),a=X(e),n=0,i=Object.entries(e.baseStats);n<i.length;n++){var r=Object(c.a)(i[n],1)[0];t[r]=Math.min(t[r],a[r])}return t}function Ge(e){var t,a,n,r=Object(Le.a)(),s=i.a.useContext(T),l=s.stats,c=s.realm,o=s.state,u=i.a.useContext(je).cultivationRealms,d=i.a.useContext(w.c).gameSpeed,h=Xe().width,p=o.action;return"activity"===o.action&&(p+=" ("+(null===(t=o.activity)||void 0===t?void 0:t.name)+")"),"cultivating"===o.action&&(p+=" ("+(null===(a=o.manual)||void 0===a?void 0:a.manual.name)+")"),"fighting"===o.action&&(p+=" ("+(null===(n=o.enemy)||void 0===n?void 0:n.name)+")"),Object(ze.jsx)(ze.Fragment,{children:Object(ze.jsx)(Ee.a,{elevation:8,children:Object(ze.jsxs)(m.a,{height:r.spacing(8),width:h,display:"flex",alignItems:"center",gap:2,paddingX:2,children:[Object(ze.jsxs)(m.a,{children:[Object(ze.jsxs)(qe.a,{variant:"h5",children:["Age: ",Be(l.age)]}),Object(ze.jsxs)(qe.a,{variant:"h5",children:["Realm: ",u[c.index].name]})]}),Object(ze.jsxs)(m.a,{marginLeft:"auto",display:"flex",alignItems:"center",gap:1,children:[Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",children:[Object(ze.jsxs)(qe.a,{children:["Game Speed: x",d]}),Object(ze.jsx)(qe.a,{children:p})]}),Object(ze.jsx)(Ye.a,{fontSize:"large",onClick:function(){return e.setSettings((function(e){return!e}))}})]})]})})})}function Be(e){var t=Math.floor(e/x),a=Math.min(Math.floor((e-t*x)/g),12);return"".concat(t," years ").concat(a," months")}var Ne=a(228);function De(e){return Object(ze.jsxs)(m.a,{sx:{display:"flex",alignItems:"center"},children:[Object(ze.jsx)(m.a,{sx:{minWidth:200},children:Object(ze.jsx)(qe.a,{variant:"body1",color:"text.primary",children:e.label})}),Object(ze.jsx)(m.a,{sx:{width:"50%",m:1},children:Object(ze.jsx)(Ne.a,Object(j.a)({variant:"determinate",color:"success"},e))})]})}var Je=a(3),Qe=a(83),Ve=a(5),Ue=a(209),Ke=a(37),_e=["className"],Ze=Object(Ve.a)((function(e){var t=e.className,a=Object(Qe.a)(e,_e);return Object(ze.jsx)(Ue.a,Object(j.a)(Object(j.a)({},a),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(Je.a)({},"& .".concat(Ke.a.tooltip),{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"})}));function $e(e){var t=i.a.useContext(T),a=function(e,t){var a=t.baseStats,n=t.realm,i=t.manuals,r=t.inventory;return{base:a[e],realm:n.power[e]||1,manuals:A(e,i),treasuresMulti:W(e,r.items),treasures:F(e,r.items)}}(e.stat,t),n=Object(w.i)(),r=Object(Le.a)();return Object(ze.jsx)(Ze,{title:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(qe.a,{color:"inherit",children:["Character ",e.stat]}),Object(ze.jsxs)(qe.a,{children:["Base ",e.stat,": ",n(a.base)]}),Object(ze.jsxs)(qe.a,{children:["Realm bonus:",Object(ze.jsxs)(qe.a,{component:"span",color:a.realm>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.realm)]})]}),Object(ze.jsxs)(qe.a,{children:["Manuals bonus:",Object(ze.jsxs)(qe.a,{component:"span",color:a.manuals>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.manuals)]})]}),Object(ze.jsxs)(qe.a,{children:["Treasures multi:",Object(ze.jsxs)(qe.a,{component:"span",color:a.treasuresMulti>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.treasuresMulti)]})]}),Object(ze.jsxs)(qe.a,{children:["Treasures bonus:",Object(ze.jsxs)(qe.a,{component:"span",color:a.treasures>=0?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","+",n(a.treasures)]})]})]}),children:e.children})}function et(e){var t=i.a.useContext(T),a=Object(w.i)(),n=t.stats,r=t.currentStats,s=n.health,l=r.health,c=Object(Le.a)();return Object(ze.jsxs)(m.a,{width:512,paddingTop:c.spacing(1),paddingLeft:c.spacing(1),children:[Object(ze.jsx)($e,{stat:"health",children:Object(ze.jsx)(m.a,{children:Object(ze.jsx)(De,{label:"Health: ".concat(a(l)," / ").concat(a(s)),value:l/s*100})})}),e.displayStats.map((function(e){return Object(ze.jsx)($e,{stat:e.stat,children:Object(ze.jsxs)(qe.a,{children:[e.name," ",a(t.stats[e.stat])]})},e.stat)}))]})}var tt=[{name:"Spring blossom village",description:"A tiny village in the fields. The villagers are poor, but kind and hardworking",imagePath:"village.png",activities:[{name:"Run Errands",description:"",baseTime:.1,result:{items:[{type:"money",name:"Copper Coin",amount:1}]}},{name:"Use Training Grounds",description:"",baseTime:.1,result:{baseStats:{attack:.07,defence:.07}}},{name:"Help in the fields",description:"",baseTime:10,result:{baseStats:{attack:.2,defence:.2},items:[{type:"money",name:"Copper Coin",amount:5}]}},{name:"Help in the forge",description:"",baseTime:10,result:{baseStats:{attack:.2,defence:.2},items:[{type:"treasure",name:"Rusty Sword",amount:1},{type:"treasure",name:"Rusty Armor",amount:1},{type:"treasure",name:"Rusty Helmet",amount:1},{type:"treasure",name:"Copper Ring",amount:1},{type:"treasure",name:"Copper Pendant",amount:1}]}}]}];function at(e,t){return Number(e.spacing(t).slice(0,-2))}function nt(){var e=Object(Le.a)(),t=tt[0],a="/locations/"+t.imagePath;return Object(ze.jsxs)(m.a,{height:e.spacing(16),padding:e.spacing(1),width:512,children:[Object(ze.jsx)(qe.a,{variant:"h5",children:"Current Location"}),Object(ze.jsxs)(m.a,{display:"flex",children:[Object(ze.jsx)("img",{src:a,alt:"",height:e.spacing(12),width:e.spacing(12)}),Object(ze.jsxs)(m.a,{width:512-at(e,12),paddingLeft:e.spacing(1),children:[Object(ze.jsx)(qe.a,{variant:"h6",children:t.name}),Object(ze.jsx)(qe.a,{variant:"body1",children:t.description})]})]})]})}var it=a(221);function rt(e){var t=e.path,a=e.box,n=e.position;return Object(ze.jsx)(m.a,{width:a.x,height:a.y,overflow:"hidden",children:Object(ze.jsx)("img",{src:t,alt:"copper coin",style:{top:-n.y,left:-n.x,position:"relative"}})})}function st(e){var t=e.size,a=e.path,n=e.position;return Object(ze.jsx)(rt,{path:a,box:{x:t,y:t},position:n})}function lt(e){var t=e.treasure,a=e.type,n=Object(Le.a)(),r=i.a.useContext(T),s=Object(w.i)(),l=r.inventory,o=r.stats,u=r.currentStats,d=r.skills,h=r.updateContext;if(!t)return Object(ze.jsx)(m.a,{width:512,border:"1px solid gray",borderRadius:n.spacing(1),children:Object(ze.jsxs)(m.a,{display:"flex",margin:n.spacing(1),children:[Object(ze.jsx)(m.a,{width:32,height:32,bgcolor:"lightgray"}),Object(ze.jsx)(m.a,{marginLeft:n.spacing(1),marginTop:n.spacing(-1),children:Object(ze.jsxs)(qe.a,{children:["Nothing (",a,")"]})})]})});var p=t.item,j=p.image,b=p.name,x=p.realmIndex,g=p.stats,f=j.path,O=j.sizeX,v=j.x,y=j.y,k=te[x],C=[];if(g.stats)for(var S=0,M=Object.entries(g.stats);S<M.length;S++){var R=Object(c.a)(M[S],2),I=R[0],H=R[1];C.push({text:We(I),effect:s(H)})}if(g.skills)for(var E=0,q=Object.entries(g.skills);E<q.length;E++){var P=Object(c.a)(q[E],2),Y=P[0],A=P[1];C.push({text:We(Y),effect:s(A)})}if(g.statsMulti)for(var W=0,F=Object.entries(g.statsMulti);W<F.length;W++){var G=Object(c.a)(F[W],2),B=G[0],N=G[1];C.push({text:We(B),effect:s(100*N)+"%"})}if(g.skillsMulti)for(var D=0,J=Object.entries(g.skillsMulti);D<J.length;D++){var Q=Object(c.a)(J[D],2),V=Q[0],U=Q[1];C.push({text:We(V),effect:s(100*U)+"%"})}return Object(ze.jsx)(m.a,{width:512,border:"1px solid gray",borderRadius:n.spacing(1),children:Object(ze.jsxs)(m.a,{margin:n.spacing(1),children:[Object(ze.jsxs)(m.a,{width:512,display:"flex",children:[Object(ze.jsx)(st,{path:f,size:O,position:{x:v,y:y}}),Object(ze.jsxs)(m.a,{marginLeft:n.spacing(1),marginTop:n.spacing(-1),children:[Object(ze.jsxs)(qe.a,{children:[b," (",a,")"]}),Object(ze.jsx)(qe.a,{children:k.name})]}),Object(ze.jsx)(it.a,{variant:"contained",color:"warning",size:"small",sx:{maxHeight:32,minHeight:32,margin:"auto"},onClick:function(){return function(e){var t=l.items.findIndex((function(t){return t.id===e}));-1!==t&&z(l[t])&&(l[t].isEquipped=!1,o=X(r),u=Fe(r),d=L(r),h({inventory:l,stats:o,currentStats:u,skills:d}))}(t.id)},children:"Unequip"})]}),C.map((function(e,t){return Object(ze.jsxs)(qe.a,{variant:"body1",marginLeft:"".concat(32+at(n,1),"px"),children:[e.text," ",e.effect]},t)}))]})})}function ct(){var e,t=i.a.useContext(T).inventory.getEquippedItems(),a=[],n=Object(be.a)(S);try{var r=function(){var n=e.value,i=t.find((function(e){return e.item.type===n}));a.push(Object(ze.jsx)(lt,{treasure:i,type:n},n))};for(n.s();!(e=n.n()).done;)r()}catch(s){n.e(s)}finally{n.f()}return Object(ze.jsx)(m.a,{children:a})}var ot=a(115),ut=a.n(ot),mt=a(114),dt=a.n(mt),ht=a(116),pt=a.n(ht),jt=a(117),bt=a.n(jt);function xt(e){var t=e.pages,a=e.setPages;return Object(ze.jsxs)(m.a,{width:512,height:24,children:[Object(ze.jsx)(it.a,{onClick:function(){return a((function(e){return{current:1,total:e.total}}))},disabled:1===t.current,sx:{maxWidth:24,minWidth:24},children:Object(ze.jsx)(dt.a,{})}),Object(ze.jsx)(it.a,{onClick:function(){return a((function(e){return{current:e.current-1,total:e.total}}))},disabled:1===t.current,sx:{maxWidth:24,minWidth:24},children:Object(ze.jsx)(ut.a,{})}),Object(ze.jsx)(it.a,{onClick:function(){return a((function(e){return{current:e.current+1,total:e.total}}))},disabled:t.current===t.total,sx:{maxWidth:24,minWidth:24},children:Object(ze.jsx)(pt.a,{})}),Object(ze.jsx)(it.a,{onClick:function(){return a((function(e){return{current:e.total,total:e.total}}))},disabled:t.current===t.total,sx:{maxWidth:24,minWidth:24},children:Object(ze.jsx)(bt.a,{})})]})}function gt(e){var t=e.type,a=e.setType;return Object(ze.jsxs)(m.a,{width:128,height:384,children:[Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){return a("all")},color:"all"===t?"success":"primary",fullWidth:!0,children:"all"}),Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){return a("money")},color:"money"===t?"success":"primary",fullWidth:!0,children:"money"}),Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){return a("treasure")},color:"treasure"===t?"success":"primary",fullWidth:!0,children:"treasures"}),Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){return a("mineral")},color:"mineral"===t?"success":"primary",fullWidth:!0,children:"minerals"}),Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){return a("herb")},color:"herb"===t?"success":"primary",fullWidth:!0,children:"Herbs"})]})}function ft(){return Object(ze.jsx)(m.a,{width:64,height:64,border:"1px solid gray"})}var Ot=a(206),vt=a(126),yt=a(118),kt=a.n(yt),Ct=a(119),St=a.n(Ct);function wt(e){var t=e.isLocked,a=e.fontSize;return Object(ze.jsx)(m.a,{children:t?Object(ze.jsx)(kt.a,{fontSize:a||"medium"}):Object(ze.jsx)(St.a,{fontSize:a||"medium"})})}function Mt(e){var t=e.item,a=e.isLocked,n=te[t.realmIndex].name,r=i.a.useState(null),s=Object(c.a)(r,2),l=s[0],o=s[1],u=Object(w.i)(),d=i.a.useContext(T),h=d.inventory,p=d.stats,j=d.skills,b=d.currentStats,x=d.updateContext,g=Boolean(l),f=g?"simple-popper":void 0;if(!t)return Object(ze.jsx)(ft,{});var O=[],v=t.stats;if(v.stats)for(var y=0,k=Object.entries(v.stats);y<k.length;y++){var C=Object(c.a)(k[y],2),S=C[0],M=C[1];O.push({text:We(S),effect:u(M)})}if(v.skills)for(var R=0,I=Object.entries(v.skills);R<I.length;R++){var H=Object(c.a)(I[R],2),E=H[0],q=H[1];O.push({text:We(E),effect:u(q)})}if(v.statsMulti)for(var P=0,Y=Object.entries(v.statsMulti);P<Y.length;P++){var A=Object(c.a)(Y[P],2),W=A[0],F=A[1];O.push({text:We(W),effect:u(100*F)+"%"})}if(v.skillsMulti)for(var G=0,B=Object.entries(v.skillsMulti);G<B.length;G++){var N=Object(c.a)(B[G],2),D=N[0],J=N[1];O.push({text:We(D),effect:u(100*J)+"%"})}var Q=n.substring(0,6)+" "+n.charAt(n.length-1);return Object(ze.jsx)(Ot.a,{onClickAway:function(){o(null)},children:Object(ze.jsxs)(m.a,{children:[Object(ze.jsxs)(m.a,{width:64,height:64,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},onClick:function(e){o(l?null:e.currentTarget)},children:[Object(ze.jsx)(m.a,{children:Object(ze.jsx)(st,{path:t.image.path,size:t.image.sizeX,position:{x:t.image.x,y:t.image.y}})}),Object(ze.jsx)(m.a,{children:Object(ze.jsx)(qe.a,{variant:"body2",children:Q})})]}),Object(ze.jsx)(vt.a,{id:f,open:g,anchorEl:l,children:Object(ze.jsxs)(m.a,{sx:{border:1,p:1,bgcolor:"background.paper"},children:[Object(ze.jsxs)(m.a,{display:"flex",justifyContent:"space-between",children:[Object(ze.jsx)(qe.a,{children:t.name}),Object(ze.jsx)(m.a,{onClick:function(){return function(e){var t=h.items.findIndex((function(t){return t.id===e}));-1!==t&&(h[t].isLocked=!h[t].isLocked,x({inventory:h}))}(e.id)},children:Object(ze.jsx)(wt,{isLocked:a||!1})})]}),Object(ze.jsxs)(qe.a,{children:["Quality: ",u(t.quality)]}),O.map((function(e,t){return Object(ze.jsxs)(qe.a,{variant:"body1",children:[e.text," ",e.effect]},t)})),Object(ze.jsx)(it.a,{variant:"contained",color:"primary",onClick:function(){return function(e,t){var a=h.items.findIndex((function(t){return t.id===e}));if(-1!==a){var n=h.items.findIndex((function(e){return z(e)&&e.isEquipped&&e.item.type===t}));-1!==n&&(h[n].isEquipped=!1),h[a].isEquipped=!0,p=X(d),b=Fe(d),j=L(d),x({inventory:h,stats:p,currentStats:b,skills:j}),o(null)}}(e.id,e.item.type)},children:"Equip"}),Object(ze.jsx)(it.a,{variant:"contained",color:"warning",onClick:function(){return function(e){var t=h.items.findIndex((function(t){return t.id===e}));-1===t||h[t].isLocked||(h.items.splice(t,1),x({inventory:h}),o(null))}(e.id)},children:"Drop"})]})})]})})}function Tt(e,t){var a;return"treasure"===t&&(a=ve.find((function(t){return t.name===e}))),"money"===t&&(a=we.find((function(t){return t.name===e}))),"mineral"===t&&(a=Se.find((function(t){return t.name===e}))),"herb"===t&&(a=Ce.find((function(t){return t.name===e}))),a}function Rt(e){var t=e.name,a=e.amount,n=e.type,i=Object(w.i)(),r=Tt(t,n);return r?Object(ze.jsx)(It,{name:t,description:r.description,children:Object(ze.jsxs)(m.a,{width:64,height:64,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},children:[Object(ze.jsx)(m.a,{children:Object(ze.jsx)(st,{path:r.image.path,size:r.image.sizeX,position:{x:r.image.x,y:r.image.y}})}),Object(ze.jsx)(m.a,{children:Object(ze.jsx)(qe.a,{variant:"body2",children:i(a)})})]})}):Object(ze.jsx)(ft,{})}function It(e){var t=e.name,a=e.description;return Object(ze.jsx)(Ze,{title:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(qe.a,{color:"inherit",children:t}),Object(ze.jsx)(qe.a,{variant:"body2",children:a})]}),children:e.children})}function zt(e){var t=e.item;return t?"money"===t.type||"mineral"===t.type||"herb"===t.type?Object(ze.jsx)(Rt,Object(j.a)({},t)):"treasure"===t.type?Object(ze.jsx)(Mt,Object(j.a)({},t)):Object(ze.jsx)(ft,{}):Object(ze.jsx)(ft,{})}function Ht(e){var t=e.inventory,a=0===t.length?36:36*Math.ceil(t.length/36),n=Array(a).fill(0).map((function(e,t){return t})).map((function(e){return{item:t[e]||void 0,index:e}}));return Object(ze.jsx)(m.a,{width:384,height:384,display:"flex",flexWrap:"wrap",children:n.map((function(e){return Object(ze.jsx)(zt,{item:e.item},e.index)}))})}var Lt=a(230),Et=a(219),qt=a(211),Pt=a(216),Yt=a(220),Xt=a(231),At=a(232),Wt=a(217),Ft=[{label:"Mortal",index:8},{label:"Body Ref.",index:17},{label:"Qi Gath.",index:26}],Gt=I.map((function(e){return e}));function Bt(){var e=i.a.useContext(T),t=e.inventory,a=e.updateContext,n=i.a.useState(Gt[0]),r=Object(c.a)(n,2),s=r[0],l=r[1],o=i.a.useState(Ft[0]),u=Object(c.a)(o,2),d=u[0],h=u[1],p=i.a.useState(1),j=Object(c.a)(p,2),b=j[0],x=j[1],g=i.a.useState(!1),f=Object(c.a)(g,2),O=f[0],v=f[1];return i.a.useEffect((function(){var e=setInterval((function(){O&&(t.items=t.items.filter((function(e){if(R.includes(e.type))return!0;var t=e;if(t.isEquipped||t.isLocked)return!0;var a=t.type,n=t.item.realmIndex,i=t.item.quality;return"all"!==s&&a!==s||!(("all"===s||a===s)&&n<=d.index&&i<=b)})),a({inventory:JSON.parse(JSON.stringify(t))}))}),1e3);return function(){clearInterval(e)}}),[s,d,b,O]),Object(ze.jsxs)(m.a,{marginTop:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",children:[Object(ze.jsx)(m.a,{children:Object(ze.jsxs)(Lt.a,{children:[Object(ze.jsx)(Et.a,{id:"type-label",children:"Type"}),Object(ze.jsx)(qt.a,{labelId:"type-label",value:s,label:"Type",onChange:function(e){l(e.target.value)},children:Gt.map((function(e){return Object(ze.jsx)(Pt.a,{value:e,children:e},e)}))})]})}),Object(ze.jsx)(m.a,{children:Object(ze.jsxs)(Lt.a,{children:[Object(ze.jsx)(Et.a,{id:"realm-label",children:"Realm"}),Object(ze.jsx)(qt.a,{labelId:"realm-label",value:d.index.toString(),label:"Realm",onChange:function(e){var t=parseInt(e.target.value),a=Ft.find((function(e){return e.index===t}));a&&h(a)},children:Ft.map((function(e){return Object(ze.jsx)(Pt.a,{value:e.index,children:e.label},e.index)}))})]})}),Object(ze.jsx)(m.a,{maxWidth:120,children:Object(ze.jsx)(Yt.a,{id:"quality",label:"Quality",variant:"outlined",onChange:function(e){var t=parseInt(e.target.value);isNaN(t)||x(t)},value:b})}),Object(ze.jsx)(Xt.a,{children:Object(ze.jsx)(At.a,{control:Object(ze.jsx)(Wt.a,{checked:O,onClick:function(){return v(!O)}}),label:"Autosell"})})]})}function Nt(){var e=i.a.useContext(T).inventory,t=i.a.useState("all"),a=Object(c.a)(t,2),n=a[0],r=a[1],s=e.items.filter((function(e){return!z(e)||!e.isEquipped}));"all"!==n&&(s=s.filter((function(e){return e.type===n})));var l=i.a.useState({current:1,total:Math.ceil(s.length/36)}),o=Object(c.a)(l,2),u=o[0],d=o[1];i.a.useEffect((function(){d((function(e){var t=Math.max(Math.ceil(s.length/36),1);return{current:Math.min(e.current,t),total:t}}))}),[s.length]);var h=s.slice(36*(u.current-1),Math.min(36*u.current,s.length));return Object(ze.jsxs)(m.a,{children:[Object(ze.jsxs)(m.a,{display:"flex",children:[Object(ze.jsx)(Ht,{inventory:h}),Object(ze.jsx)(gt,{type:n,setType:r})]}),Object(ze.jsx)(xt,{pages:u,setPages:d}),Object(ze.jsx)(Bt,{})]})}function Dt(){for(var e=i.a.useContext(T).baseStats,t=Object(w.i)(),a=Object(Le.a)(),n=[],r=0,s=Object.entries(e);r<s.length;r++){var l=Object(c.a)(s[r],2),o=l[0],u=l[1];n.push(Object(ze.jsxs)(qe.a,{children:[We(o),": ",t(u)]},o))}return Object(ze.jsxs)(m.a,{paddingTop:a.spacing(1),paddingLeft:a.spacing(1),children:[Object(ze.jsx)(qe.a,{children:"Base stats"}),n]})}function Jt(e){var t=i.a.useContext(T),a=function(e,t){var a=t.baseSkills,n=t.manuals,i=t.inventory;return{base:a[e],manuals:E(e,n),treasuresMulti:q(e,i.items),treasures:P(e,i.items)}}(e.skill,t),n=Object(w.i)(),r=Object(Le.a)();return Object(ze.jsx)(Ze,{title:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(qe.a,{color:"inherit",children:["Character ",e.skill]}),Object(ze.jsxs)(qe.a,{children:["Base ",e.skill,": ",n(a.base)]}),Object(ze.jsxs)(qe.a,{children:["Manuals multi:",Object(ze.jsxs)(qe.a,{component:"span",color:a.manuals>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.manuals)]})]}),Object(ze.jsxs)(qe.a,{children:["Treasures Multi:",Object(ze.jsxs)(qe.a,{component:"span",color:a.treasuresMulti>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.treasuresMulti)]})]}),Object(ze.jsxs)(qe.a,{children:["Treasures bonus:",Object(ze.jsxs)(qe.a,{component:"span",color:a.treasures>=0?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","+",n(a.treasures)]})]})]}),children:e.children})}function Qt(){for(var e=i.a.useContext(T).skills,t=Object(w.i)(),a=Object(Le.a)(),n=[],r=0,s=Object.entries(e);r<s.length;r++){var l=Object(c.a)(s[r],2),o=l[0],u=l[1];n.push(Object(ze.jsx)(Jt,{skill:o,children:Object(ze.jsxs)(qe.a,{children:[We(o),": ",t(u)]},o)},o))}return Object(ze.jsx)(m.a,{paddingTop:a.spacing(1),paddingLeft:a.spacing(1),children:n})}function Vt(){var e=i.a.useState("inventory"),t=Object(c.a)(e,2),a=t[0],n=t[1],r=Object(Le.a)();return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsxs)(m.a,{width:512,height:32,paddingBottom:r.spacing(5),children:[Object(ze.jsx)(it.a,{variant:"outlined",size:"small",onClick:function(){return n("inventory")},color:"inventory"===a?"success":"primary",children:"Inventory"}),Object(ze.jsx)(it.a,{variant:"outlined",size:"small",onClick:function(){return n("equipment")},color:"equipment"===a?"success":"primary",children:"Equipment"}),Object(ze.jsx)(it.a,{variant:"outlined",size:"small",onClick:function(){return n("stats")},color:"stats"===a?"success":"primary",children:"Stats"}),Object(ze.jsx)(it.a,{variant:"outlined",size:"small",onClick:function(){return n("skills")},color:"skills"===a?"success":"primary",children:"Skills"})]}),Object(ze.jsxs)(m.a,{width:512,height:512,overflow:"auto",children:["inventory"===a?Object(ze.jsx)(Nt,{}):"","equipment"===a?Object(ze.jsx)(ct,{}):"","stats"===a?Object(ze.jsx)(Dt,{}):"","skills"===a?Object(ze.jsx)(Qt,{}):""]})]})}function Ut(){return Object(ze.jsxs)(m.a,{borderRight:"1px solid gray",children:[Object(ze.jsx)(et,{displayStats:[{name:"Health Regen",stat:"healthRegen"},{name:"Attack",stat:"attack"},{name:"Defence",stat:"defence"},{name:"Insight",stat:"insight"}]}),Object(ze.jsx)(Vt,{}),Object(ze.jsx)(nt,{})]})}Gt.unshift("all");var Kt=["label","rightLabel"];function _t(e){var t=e.label,a=e.rightLabel,n=Object(Qe.a)(e,Kt),i=a;return Object(ze.jsxs)(m.a,{sx:{display:"flex",alignItems:"center"},children:[!i&&Object(ze.jsx)(qe.a,{variant:"body1",color:"text.primary",children:t}),Object(ze.jsx)(m.a,{sx:{width:"60%",m:1},children:Object(ze.jsx)(Ne.a,Object(j.a)({variant:"determinate",color:"primary"},n))}),i&&Object(ze.jsx)(qe.a,{variant:"body1",color:"text.primary",children:t})]})}function Zt(e){var t=Math.floor(e/x),a=Math.min((e-t*x)/g,12);return 0!==t?"".concat(t," y ").concat(a.toPrecision(2)," m"):"".concat(a.toPrecision(2)," m")}function $t(e){for(var t=i.a.useContext(T),a=e.stats,n=e.activity,r=e.multiplicatorFunctionName,s=e.requiredTime,l=Object(w.i)(),o=[],u=0,d=Object.entries(a);u<d.length;u++){var h=Object(c.a)(d[u],2),p=h[0],j=h[1];o.push({text:We(p),effect:j*(r?Me[r](n,t):1)})}return Object(ze.jsxs)(m.a,{display:"flex",gap:1,children:[o.map((function(e){return Object(ze.jsxs)(qe.a,{variant:"body1",display:"inline",children:[e.text," ",s?l(s>1e3?e.effect:e.effect/s*1e3):""]},e.text)})),s&&s<1e3?"/s":""]})}function ea(e){var t,a=e.items,n=[],i=0,r=Object(be.a)(a);try{for(r.s();!(t=r.n()).done;){var s=t.value;i++;var l=Tt(s.name,s.type);if(l){var c=l.image,o=c.path,u=c.sizeX,d=c.x,h=c.y;n.push(Object(ze.jsx)(m.a,{display:"flex",children:Object(ze.jsx)(st,{path:o,size:u,position:{x:d,y:h}})},i))}}}catch(p){r.e(p)}finally{r.f()}return Object(ze.jsx)(m.a,{children:n.map((function(e){return e}))})}function ta(e){var t=e.activity,a=e.isActive,n=e.source,r=i.a.useContext(T),s=Object(w.i)(),l=r.updateContext,c=t.result,o=t.price,u=Object(Le.a)(),d=[];if(c.items){var h,p=Object(be.a)(c.items);try{for(p.s();!(h=p.n()).done;){var j=h.value;d.push({name:j.name,amount:j.amount})}}catch(v){p.e(v)}finally{p.f()}}var x=t.time?Me[t.time](t,r):t.baseTime,g=t.currentTime||0,f=x/b<5,O=x<1e3?(1e3/x).toFixed(2)+"/s":Zt(x);return Object(ze.jsx)(Ee.a,{elevation:8,sx:{paddingX:u.spacing(2),paddingY:u.spacing(1),margin:u.spacing(2),borderRadius:u.spacing(2),minHeight:60,border:"1px solid lightgray",borderColor:a?u.palette.primary.main:"lightgray",padding:u.spacing(1)},children:Object(ze.jsx)(m.a,{display:"flex",children:Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:o?400:600,minHeight:60,height:"100%",onClick:function(){l(a?{state:{action:"idle",activity:void 0}}:{state:{action:"activity",activity:{name:t.name,source:n}}})},children:[Object(ze.jsxs)(m.a,{display:"flex",children:[Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",children:[Object(ze.jsx)(qe.a,{children:t.name}),c.baseStats&&Object(ze.jsx)($t,{stats:c.baseStats,activity:t,requiredTime:x,multiplicatorFunctionName:c.baseStatsMulti}),d.length>0&&Object(ze.jsx)(m.a,{display:"flex",gap:u.spacing(1),children:d.map((function(e,t){return Object(ze.jsxs)(qe.a,{variant:"body1",display:"inline",children:[e.name," ",s(e.amount)]},t)}))}),c.skills&&Object(ze.jsx)($t,{stats:c.skills,activity:t,requiredTime:x,multiplicatorFunctionName:c.skillsMulti})]}),Object(ze.jsx)(m.a,{marginLeft:"auto",display:"flex",marginRight:2,children:c.items&&Object(ze.jsx)(ea,{items:c.items})})]}),Object(ze.jsx)(m.a,{children:Object(ze.jsx)(_t,{value:f&&a?100:g/x*100,label:O,rightLabel:!0})})]})})})}function aa(e){var t=e.source,a=e.Card,n=i.a.useContext(je),r=i.a.useContext(T).state,s=r.action,l=r.activity,c="";return"activity"===s&&l&&(c=l.name),Object(ze.jsx)(m.a,{children:Object(ze.jsx)(m.a,{display:"flex",flexWrap:"wrap",children:n[t].map((function(e){return Object(ze.jsx)(a,{activity:e,isActive:c===e.name,showTimesCompleted:!0,source:t},e.name)}))})})}var na=a(59),ia=a.n(na);function ra(e){var t,a=e.items,n=Object(w.i)(),i=[],r=0,s=Object(be.a)(a);try{for(s.s();!(t=s.n()).done;){var l=t.value;r++;var c=Tt(l.name,l.type);if(c){var o=c.image,u=o.path,d=o.sizeX,h=o.x,p=o.y;i.push(Object(ze.jsxs)(m.a,{display:"flex",alignItems:"center",gap:1,children:[Object(ze.jsx)(st,{path:u,size:d,position:{x:h,y:p}}),Object(ze.jsxs)(qe.a,{display:"inline",children:[l.name," ",n(l.amount)]})]},r))}}}catch(j){s.e(j)}finally{s.f()}return Object(ze.jsx)(m.a,{children:i.map((function(e){return e}))})}function sa(e){var t=e.item,a=e.context,n=t,i=n.time?Me[n.time](n):n.baseTime,r=i<1e3?(1e3/i).toFixed(2)+"/s":Zt(i),s=n.result,l=n.price;return Object(ze.jsxs)(m.a,{sx:{border:1,p:1,bgcolor:"background.paper"},children:[Object(ze.jsx)(qe.a,{variant:"h6",children:t.name}),Object(ze.jsxs)(qe.a,{children:["Craft time: ",r]}),Object(ze.jsx)(qe.a,{children:t.description}),Object(ze.jsxs)(m.a,{display:"flex",justifyContent:"space-between",marginY:2,alignItems:"center",children:[l&&l.items&&Object(ze.jsx)(ra,{items:l.items}),Object(ze.jsx)(ia.a,{fontSize:"large"}),Object(ze.jsx)(m.a,{display:"flex",marginRight:2,children:s.items&&Object(ze.jsx)(ra,{items:s.items})})]}),s.baseStats&&Object(ze.jsx)($t,{stats:s.baseStats,activity:n,requiredTime:i,multiplicatorFunctionName:n.result.baseStatsMulti}),s.skills&&Object(ze.jsx)($t,{stats:s.skills,activity:n,requiredTime:i,multiplicatorFunctionName:n.result.skillsMulti}),Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){return a.setActiveItem(n.name)},children:"Select"})]})}function la(e){var t=e.width,a=e.height,n=e.item,r=e.Cell,s=e.Tooltip,l=i.a.useState(null),o=Object(c.a)(l,2),u=o[0],d=o[1],h=Boolean(u),p=h?"simple-popper":void 0;return Object(ze.jsx)(Ot.a,{onClickAway:function(){d(null)},children:Object(ze.jsxs)(m.a,{width:t,height:a,onClick:function(e){d(u?null:e.currentTarget)},children:[Object(ze.jsx)(r,{width:t,height:a,item:n,context:e.context}),Object(ze.jsx)(vt.a,{id:p,open:h,anchorEl:u,children:s&&Object(ze.jsx)(s,{item:n,context:e.context})})]})})}function ca(e){var t=e.width,a=e.height;return Object(ze.jsx)(m.a,{width:t,height:a,border:"1px solid gray"})}function oa(e){var t=e.cellWidth,a=e.cellHeight,n=e.sizeX,i=e.sizeY,r=e.items,s=e.itemTypes,l=e.Cell,c=e.Tooltip,o=Array(n*i).fill(0).map((function(e,t){return t})).map((function(e){var t=r[e];if(!t)return{index:e,Cell:ca};if(l)return{index:e,Cell:l,Tooltip:c};if(!s)return{index:e,Cell:ca};var a=s.find((function(e){return e.type===t.type}));return a?{index:e,Cell:a.Cell,Tooltip:a.Tooltip}:{index:e,Cell:ca}}));return Object(ze.jsx)(m.a,{width:n*t,height:i*a,display:"flex",flexWrap:"wrap",children:o.map((function(n){return Object(ze.jsx)(la,{width:t,height:a,item:r[n.index],Cell:n.Cell,Tooltip:n.Tooltip,context:e.context},n.index)}))})}function ua(e){var t=e.width,a=e.height,n=e.item,i=Tt(n.name,n.type).image;return Object(ze.jsxs)(m.a,{width:t,height:a,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},children:[Object(ze.jsx)(m.a,{children:Object(ze.jsx)(st,{path:i.path,size:i.sizeX,position:{x:i.x,y:i.y}})}),Object(ze.jsx)(m.a,{maxWidth:t,overflow:"auto",whiteSpace:"nowrap",children:Object(ze.jsx)(qe.a,{children:n.name})})]})}a(212),a(218);var ma=a(234),da=a(235),ha=a(236),pa=a(237),ja=a(238);function ba(e){var t=i.a.useContext(T).skills,a=e.activity,n=a.result.items;if(!n)return Object(ze.jsx)(ze.Fragment,{});var r,s=Object(w.i)(),l=[],c=0,o=Object(be.a)(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;c++;var d=Tt(u.name,u.type);if(d){var h,p=d.image,j=p.path,b=p.sizeX,x=p.x,g=p.y,f=void 0,O=void 0;if(I.includes(u.type))O=Oe(f=ge(d.realmIndex,t.crafting,(null===(h=a.price)||void 0===h?void 0:h.priceMulti)||1),d.realmIndex);l.push(Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",children:[Object(ze.jsxs)(m.a,{display:"flex",alignItems:"center",gap:1,children:[Object(ze.jsx)(st,{path:j,size:b,position:{x:x,y:g}}),Object(ze.jsxs)(qe.a,{display:"inline",children:[u.name," ",s(u.amount)]})]}),I.includes(u.type)?Object(ze.jsxs)(qe.a,{children:["quality: ",s(f)," power: ",s(O)]}):""]},c))}}}catch(v){o.e(v)}finally{o.f()}return Object(ze.jsx)(m.a,{children:l.map((function(e){return e}))})}function xa(e){var t,a=e.activity,n=i.a.useContext(T),r=i.a.useContext(je),s=r.crafting,l=r.updateContext,c=Object(Le.a)(),o=a.price,u=a.result,d="activity"===n.state.action&&(null===(t=n.state.activity)||void 0===t?void 0:t.name)===a.name,h=a.time?Me[a.time](a,n):a.baseTime,p=a.currentTime||0,j=h/b<5,x=h<1e3?(1e3/h).toFixed(2)+"/s":Zt(h);return Object(ze.jsx)(Ee.a,{elevation:8,sx:{paddingX:c.spacing(2),paddingY:c.spacing(1),borderRadius:c.spacing(2),minHeight:60,border:"1px solid lightgray",borderColor:d?c.palette.primary.main:"lightgray",padding:c.spacing(1),maxWidth:"600px"},children:Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:o?400:600,minHeight:60,height:"100%",children:[" ",Object(ze.jsxs)(m.a,{display:"flex",justifyContent:"space-between",marginY:2,alignItems:"center",children:[o&&o.items&&Object(ze.jsx)(ra,{items:o.items}),Object(ze.jsx)(ia.a,{fontSize:"large"}),Object(ze.jsx)(m.a,{display:"flex",marginRight:2,children:u.items&&Object(ze.jsx)(ba,{activity:a})})]}),u.baseStats&&Object(ze.jsx)($t,{stats:u.baseStats,activity:a,requiredTime:h,multiplicatorFunctionName:a.result.baseStatsMulti}),u.skills&&Object(ze.jsx)($t,{stats:u.skills,activity:a,requiredTime:h,multiplicatorFunctionName:a.result.skillsMulti}),Object(ze.jsx)(m.a,{children:Object(ze.jsx)(_t,{value:j&&d?100:p/h*100,label:x,rightLabel:!0})}),Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){if(d){n.updateContext({state:{action:"idle",activity:void 0}});var e=s.findIndex((function(e){return e.name===a.name}));-1!==e&&(s[e].currentTime=0,l({crafting:s.slice()}))}else n.updateContext({state:{action:"activity",activity:{name:a.name,source:"crafting"}}})},children:d?"stop":"craft"})]})})}var ga=a(229);function fa(e){var t,a=e.activity,n=i.a.useContext(je),r=n.crafting,s=n.updateContext,l=(null===(t=a.price)||void 0===t?void 0:t.priceMulti)||1;return Object(ze.jsx)(Ee.a,{elevation:8,sx:{borderRadius:2,minHeight:60,border:"1px solid lightgray",borderColor:"lightgray",padding:1,minWidth:60},children:Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",minHeight:60,height:"100%",children:[Object(ze.jsx)(qe.a,{children:"Price Multi"}),Object(ze.jsx)(ga.a,{defaultValue:l,onChange:function(e){try{var t=parseInt(e.target.value);if(isNaN(t))throw new Error("Price multiplier is not a number");var n=r.findIndex((function(e){return e.name===a.name}));if(-1===n)return;r[n].price&&(r[n].price.priceMulti=t),s({crafting:r.slice()})}catch(i){console.log(i)}}})]})})}function Oa(e){var t=e.width,a=e.height,n=e.item.result.items[0],i=n.name,r=n.type;return Object(ze.jsx)(ua,{width:t,height:a,item:{name:i,type:r}})}function va(){var e=i.a.useContext(je).crafting,t=i.a.useState(),a=Object(c.a)(t,2),n=a[0],r=a[1];return Object(ze.jsxs)(m.a,{marginLeft:2,marginTop:2,children:[n&&Object(ze.jsxs)(m.a,{display:"flex",gap:2,marginBottom:2,children:[Object(ze.jsx)(fa,{activity:e.find((function(e){return e.name===n}))}),Object(ze.jsx)(xa,{activity:e.find((function(e){return e.name===n}))})]}),Object(ze.jsx)(oa,{cellWidth:160,cellHeight:64,sizeX:5,sizeY:5,items:e,Cell:Oa,Tooltip:sa,context:{setActiveItem:r}})]})}var ya=a(239);var ka=Object(w.k)((function(e){var t=e.item,a=t.name,n=t.health,r=t.attack,s=t.defence,l=t.healthRegen,c=Object(w.i)(),o=i.a.useContext(T),u=o.state,m=o.updateContext,d=!("fighting"!==u.action||!u.enemy)&&u.enemy.name===a,h=d&&u.enemy?"".concat(c(u.enemy.health),"/").concat(c(u.enemy.currentHealth)):c(n);return Object(ze.jsxs)(pa.a,{children:[Object(ze.jsx)(ya.a,{onClick:e.toggleTooltip,onMouseOver:e.showTooltip,onMouseOut:e.hideTooltip,children:a}),Object(ze.jsx)(ya.a,{onClick:e.toggleTooltip,children:h}),Object(ze.jsx)(ya.a,{onClick:e.toggleTooltip,children:c(r)}),Object(ze.jsx)(ya.a,{onClick:e.toggleTooltip,children:c(s)}),Object(ze.jsx)(ya.a,{onClick:e.toggleTooltip,children:c(l)}),Object(ze.jsx)(ya.a,{children:Object(ze.jsx)(it.a,{variant:"contained",onClick:function(){if(d)m({state:{action:"idle",enemy:void 0}});else{var e=JSON.parse(JSON.stringify(t));e.currentHealth=e.health,m({state:{action:"fighting",enemy:e}})}},color:d?"warning":"primary",children:d?"Flee":"Fight"})})]})}),(function(e){for(var t=e.item,a=t.health,n=t.healthRegen,i=t.defence,r=t.attack,s=Object(w.i)(),l=[],o=0,u=Object.entries({health:a,attack:r,healthRegen:n,defence:i});o<u.length;o++){var d=Object(c.a)(u[o],2),h=d[0],p=d[1];l.push(Object(ze.jsxs)(qe.a,{children:[We(h),": ",s(p)]},h))}return Object(ze.jsxs)(m.a,{bgcolor:"background.paper",border:1,padding:2,children:[Object(ze.jsx)(qe.a,{variant:"h6",children:t.name}),Object(ze.jsx)(qe.a,{marginY:1,children:t.description}),l,t.result.items&&Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(qe.a,{variant:"h6",marginTop:2,children:"Reward"}),Object(ze.jsx)(ra,{items:t.result.items})]})]})}));function Ca(){var e=i.a.useContext(je).enemies;return Object(ze.jsx)(m.a,{marginTop:2,marginLeft:2,children:Object(ze.jsx)(ma.a,{sx:{width:600,height:600,overflow:"auto"},children:Object(ze.jsxs)(da.a,{children:[Object(ze.jsx)(ha.a,{children:Object(ze.jsxs)(pa.a,{children:[Object(ze.jsx)(ya.a,{children:"name"}),Object(ze.jsx)(ya.a,{children:"health"}),Object(ze.jsx)(ya.a,{children:"attack"}),Object(ze.jsx)(ya.a,{children:"defence"}),Object(ze.jsx)(ya.a,{children:"healthRegen"})]})}),Object(ze.jsx)(ja.a,{children:e.map((function(e){return Object(ze.jsx)(ka,{item:e},e.name)}))})]})})})}function Sa(){var e=i.a.useContext(T).state,t=Object(Le.a)();if("cultivating"!==e.action||!e.manual)return Object(ze.jsx)(m.a,{width:"60%",border:"1px solid gray",height:t.spacing(10),borderRadius:t.spacing(1),children:Object(ze.jsx)(qe.a,{variant:"h5",marginTop:t.spacing(2),marginLeft:t.spacing(2),children:"No manual selected"})});var a=e.manual,n=a.manual,r=a.learningProgress,s=(n.rarity,n.realm,n.maxLevel),l=r.exp,o=r.level,u=y(o),d=v(o+1),h=[];if(n.stats)for(var p=0,j=Object.entries(n.stats);p<j.length;p++){var b=Object(c.a)(j[p],2),x=b[0],g=b[1];h.push({text:We(x),effect:g*r.level})}var f=[];if(n.skills)for(var O=0,k=Object.entries(n.skills);O<k.length;O++){var C=Object(c.a)(k[O],2),S=C[0],w=C[1];f.push({text:We(S),effect:w*r.level})}return Object(ze.jsxs)(m.a,{width:"60%",border:"1px solid gray",borderRadius:t.spacing(1),children:[Object(ze.jsxs)(m.a,{display:"flex",marginTop:t.spacing(2),marginLeft:t.spacing(2),alignItems:"center",children:[Object(ze.jsx)(m.a,{width:100,minHeight:60,marginY:t.spacing(1),display:"flex",justifyContent:"center",children:Object(ze.jsx)("img",{src:n.image.path||"/manuals/placeholder.png",width:"60px",height:"auto",alt:""})}),Object(ze.jsx)(qe.a,{variant:"h5",children:n.name}),Object(ze.jsxs)(qe.a,{marginLeft:t.spacing(2),children:["Level: ",o," / ",s]}),Object(ze.jsx)(m.a,{width:400,marginLeft:t.spacing(4),children:Object(ze.jsx)(wa,{value:(l-u)/d*100,label:o!==s?"Exp: ".concat((l-u).toFixed(2),"/").concat(d):""})})]}),Object(ze.jsxs)(m.a,{marginLeft:t.spacing(2),marginBottom:t.spacing(2),display:"flex",children:[Object(ze.jsxs)(qe.a,{children:[n.realm," (",n.rarity,")"]}),h.map((function(e){return Object(ze.jsxs)(qe.a,{marginLeft:t.spacing(2),children:[e.text,": +",(100*e.effect).toFixed(2),"%"]},e.text)})),f.map((function(e){return Object(ze.jsxs)(qe.a,{marginLeft:t.spacing(2),children:[e.text,": +",(100*e.effect).toFixed(2),"%"]},e.text)}))]})]})}function wa(e){return Object(ze.jsxs)(m.a,{sx:{display:"flex",alignItems:"center"},children:[Object(ze.jsx)(qe.a,{variant:"body1",color:"text.primary",children:e.label}),Object(ze.jsx)(m.a,{sx:{width:"60%",m:1},children:Object(ze.jsx)(Ne.a,Object(j.a)({variant:"determinate",color:"primary"},e))})]})}function Ma(e){var t=e.manual,a=e.learningProgress,n=i.a.useContext(T),r=n.manuals,s=n.state,l=n.updateContext,o=n.stats,u=i.a.useState(null),d=Object(c.a)(u,2),h=d[0],p=d[1],j=Object(Le.a)(),b=Boolean(h),x=b?"simple-popper":void 0;return Object(ze.jsx)(Ot.a,{onClickAway:function(){p(null)},children:Object(ze.jsxs)(m.a,{border:"1px solid gray",width:120,height:200,borderRadius:j.spacing(1),onClick:function(e){p(h?null:e.currentTarget)},children:[Object(ze.jsx)(m.a,{width:100,minHeight:60,marginY:j.spacing(1),display:"flex",justifyContent:"center",children:Object(ze.jsx)("img",{src:t.image.path||"/manuals/placeholder.png",width:"60px",height:"auto",alt:""})}),Object(ze.jsxs)(m.a,{children:[Object(ze.jsx)(qe.a,{variant:"body2",marginLeft:j.spacing(1),children:t.name}),Object(ze.jsxs)(qe.a,{variant:"body2",marginLeft:j.spacing(1),children:[a.level,"/",t.maxLevel]}),Object(ze.jsx)(qe.a,{variant:"body2",marginLeft:j.spacing(1),children:t.realm})]}),Object(ze.jsx)(vt.a,{id:x,open:b,anchorEl:h,children:Object(ze.jsxs)(m.a,{sx:{border:1,p:1,bgcolor:"background.paper"},children:[Object(ze.jsx)(it.a,{onClick:function(){if(r){var e=r.findIndex((function(e){return e.manual.name===t.name}));-1!==e&&l({state:{action:"cultivating",manual:r[e]}})}},color:"success",children:"Study"}),Object(ze.jsx)(it.a,{onClick:function(){if(r){var e=r.findIndex((function(e){return e.manual.name===t.name}));-1!==e&&(r[e].isEquipped=!r[e].isEquipped,s.manual&&s.manual.manual.name===t.name&&(s={action:"idle"}),o=X(n),l({manuals:r,state:s,stats:o}))}},color:"warning",children:"Unequip"})]})})]})})}function Ta(){var e=Object(Le.a)();return Object(ze.jsx)(m.a,{border:"1px solid gray",width:120,height:200,borderRadius:e.spacing(1)})}function Ra(){var e=i.a.useContext(T).manuals,t=Xe().width,a=Object(Le.a)(),r=null===e||void 0===e?void 0:e.filter((function(e){return e.isEquipped})),s=Array(10).fill(0).map((function(e,t){return t}));return Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(qe.a,{variant:"h5",marginTop:a.spacing(2),marginBottom:a.spacing(2),children:"Equipped Manuals"}),Object(ze.jsx)(m.a,{display:"flex",flexWrap:"wrap",maxWidth:t-512,children:s.map((function(e){return r&&r[e]?Object(n.createElement)(Ma,Object(j.a)(Object(j.a)({},r[e]),{},{key:e})):Object(ze.jsx)(Ta,{},e)}))})]})}function Ia(){var e=i.a.useContext(T),t=e.manuals,a=e.updateContext,n=e.stats,r=Object(Le.a)();if(!t)return Object(ze.jsx)(m.a,{});var s=t.filter((function(e){return!e.isEquipped}));s.sort((function(e,t){var a=te.findIndex((function(t){return t.name===e.manual.realm}));return te.findIndex((function(e){return e.name===t.manual.realm}))-a}));var l=t.filter((function(e){return e.isEquipped})).length<10;return Object(ze.jsxs)(m.a,{children:[Object(ze.jsx)(qe.a,{variant:"h5",marginY:r.spacing(2),children:"Known manuals"}),s.map((function(i){var s=i.manual,o=i.learningProgress,u=[];if(s.stats)for(var d=0,h=Object.entries(s.stats);d<h.length;d++){var p=Object(c.a)(h[d],2),j=p[0],b=p[1];u.push({text:We(j),effect:b*o.level})}var x=[];if(s.skills)for(var g=0,f=Object.entries(s.skills);g<f.length;g++){var O=Object(c.a)(f[g],2),v=O[0],y=O[1];x.push({text:We(v),effect:y*o.level})}return Object(ze.jsxs)(m.a,{display:"flex",alignItems:"center",width:500,children:[Object(ze.jsxs)(m.a,{children:[Object(ze.jsxs)(qe.a,{children:[s.name," ",s.realm," (",s.rarity,")"]}),Object(ze.jsxs)(qe.a,{children:["Level: ",o.level," / ",s.maxLevel]}),u.map((function(e){return Object(ze.jsxs)(qe.a,{children:[e.text,": ",(100*e.effect).toFixed(2),"%"]},e.text)})),x.map((function(e){return Object(ze.jsxs)(qe.a,{children:[e.text,": ",(100*e.effect).toFixed(2),"%"]},e.text)}))]}),Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){return function(i){if(l&&t){var r=t.findIndex((function(e){return e.manual.name===i}));-1!==r&&(t[r].isEquipped=!t[r].isEquipped,n=X(e),a({manuals:t,stats:n}))}}(s.name)},sx:{maxHeight:r.spacing(4),minHeight:r.spacing(4),margin:"auto"},disabled:!l,children:"Select"})]},s.name)}))]})}function za(){var e=Object(Le.a)(),t=Xe().height;return Object(ze.jsxs)(m.a,{marginLeft:e.spacing(2),marginTop:e.spacing(2),height:t-at(e,20),overflow:"auto",children:[Object(ze.jsx)(qe.a,{variant:"h5",marginBottom:e.spacing(2),children:"Studying Manual"}),Object(ze.jsx)(Sa,{}),Object(ze.jsx)(Ra,{}),Object(ze.jsx)(Ia,{})]})}function Ha(e){var t=e.progress,a=e.isHeavenly,n=400*t||0;return Object(ze.jsxs)(m.a,{position:"relative",children:[Object(ze.jsx)(m.a,{bgcolor:"black",height:400,maxHeight:400,overflow:"hidden",width:100,position:"absolute",top:0,left:0,zIndex:2,sx:{opacity:.3},border:"3px solid gray",borderRadius:4}),Object(ze.jsxs)(m.a,{height:400,maxHeight:400,overflow:"hidden",width:100,display:"flex",flexDirection:"column",position:"absolute",top:0,left:0,borderRadius:4,children:[Object(ze.jsx)(m.a,{height:400-n,minHeight:400-n,maxHeight:400-n,bgcolor:"lightgrey",sx:{opacity:.3}}),Object(ze.jsx)(m.a,{height:n,minHeight:n,maxHeight:n,bgcolor:a?"rgb(51,157,255)":"rgb(0, 153, 0)"})]})]})}function La(e){var t=e.PassedTribulations,a=e.currentPower,n=Object(w.i)(),i=Object(Le.a)(),r=Xe().height;return Object(ze.jsx)(m.a,{paddingLeft:i.spacing(2),paddingTop:i.spacing(2),children:Object(ze.jsxs)(m.a,{height:r-at(i,16),display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,children:[Object(ze.jsx)(qe.a,{variant:"h4",marginBottom:i.spacing(2),children:"You have reached the pinnacle of cultivation"}),Object(ze.jsx)(qe.a,{variant:"h6",children:"Passed tribulations"}),t.map((function(e){return Object(ze.jsx)(Ze,{title:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(qe.a,{children:"Multipliers:"}),Object(ze.jsxs)(qe.a,{children:["Player stats: ",n(e.statMulti)]}),Object(ze.jsxs)(qe.a,{children:["Tribulation power: ",n(e.tribulationMulti)]})]}),children:Object(ze.jsx)(m.a,{children:Object(ze.jsxs)(qe.a,{children:[e.name,": ",e.stepReached]})})},e.name)})),Object(ze.jsx)(m.a,{border:"1px solid gray",borderRadius:4,display:"flex",alignItems:"center",padding:i.spacing(2),gap:i.spacing(4),children:Object(ze.jsxs)(m.a,{children:[Object(ze.jsxs)(qe.a,{children:["Health x ",n(a.health)]}),Object(ze.jsxs)(qe.a,{children:["Health regen x ",n(a.healthRegen)]}),Object(ze.jsxs)(qe.a,{children:["Attack x ",n(a.attack)]}),Object(ze.jsxs)(qe.a,{children:["Defence x ",n(a.defence)]}),Object(ze.jsxs)(qe.a,{children:["Insight x ",n(a.insight)]})]})})]})})}function Ea(e){var t=e.player,a=e.cultivationRealms,n=e.nextRealmIndex,i=(t.stats,0),r=t.currentStats.health,s=JSON.parse(JSON.stringify(a)),l=s[n];if(!l.tribulation)return 0;for(var c=0;c<=l.tribulation.steps;c++){var o=Ie(n,s),u=$(o,t),m=ee(t,o);if(m<=0)break;if(u<=0)i++,s[n].tribulation.stepReached=i;else{if((r-=u*(o.health/m))<=0)break;i++,s[n].tribulation.stepReached=i}}return Math.min(Math.max(i-1,0),l.tribulation.steps)}function qa(){for(var e,t,a=Object(Le.a)(),n=i.a.useContext(T),r=n.realm,s=i.a.useContext(je),l=s.cultivationRealms,c=s.updateContext,o=l.length>=r.index+2?r.index+1:void 0,u=Xe().height,d=[],h=0;h<=r.index;h++){var p=l[h];p.tribulation&&d.push({name:p.name,stepReached:p.tribulation.stepReached||0,statMulti:p.tribulation.stepReached?Math.pow(p.tribulation.statsMulti,p.tribulation.stepReached):1,tribulationMulti:p.tribulation.stepReached?Math.pow(p.tribulation.multiplier,p.tribulation.stepReached):1})}for(var j={statMulti:1,tribulationMulti:1},b=0;b<d.length;b++){var x=d[b];j.statMulti*=x.statMulti||1,j.tribulationMulti*=x.tribulationMulti||1}var g=Re(r.index,l);if(!o)return Object(ze.jsx)(La,{currentPower:g,PassedTribulations:d});var f=l[o],O=Ie(o,l),v=Object(w.i)(),y=O.healthRegen,k=O.attack,C=O.defence,S=O.health,M=i.a.useContext(T),R=M.state,I=M.updateContext,z="breakthrough"===R.action,H=(null===(e=f.currentStats)||void 0===e?void 0:e.currentHealth)||S,L=Re(o,l);return Object(ze.jsx)(m.a,{paddingLeft:a.spacing(2),paddingTop:a.spacing(2),children:Object(ze.jsxs)(m.a,{height:u-at(a,16),display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,children:[Object(ze.jsxs)(qe.a,{variant:"h4",marginBottom:a.spacing(2),children:["Next realm: ",f.name]}),f.tribulation&&Object(ze.jsx)(Ze,{title:Object(ze.jsx)(ze.Fragment,{children:Object(ze.jsxs)(qe.a,{children:["Each completed stage provides",Object(ze.jsxs)(qe.a,{component:"span",color:a.palette.success.main,display:"inline",children:[" ","x",f.tribulation.statsMulti," "]}),"multiplier to all stats aIndex",Object(ze.jsxs)(qe.a,{component:"span",color:a.palette.error.main,display:"inline",children:[" ","x",f.tribulation.multiplier," "]}),"to all following heavenly tribulations"]})}),children:Object(ze.jsxs)(qe.a,{variant:"h6",marginBottom:a.spacing(2),children:["Tribulation stages: ",f.tribulation.steps]})}),Object(ze.jsx)(m.a,{children:Object(ze.jsxs)(m.a,{display:"flex",alignItems:"center",children:[Object(ze.jsxs)(m.a,{marginRight:a.spacing(4),children:[Object(ze.jsx)(qe.a,{variant:"h6",children:"Passed tribulations"}),d.map((function(e){return Object(ze.jsx)(Ze,{title:Object(ze.jsxs)(ze.Fragment,{children:[Object(ze.jsx)(qe.a,{children:"Multipliers:"}),Object(ze.jsxs)(qe.a,{children:["Player stats: ",v(e.statMulti)]}),Object(ze.jsxs)(qe.a,{children:["Tribulation power: ",v(e.tribulationMulti)]})]}),children:Object(ze.jsx)(m.a,{children:Object(ze.jsxs)(qe.a,{children:[e.name,": ",e.stepReached]})})},e.name)}))]}),Object(ze.jsx)(m.a,{width:100,height:400,children:Object(ze.jsx)(Ha,{progress:S?(S-H)/S:0,isHeavenly:!(null===(t=f.tribulation)||void 0===t||!t.stepReached)})}),Object(ze.jsxs)(m.a,{marginLeft:a.spacing(4),children:[Object(ze.jsx)(qe.a,{variant:"h6",children:"Tribulation power:"}),Object(ze.jsxs)(qe.a,{children:["Hp: ",v(H)]}),Object(ze.jsxs)(qe.a,{children:["Hp.regen: ",v(y)]}),Object(ze.jsxs)(qe.a,{children:["Atk: ",v(k)]}),Object(ze.jsxs)(qe.a,{children:["Def: ",v(C)]}),Object(ze.jsx)(qe.a,{variant:"h6",children:f.tribulation?"Tribulation stage: ".concat(f.tribulation.stepReached||0,"/").concat(f.tribulation.steps):""}),Object(ze.jsx)(qe.a,{variant:"h6",children:f.tribulation?"Power multi: ".concat(f.tribulation.stepReached?v(j.tribulationMulti*Math.pow(f.tribulation.multiplier,f.tribulation.stepReached)):1):""})]})]})}),Object(ze.jsxs)(m.a,{marginY:a.spacing(2),children:[Object(ze.jsx)(it.a,{variant:"outlined",onClick:function(){if(z)R.action="idle",R.realm=void 0,l[o].currentStats=void 0,l[o].tribulation&&(l[o].tribulation.stepReached=void 0);else{R.action="breakthrough",R.realm={index:o};var e=f.baseStats,t=e.health,a=e.healthRegen,n=e.attack,i=e.defence;l[o].currentStats={health:t,currentHealth:t,healthRegen:a,attack:n,defence:i},l[o].tribulation&&(l[o].tribulation.stepReached=0)}I({state:R}),c({cultivationRealms:l.slice()})},size:"large",children:z?"Stop":"Breakthrough"}),f.tribulation&&!z&&Object(ze.jsxs)(qe.a,{children:["estim. stage"," ",Ea({player:n,cultivationRealms:l,nextRealmIndex:o})]})]}),Object(ze.jsxs)(m.a,{border:"1px solid gray",borderRadius:4,display:"flex",alignItems:"center",padding:a.spacing(2),gap:a.spacing(4),children:[Object(ze.jsxs)(m.a,{children:[Object(ze.jsxs)(qe.a,{children:["Health x ",v(g.health)]}),Object(ze.jsxs)(qe.a,{children:["Health regen x ",v(g.healthRegen)]}),Object(ze.jsxs)(qe.a,{children:["Attack x ",v(g.attack)]}),Object(ze.jsxs)(qe.a,{children:["Defence x ",v(g.defence)]}),Object(ze.jsxs)(qe.a,{children:["Insight x ",v(g.insight)]})]}),Object(ze.jsx)(ia.a,{fontSize:"large"}),Object(ze.jsxs)(m.a,{children:[Object(ze.jsxs)(qe.a,{children:["Health x ",v(L.health)]}),Object(ze.jsxs)(qe.a,{children:["Health regen x ",v(L.healthRegen)]}),Object(ze.jsxs)(qe.a,{children:["Attack x ",v(L.attack)]}),Object(ze.jsxs)(qe.a,{children:["Defence x ",v(L.defence)]}),Object(ze.jsxs)(qe.a,{children:["Insight x ",v(L.insight)," "]})]})]})]})})}function Pa(e){var t=e.width,a=e.height,n=e.item,i=n.image;return Object(ze.jsxs)(m.a,{width:t,height:a,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},children:[Object(ze.jsx)(m.a,{children:Object(ze.jsx)("img",{src:i.path||"/manuals/placeholder.png",width:"60px",height:"auto",alt:""})}),Object(ze.jsx)(m.a,{maxWidth:t,overflow:"auto",whiteSpace:"nowrap",children:Object(ze.jsx)(qe.a,{children:n.name})})]})}function Ya(e){var t=e.item,a=(e.context,i.a.useContext(T)),n=(a.manuals,a.inventory,t.name),r=t.realm,s=t.stats,l=t.skills,o=t.maxLevel,u=t.price,d=Object(w.i)(),h=[];if(s)for(var p=0,j=Object.entries(s);p<j.length;p++){var b=Object(c.a)(j[p],2),x=b[0],g=b[1];h.push(Object(ze.jsxs)(qe.a,{children:[We(x),": ",d(100*g)+"%"]},x))}if(l)for(var f=0,O=Object.entries(l);f<O.length;f++){var v=Object(c.a)(O[f],2),y=v[0],k=v[1];h.push(Object(ze.jsxs)(qe.a,{children:[We(y),": ",d(100*k)+"%"]},y))}return Object(ze.jsxs)(m.a,{border:1,p:2,bgcolor:"background.paper",children:[Object(ze.jsx)(qe.a,{variant:"h6",children:n}),Object(ze.jsx)(qe.a,{children:r}),Object(ze.jsxs)(qe.a,{children:["Max Level: ",o]}),Object(ze.jsx)(qe.a,{variant:"h6",marginY:1,children:"Stats per Level:"}),h,Object(ze.jsx)(qe.a,{variant:"h6",children:"Price"}),Object(ze.jsx)(ra,{items:u}),Object(ze.jsx)(it.a,{variant:"contained",onClick:function(e){},children:"Buy"})]})}function Xa(){var e=i.a.useState(O),t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(ze.jsx)(m.a,{children:Object(ze.jsx)(oa,{cellWidth:100,cellHeight:100,sizeX:5,sizeY:5,items:a,Cell:Pa,Tooltip:Ya,context:n})})}var Aa={Manuals:Object(ze.jsx)(Xa,{})};function Wa(){var e=Object(w.h)("Manuals",Aa),t=e.state,a=e.states,n=e.setState,i=e.Content;return Object(ze.jsxs)(m.a,{children:[Object(ze.jsx)(Fa,{state:t,states:a,setState:n}),Object(ze.jsx)(i,{})]})}var Fa=function(e){var t=e.state,a=e.states,n=e.setState,i=Object(w.j)().width;return Object(ze.jsx)(Ee.a,{elevation:2,children:Object(ze.jsx)(m.a,{width:i-512,children:a.map((function(e){return Object(ze.jsx)(it.a,{variant:"outlined",size:"large",color:t===e?"info":"primary",onClick:function(){return n(e)},sx:{margin:2},children:e},e)}))})})},Ga={Training:Object(ze.jsx)(aa,{source:"trainings",Card:function(e){var t,a=e.activity,n=e.isActive,r=e.source,s=e.showTimesCompleted,l=i.a.useContext(T),c=Object(w.i)(),o=l.updateContext,u=a.result,d=a.price,h=Object(Le.a)(),p=[];if(u.items){var j,x=Object(be.a)(u.items);try{for(x.s();!(j=x.n()).done;){var g=j.value;p.push({name:g.name,amount:g.amount})}}catch(R){x.e(R)}finally{x.f()}}var f=[];if(null!==d&&void 0!==d&&d.items){var O,v=Object(be.a)(d.items);try{for(v.s();!(O=v.n()).done;){var y=O.value;f.push({name:y.name,amount:y.amount})}}catch(R){v.e(R)}finally{v.f()}}var k=a.time?Me[a.time](a,l):a.baseTime,C=a.currentTime||0,S=k/b<5,M=k<1e3?(1e3/k).toFixed(2)+"/s":Zt(k);return Object(ze.jsx)(Ee.a,{elevation:8,sx:{paddingX:h.spacing(2),paddingY:h.spacing(1),margin:h.spacing(2),borderRadius:h.spacing(2),minHeight:60,border:"1px solid lightgray",borderColor:n?h.palette.primary.main:"lightgray",padding:h.spacing(1)},children:Object(ze.jsxs)(m.a,{display:"flex",children:[Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:d?400:600,minHeight:60,height:"100%",onClick:function(){o(n?{state:{action:"idle",activity:void 0}}:{state:{action:"activity",activity:{name:a.name,source:r}}})},children:[Object(ze.jsxs)(m.a,{display:"flex",children:[Object(ze.jsxs)(m.a,{display:"flex",flexDirection:"column",children:[Object(ze.jsx)(qe.a,{children:a.name}),a.result.baseStats&&Object(ze.jsx)($t,{stats:a.result.baseStats,activity:a,requiredTime:k,multiplicatorFunctionName:a.result.baseStatsMulti}),p.length>0&&Object(ze.jsx)(m.a,{display:"flex",gap:h.spacing(1),children:p.map((function(e){return Object(ze.jsxs)(qe.a,{variant:"body1",display:"inline",children:[e.name," ",c(e.amount)]},e.name)}))}),a.result.skills&&Object(ze.jsx)($t,{stats:a.result.skills,activity:a,requiredTime:k,multiplicatorFunctionName:a.result.skillsMulti})]}),s&&Object(ze.jsx)(m.a,{marginLeft:"auto",children:Object(ze.jsx)(qe.a,{children:a.timesCompleted&&a.timesCompleted>1e4?c(a.timesCompleted):a.timesCompleted})})]}),Object(ze.jsx)(m.a,{children:Object(ze.jsx)(_t,{value:S&&n?100:C/k*100,label:M,rightLabel:!0})})]}),d&&Object(ze.jsxs)(m.a,{borderLeft:"1px solid gray",paddingLeft:h.spacing(2),minWidth:200,minHeight:60,children:[Object(ze.jsx)(qe.a,{children:"Price"}),(null===(t=a.price)||void 0===t?void 0:t.baseStats)&&Object(ze.jsx)($t,{stats:a.price.baseStats,activity:a}),Object(ze.jsx)(m.a,{display:"flex",gap:h.spacing(1),children:f.map((function(e){return Object(ze.jsxs)(qe.a,{variant:"body1",display:"inline",children:[e.name," ",c(e.amount)]},e.name)}))})]})]})})}}),Manuals:Object(ze.jsx)(za,{}),Breakthrough:Object(ze.jsx)(qa,{}),Mining:Object(ze.jsx)(aa,{source:"mining",Card:ta}),Crafting:Object(ze.jsx)(va,{}),Gathering:Object(ze.jsx)(aa,{source:"gathering",Card:ta}),Fighting:Object(ze.jsx)(Ca,{}),Shops:Object(ze.jsx)(Wa,{})},Ba=function(e){var t=Object(w.j)(),a=t.width,n=t.height,i=Object(Le.a)(),r=Object(w.h)("Training",e.states),s=r.state,l=r.setState,c=r.states,o=r.Content;return Object(ze.jsxs)(m.a,{width:a-512,height:n-Object(w.e)(i,8),children:[Object(ze.jsx)(Na,{state:s,setState:l,states:c}),s&&Object(ze.jsx)(o,{})]})},Na=function(e){var t=e.state,a=e.states,n=e.setState,r=Object(w.j)().width,s=i.a.useContext(T),l=function(e,t){if(!t)return!1;var a=ee(e,t.baseStats),n=$(t.currentStats||t.baseStats,e),i=t.baseStats.health/a;return e.currentStats.health>n*i}(s,i.a.useContext(je).cultivationRealms[s.realm.index+1]);function c(e,t){var a="primary";return e===t&&(a="success"),l&&"Breakthrough"===t&&(a="warning"),a}return Object(ze.jsx)(Ee.a,{elevation:2,children:Object(ze.jsx)(m.a,{width:r-512,children:a.map((function(e){return Object(ze.jsx)(it.a,{variant:"outlined",size:"large",color:c(t,e),onClick:function(){return n(e)},sx:{margin:2},children:e},e)}))})})};function Da(){!function(){var e=i.a.useState(Xe()),t=Object(c.a)(e,2),a=t[0],n=t[1];i.a.useEffect((function(){function e(){n(Xe())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[])}();var e=Xe(),t=e.width,a=e.height,n=i.a.useState(!1),r=Object(c.a)(n,2),s=r[0],l=r[1];return Object(ze.jsx)(o.a,{children:Object(ze.jsx)(u.a,{theme:p,children:Object(ze.jsx)(w.a,{data:Ja,children:Object(ze.jsx)(He,{children:Object(ze.jsxs)(m.a,{width:t,height:a,overflow:"hidden",children:[Object(ze.jsx)(Ge,{setSettings:l}),s&&Object(ze.jsx)(w.d,{setOpened:l,data:Ja}),!s&&Object(ze.jsxs)(m.a,{display:"flex",children:[Object(ze.jsx)(Ut,{}),Object(ze.jsx)(Ba,{states:Ga})]})]})})})})})}w.g;var Ja=[{Context:w.c,defaultContextValue:w.f,cookies:[{key:"tickRate",cookieName:"tickrate",type:"number"},{key:"gameSpeed",cookieName:"gamespeed",type:"number"},{key:"notation",cookieName:"notation"}]},{Context:T,defaultContextValue:M,localStorageName:"player"},{Context:je,defaultContextValue:he,localStorageName:"game"}];s.a.render(Object(ze.jsx)(i.a.StrictMode,{children:Object(ze.jsx)(l.a,{basename:"https://SoulDancer27.github.io/cultivation-simulator",children:Object(ze.jsx)(Da,{})})}),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.6b30ba6c.chunk.js.map