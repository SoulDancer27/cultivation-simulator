(this["webpackJsonpcultivation-simulator"]=this["webpackJsonpcultivation-simulator"]||[]).push([[0],{146:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(34),s=a.n(r),l=a(6),c=a(204),o=a(208),u=a(220),m=a(219),d=a(115),h=Object(m.a)(Object(d.a)({palette:{background:{default:"rgb(240, 240, 240)",paper:"rgb(240, 240, 240)"}}})),p=a(17),j=10,b=72e3,x=b/12,g=x/30,f=[{name:"Fist Strike",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/red.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,stats:{attack:.01}},{name:"Block",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/yellow.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,stats:{defence:.01}},{name:"Meditation",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/green.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,stats:{health:.01,healthRegen:.01}},{name:"Training Guidance",realm:"Mortal 1",rarity:"common",price:[{name:"Copper Coin",type:"money",amount:100}],image:{path:"/manuals/purple.png",x:0,y:0,sizeX:32,sizeY:32},maxLevel:10,skills:{training:.01}}];function O(e,t,a){return 10*e}function v(e){return 5*(1+e)*e}var y={attack:1,health:10,healthRegen:.5,defence:0,insight:1},k={training:0,mining:0,crafting:0,gathering:0},C=["weapon","armor","helmet","ring","pendant"],S=a(11),w={stats:Object(p.a)({age:10*b},y),currentStats:{health:10},baseStats:y,skills:k,baseSkills:k,realm:{index:0,power:{}},manuals:f.map((function(e){return{manual:e,learningProgress:{exp:0,level:0},isEquipped:!1}})),inventory:new S.b({countableItemTypes:["money","mineral","herb"],uniqueItemTypes:["treasure","potion"],items:[]}),state:{action:"idle"}},M=i.a.createContext(Object(p.a)(Object(p.a)({},w),{},{updateContext:function(e){},setContext:function(e){}}));var T=["money","mineral","herb"],R=["treasure","potion"];function I(e){return"treasure"===e.type&&e.id&&e.item}function z(e,t){var a=L(e,t.manuals),n=E(e,t.inventory.items),i=q(e,t.inventory.items);return t.baseSkills[e]*a*n+i}function H(e){for(var t=Object(p.a)({},e.baseSkills),a=0,n=Object.entries(e.baseSkills);a<n.length;a++){var i=Object(l.a)(n[a],1)[0];t[i]=z(i,e)}return Object(p.a)(Object(p.a)({},e.skills),t)}function L(e,t){var a=1;return t?(t.forEach((function(t){try{if(!t.isEquipped||!t.manual.skills)throw new Error("skip");var n=(t.manual.skills[e]||0)*t.learningProgress.level;a+=n}catch(i){}})),a):1}function E(e,t){var a=1;return t?(t.forEach((function(t){if(I(t)&&t.isEquipped){var n=t.item.stats.skillsMulti,i=n&&n[e]||0;a*=1+i}})),a):0}function q(e,t){var a=0;return t?(t.forEach((function(t){if(I(t)&&t.isEquipped){var n=t.item.stats.skills,i=n&&n[e]||0;a+=i}})),a):0}function P(e,t){var a=X(e,t.manuals),n=t.realm.power[e]||1,i=A(e,t.inventory.items),r=W(e,t.inventory.items);return t.baseStats[e]*n*a*i+r}function Y(e){for(var t=Object(p.a)({},e.baseStats),a=0,n=Object.entries(e.baseStats);a<n.length;a++){var i=Object(l.a)(n[a],1)[0];t[i]=P(i,e)}return Object(p.a)(Object(p.a)({},e.stats),t)}function X(e,t){var a=1;return t?(t.forEach((function(t){try{if(!t.isEquipped||!t.manual.stats)throw new Error("skip");var n=(t.manual.stats[e]||0)*t.learningProgress.level;a+=n}catch(i){}})),a):1}function A(e,t){var a=1;return t?(t.forEach((function(t){if(I(t)&&t.isEquipped){var n=t.item.stats.statsMulti,i=n&&n[e]||0;a*=1+i}})),a):0}function W(e,t){var a=0;return t?(t.forEach((function(t){if(I(t)&&t.isEquipped){var n=t.item.stats.stats,i=n&&n[e]||0;a+=i}})),a):0}function F(e,t){return e.stats.attack/(1+.01*t.defence)-t.healthRegen}function G(e,t){return e.attack/(1+.01*t.stats.defence)-t.stats.healthRegen}function B(e,t,a){for(var n=0,i=Object.entries(t);n<i.length;n++){var r=Object(l.a)(i[n],2),s=r[0],c=r[1];try{e[s]+=c*a}catch(o){console.log("addBaseStats: ".concat(o))}}return e}function N(e,t,a){for(var n=0,i=Object.entries(t);n<i.length;n++){var r=Object(l.a)(i[n],2),s=r[0],c=r[1];try{e[s]+=c*a}catch(o){console.log("addSkillExp: ".concat(o))}}return e}function D(e){var t=i.a.useContext(M),a=t.stats,n=t.baseStats,r=t.baseSkills,s=t.currentStats,l=t.state,c=t.skills,o=t.inventory,u=t.updateContext,m=i.a.useContext(S.c).gameSpeed,d=e.currentTime;e.previousTime;i.a.useEffect((function(){var i=(e.currentTime-e.previousTime)*m;if("fighting"===l.action&&l.enemy){var d=l.enemy,h=F(t,d)*i/1e3,p=G(d,t)*i/1e3,j=function(e,t,a){var n=a.currentStats,i=F(a,t)*e/1e3,r=G(t,a)*e/1e3;return r>=n.health&&(i*=n.health/r),i<t.currentHealth?0:i<t.health?i>t.currentHealth?1:0:Math.floor((i-t.currentHealth)/t.health)}(i,d,t),b=Math.min(d.currentHealth-(h-d.health*j),d.health),x=Math.min(s.health-p,a.health);j>0&&(d.result.baseStats&&(n=B(n,d.result.baseStats,j)),d.result.skills&&(r=N(r,d.result.skills,j))),x<=0?l={action:"idle",enemy:void 0}:(s.health=x,l.enemy.currentHealth=b),a=Y(t),c=H(t),u({currentStats:s,baseStats:n,baseSkills:r,inventory:o,state:l,stats:a,skills:c})}}),[d])}var J=[{name:"Running",baseTime:5*g,result:{baseStats:{health:.5,attack:.1},skills:{training:.01}}},{name:"Breathing Practice",baseTime:5*g,result:{baseStats:{health:1,healthRegen:.01},skills:{training:.01}}},{name:"Squats",baseTime:5*g,result:{baseStats:{attack:.2},skills:{training:.01}}},{name:"Dodge",baseTime:5*g,result:{baseStats:{defence:.1},skills:{training:.01}}},{name:"Situps",baseTime:x,result:{baseStats:{health:1.5,attack:.3},skills:{training:.03}}},{name:"Relaxation",baseTime:x,result:{baseStats:{health:3,healthRegen:.03},skills:{training:.03}}},{name:"Basic Punch",baseTime:x,result:{baseStats:{attack:.6},skills:{training:.03}}},{name:"Block",baseTime:x,result:{baseStats:{defence:.3},skills:{training:.03}}},{name:"Swimming",baseTime:5*x,result:{baseStats:{health:5,attack:1},skills:{training:.1}}},{name:"Climb Mountains",baseTime:5*x,result:{baseStats:{health:10,healthRegen:.1},skills:{training:.1}}},{name:"Hit the Scarecrows",baseTime:5*x,result:{baseStats:{attack:2},skills:{training:.1}}},{name:"Defence Stance",baseTime:5*x,result:{baseStats:{defence:1},skills:{training:.1}}}],Q=J=J.map((function(e){return e.time||(e.time="training time"),e.result.baseStats&&!e.result.baseStatsMulti&&(e.result.baseStatsMulti="default"),e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="default"),e})),V=[{name:"Copper",baseTime:5*g,result:{skills:{mining:.01},items:[{type:"mineral",name:"Copper",amount:1}]}},{name:"Iron",baseTime:x,result:{skills:{mining:.03},items:[{type:"mineral",name:"Iron",amount:1}]}},{name:"Steel",baseTime:6*x,result:{skills:{mining:.1},items:[{type:"mineral",name:"Steel",amount:1}]}},{name:"Cold Steel",baseTime:30*x,result:{skills:{mining:.3},items:[{type:"mineral",name:"Cold Steel",amount:1}]}},{name:"Celestial Gold",baseTime:150*x,result:{skills:{mining:1},items:[{type:"mineral",name:"Celestial Gold",amount:1}]}}],U=V=V.map((function(e){return e.time||(e.time="mining time"),e.result.baseStats&&!e.result.baseStatsMulti&&(e.result.baseStatsMulti="default"),e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="default"),e})),K=[{name:"Copper Sword",baseTime:30*g,description:"boosts attack",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Copper Armor",baseTime:30*g,description:"boosts health",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Copper Helmet",baseTime:30*g,description:"boosts health and defence",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Copper Pendant",baseTime:30*g,description:"boosts health and regen",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Copper Ring",baseTime:30*g,description:"boosts attack and training",price:{items:[{name:"Copper",amount:3,type:"mineral"},{name:"Iron",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Copper Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Iron Sword",baseTime:30*g,description:"boosts attack",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Iron Armor",baseTime:30*g,description:"boosts health",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Iron Helmet",baseTime:30*g,description:"boosts health and defence",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Iron Pendant",baseTime:30*g,description:"boosts health and regen",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Iron Ring",baseTime:30*g,description:"boosts attack and training",price:{items:[{name:"Iron",amount:3,type:"mineral"},{name:"Steel",amount:1,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Iron Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Steel Sword",baseTime:30*g,description:"boosts attack",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Steel Armor",baseTime:30*g,description:"boosts health",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Steel Helmet",baseTime:30*g,description:"boosts health and defence",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Steel Pendant",baseTime:30*g,description:"boosts health and regen",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Steel Ring",baseTime:30*g,description:"boosts attack and training",price:{items:[{name:"Steel",amount:5,type:"mineral"},{name:"Iron",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Steel Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Cold Steel Sword",baseTime:30*g,description:"boosts attack",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Cold Steel Armor",baseTime:30*g,description:"boosts health",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Cold Steel Helmet",baseTime:30*g,description:"boosts health and defence",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Cold Steel Pendant",baseTime:30*g,description:"boosts health and regen",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Cold Steel Ring",baseTime:30*g,description:"boosts attack and training",price:{items:[{name:"Cold Steel",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Cold Steel Ring",amount:1,type:"treasure",generator:"Ring"}]}},{name:"Golden Sword",baseTime:30*g,description:"boosts attack",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Sword",amount:1,type:"treasure",generator:"Sword"}]}},{name:"Golden Armor",baseTime:30*g,description:"boosts health",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Armor",amount:1,type:"treasure",generator:"Armor"}]}},{name:"Golden Helmet",baseTime:30*g,description:"boosts health and defence",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Helmet",amount:1,type:"treasure",generator:"Helmet"}]}},{name:"Golden Pendant",baseTime:30*g,description:"boosts health and regen",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Pendant",amount:1,type:"treasure",generator:"Pendant"}]}},{name:"Golden Ring",baseTime:30*g,description:"boosts attack and training",price:{items:[{name:"Celestial Gold",amount:3,type:"mineral"}]},result:{skills:{crafting:.1},skillsMulti:"crafting skill reward",items:[{name:"Golden Ring",amount:1,type:"treasure",generator:"Ring"}]}}],_=K=K.map((function(e){return e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="crafting skill reward"),e}));function Z(e,t){return e.attack/(1+.01*t.stats.defence)-t.stats.healthRegen}function $(e,t){return e.stats.attack/(1+.01*t.defence)-t.healthRegen}for(var ee=[],te=function(e,t){return Math.pow(e,t)},ae={steps:10,statsMulti:1.05,multiplier:1.1},ne=0,ie=0,re=["Mortal","Body Refinement","Qi Gathering","Foundation","Qi Transformation"];ie<re.length;ie++)for(var se=re[ie],le=1;le<=9;le++){var ce=se+" "+le;if(0!==ne){var oe=te(1.5,ne-1),ue=te(1.2,ne);ee.push({name:ce,baseStats:{health:100*oe,healthRegen:0,defence:0,attack:3*oe},realmPowers:{health:1*ue,healthRegen:1*ue,attack:1*ue,defence:1*ue,insight:1*ue},tribulation:1===le?ae:void 0}),ne++}else ee.push({name:ce,baseStats:{health:0,healthRegen:0,defence:0,attack:0},realmPowers:{health:1,healthRegen:1,attack:1,defence:1,insight:1}}),ne++}var me=[{name:"Collect grass",baseTime:5*g,result:{skills:{gathering:.01},items:[{type:"herb",name:"Grass Stalk",amount:1}]}},{name:"Pick tree leaves",baseTime:x,result:{skills:{gathering:.03},items:[{type:"herb",name:"Oak leaf",amount:1}]}}],de={trainings:Q,mining:U,crafting:_,gathering:me=me.map((function(e){return e.time||(e.time="gathering time"),e.result.baseStats&&!e.result.baseStatsMulti&&(e.result.baseStatsMulti="default"),e.result.skills&&!e.result.skillsMulti&&(e.result.skillsMulti="default"),e})),cultivationRealms:ee,enemies:[{name:"Random Nobody",description:"A pathetic person with no prospects in life",health:10,healthRegen:0,defence:0,attack:1,result:{items:[{type:"money",amount:1,name:"Copper Coin"}]}},{name:"Street Thug",description:"A gangster from the streets",health:50,healthRegen:0,defence:0,attack:3,result:{items:[{type:"money",amount:5,name:"Copper Coin"}]}},{name:"Ordinary rabbit",description:"Turns out, they are pretty dangerous",health:150,healthRegen:1,defence:10,attack:4,result:{items:[{type:"money",amount:20,name:"Copper Coin"}]}},{name:"Feral Rat",health:250,healthRegen:2,defence:30,attack:10,result:{items:[{type:"money",amount:50,name:"Copper Coin"}]}},{name:"Forest Wolf",health:500,healthRegen:5,defence:10,attack:40,result:{items:[{type:"money",amount:250,name:"Copper Coin"}]}},{name:"Forest Bandit",health:1e3,healthRegen:10,defence:30,attack:70,result:{items:[{type:"money",amount:1e3,name:"Copper Coin"}]}},{name:"Black Boar",health:1500,healthRegen:10,defence:30,attack:150,result:{items:[{type:"money",amount:1,name:"Silver Coin"}]}},{name:"Turtle",health:5e3,healthRegen:25,defence:100,attack:30,result:{items:[{type:"money",amount:5,name:"Silver Coin"}]}},{name:"Stone Wolf",health:8e3,healthRegen:20,defence:50,attack:400,result:{items:[{type:"money",amount:25,name:"Silver Coin"}]}},{name:"White Tiger",health:15e3,healthRegen:100,defence:50,attack:1e3,result:{items:[{type:"money",amount:200,name:"Silver Coin"}]}},{name:"Forest Bandit Leader",health:25e3,healthRegen:200,defence:20,attack:1500,result:{items:[{type:"money",amount:500,name:"Silver Coin"}]}},{name:"Evil Bat",health:5e4,healthRegen:200,defence:60,attack:2500,result:{items:[{type:"money",amount:1500,name:"Silver Coin"}]}},{name:"Spirit Hare",description:"What in the world is this thing?",health:1e5,healthRegen:400,defence:120,attack:4e3,result:{items:[{type:"money",amount:1,name:"Golden Coin"}]}},{name:"Swamp Alligator",health:25e4,healthRegen:1500,defence:200,attack:1e4,result:{items:[{type:"money",amount:5,name:"Golden Coin"}]}},{name:"Thunder Lizard",health:6e5,healthRegen:2500,defence:200,attack:2e4,result:{items:[{type:"money",amount:25,name:"Golden Coin"}]}},{name:"Blazing Leopard",health:12e5,healthRegen:6e3,defence:250,attack:5e4,result:{items:[{type:"money",amount:150,name:"Golden Coin"}]}},{name:"Steel Turtle",health:2e6,healthRegen:1e4,defence:500,attack:2e4,result:{items:[{type:"money",amount:350,name:"Golden Coin"}]}},{name:"Arrogant Young Master",description:"Never heard of you!",health:4e6,healthRegen:1e4,defence:100,attack:15e4,result:{items:[{type:"money",amount:1e3,name:"Golden Coin"}]}}]},he=de,pe=i.a.createContext(Object(p.a)(Object(p.a)({},he),{},{updateContext:function(e){},setContext:function(e){}})),je=a(29);function be(e,t){try{var a=Number.MAX_VALUE;if(!t.price)return a;var n=t.price.priceMulti||1;if(t.price.baseStats)for(var i=0,r=Object.entries(t.price.baseStats);i<r.length;i++){var s=Object(l.a)(r[i],2),c=s[0],o=s[1],u=Math.floor(e.baseStats[c]/o/n);u<a&&(a=u)}if(t.price.items){var m,d=Object(je.a)(t.price.items);try{var h=function(){var t=m.value;if(["money","mineral"].includes(t.type)){var i=e.inventory.items.findIndex((function(e){return e.type===t.type&&e.name===t.name}));if(-1===i)return{v:0};var r=e.inventory[i];if(r&&function(e){return e.name&&e.amount}(r)){var s=Math.floor(r.amount/t.amount/n);s<a&&(a=s)}}if("treasure"===t.type){var l=e.inventory.items.filter((function(e){return"treasure"===e.type&&e.item.name===t.name})),c=Math.floor(l.length/t.amount/n);c<a&&(a=c)}};for(d.s();!(m=d.n()).done;){var p=h();if("object"===typeof p)return p.v}}catch(j){d.e(j)}finally{d.f()}}return a}catch(b){console.log("calculateMaxActions: ".concat(b))}return 0}function xe(e,t,a){var n,i=(e+1)/10,r=(n=(1+t)/(10*Math.pow(8,i)),1-Math.exp(-n));return ge*(1+10*t)*r*(1+.1*(Math.sqrt(a||1)-1))}var ge=10;function fe(e,t){var a=(t+1)/10;return e*Math.pow(6,a)}var Oe=[{name:"Copper Sword",description:"",image:{path:"/treasures/swords1.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"weapon"},{name:"Copper Armor",description:"",image:{path:"/treasures/armors.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"armor"},{name:"Copper Helmet",description:"",image:{path:"/treasures/helmets.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"helmet"},{name:"Copper Pendant",description:"",image:{path:"/treasures/pendants.png",x:0,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"pendant"},{name:"Copper Ring",description:"",image:{path:"/treasures/rings.png",x:0,y:0,sizeX:32,sizeY:32},realmIndex:0,type:"ring"},{name:"Iron Sword",description:"",image:{path:"/treasures/swords1.png",x:0,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"weapon"},{name:"Iron Armor",description:"",image:{path:"/treasures/armors.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"armor"},{name:"Iron Helmet",description:"",image:{path:"/treasures/helmets.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"helmet"},{name:"Iron Pendant",description:"",image:{path:"/treasures/pendants.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"pendant"},{name:"Iron Ring",description:"",image:{path:"/treasures/rings.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:9,type:"ring"},{name:"Steel Sword",description:"",image:{path:"/treasures/swords1.png",x:128,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"weapon"},{name:"Steel Armor",description:"",image:{path:"/treasures/armors.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"armor"},{name:"Steel Helmet",description:"",image:{path:"/treasures/helmets.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"helmet"},{name:"Steel Pendant",description:"",image:{path:"/treasures/pendants.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"pendant"},{name:"Steel Ring",description:"",image:{path:"/treasures/rings.png",x:64,y:0,sizeX:32,sizeY:32},realmIndex:18,type:"ring"},{name:"Cold Steel Sword",description:"",image:{path:"/treasures/swords1.png",x:160,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"weapon"},{name:"Cold Steel Armor",description:"",image:{path:"/treasures/armors.png",x:160,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"armor"},{name:"Cold Steel Helmet",description:"",image:{path:"/treasures/helmets.png",x:160,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"helmet"},{name:"Cold Steel Pendant",description:"",image:{path:"/treasures/pendants.png",x:128,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"pendant"},{name:"Cold Steel Ring",description:"",image:{path:"/treasures/rings.png",x:128,y:0,sizeX:32,sizeY:32},realmIndex:27,type:"ring"},{name:"Golden Sword",description:"",image:{path:"/treasures/swords1.png",x:32,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"weapon"},{name:"Golden Armor",description:"",image:{path:"/treasures/armors.png",x:416,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"armor"},{name:"Golden Helmet",description:"",image:{path:"/treasures/helmets.png",x:416,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"helmet"},{name:"Golden Pendant",description:"",image:{path:"/treasures/pendants.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"pendant"},{name:"Golden Ring",description:"",image:{path:"/treasures/rings.png",x:96,y:0,sizeX:32,sizeY:32},realmIndex:36,type:"ring"}],ve=a(209);function ye(e){return function(t,a,n){try{var i,r=Oe.find((function(e){return e.name===n.name}));if(!r)throw new Error("".concat(n.name," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"));var s={type:"treasure",id:Object(ve.a)(),item:r},l=xe(r.realmIndex,a.skills.crafting,(null===t||void 0===t||null===(i=t.price)||void 0===i?void 0:i.priceMulti)||1),c=fe(l,r.realmIndex);return s.item.stats=e(c),s.item.quality=l,s}catch(o){console.log(o)}}}ye((function(e){return{stats:{attack:e},statsMulti:{attack:Math.sqrt(e)/100}}})),ye((function(e){return{stats:{health:5*e},statsMulti:{health:Math.sqrt(e)/200}}})),ye((function(e){return{stats:{health:e,defence:Math.sqrt(e)},statsMulti:{health:Math.sqrt(e)/200,defence:Math.sqrt(e)/1e3}}})),ye((function(e){return{stats:{attack:e/2},statsMulti:{attack:Math.sqrt(e)/200},skillsMulti:{training:Math.sqrt(e)/200}}})),ye((function(e){return{stats:{health:e,healthRegen:e/30},statsMulti:{health:Math.sqrt(e)/200,healthRegen:Math.sqrt(e)/100}}}));var ke=[{name:"Grass Stalk",description:"Just an ordinary grass",image:{path:"/herbs/herbs.png",x:32,y:192,sizeX:32,sizeY:32}},{name:"Oak leaf",description:"A leaf from a big tree",image:{path:"/herbs/herbs.png",x:64,y:0,sizeX:32,sizeY:32}}],Ce=[{name:"Copper",description:"A good for nothing material",image:{path:"/minerals/icon48.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Iron",description:"The basic crafting necessity",image:{path:"/minerals/icon47.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Steel",description:"Ordinary Steel",image:{path:"/minerals/icon2.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Cold Steel",description:"Much harder than regular Steel",image:{path:"/minerals/icon1.png",x:0,y:0,sizeX:32,sizeY:32}},{name:"Celestial Gold",description:"The best material for treasures",image:{path:"/minerals/icon7.png",x:0,y:0,sizeX:32,sizeY:32}}],Se=[{name:"Copper Coin",description:"The most common currency of the Mortal World",image:{path:"money/coins.png",x:0,y:36,sizeX:36,sizeY:36}},{name:"Silver Coin",description:"Currency for slighter wealthier mortals",image:{path:"money/coins.png",x:0,y:72,sizeX:36,sizeY:36}},{name:"Golden Coin",description:"The eternal store of value, at least for mortals",image:{path:"money/coins.png",x:0,y:0,sizeX:36,sizeY:36}}];var we={"training time":function(e,t){var a=1+t.skills.training;return e.baseTime/a},"mining time":function(e,t){var a=1+t.skills.mining;return e.baseTime/a},"gathering time":function(e,t){var a=1+t.skills.gathering;return e.baseTime/a},"crafting skill reward":function(e,t){var a,n=(null===(a=e.price)||void 0===a?void 0:a.priceMulti)||1,i=e.result.items?e.result.items[0]:void 0;if(!i)return 1;var r=Oe.find((function(e){return e.name===i.name}));if(!r)return 1;var s=fe(xe(r.realmIndex,t.skills.crafting,n),r.realmIndex);return Math.max(1,Math.sqrt(.1*s))},default:function(e){return 1/((t=e.timesCompleted||0)<=10?1:.233*(1+Math.sqrt(t)));var t}};function Me(e){var t=i.a.useContext(M),a=i.a.useContext(pe),n=i.a.useContext(S.c).gameSpeed,r=t.state,s=t.baseStats,l=t.stats,c=t.inventory,o=t.baseSkills,u=t.skills,m=t.updateContext;i.a.useEffect((function(){try{if("activity"!==r.action||!r.activity)return;var i=(e.currentTime-e.previousTime)*n,d=a[r.activity.source].find((function(e){return r.activity&&e.name===r.activity.name}));if(!d)return;d.currentTime||(d.currentTime=0),0===be(t,d)&&m({state:r={action:"idle",activity:void 0}});var h=function(e,t,a){var n=t.currentTime||0;n+=e;var i=t.time?we[t.time](t,a):t.baseTime,r=Math.floor(n/i);n-=r*i;var s=be(a,t);return s<=r&&(n=0),{timesCompleted:r=Math.min(r,s),currentTime:n}}(i,d,t),j=h.timesCompleted,b=h.currentTime;if(d.currentTime=b,d.timesCompleted=((null===d||void 0===d?void 0:d.timesCompleted)||0)+j,0===j)return void a.updateContext(Object(p.a)({},a));if(d.price){var x=d.priceMulti||1;d.price.baseStats&&(s=B(s,d.price.baseStats,-j*x))}d.result.baseStats&&(s=B(s,d.result.baseStats,j*("string"===typeof d.result.baseStatsMulti?we[d.result.baseStatsMulti](d,t):1))),d.result.skills&&(o=N(o,d.result.skills,j*("string"===typeof d.result.skillsMulti?we[d.result.skillsMulti](d,t):1))),d.result.items,l=Y(t),u=H(t),m({stats:l,baseStats:s,baseSkills:o,skills:u,inventory:c})}catch(g){console.log("Error in useActivityManager: ".concat(g))}}),[e])}function Te(e,t){for(var a={},n=0,i=Object.entries(y);n<i.length;n++){a[Object(l.a)(i[n],1)[0]]=1}for(var r=0,s=Object.entries(t[e].realmPowers);r<s.length;r++){var c=Object(l.a)(s[r],2),o=c[0],u=c[1];a[o]*=u}for(var m=0;m<=e;m++){var d=t[m];if(d.tribulation&&d.tribulation.stepReached)for(var h=Math.pow(d.tribulation.statsMulti,d.tribulation.stepReached),p=0,j=Object.entries(d.realmPowers);p<j.length;p++){a[Object(l.a)(j[p],1)[0]]*=h}}return a}function Re(e,t){var a=t[e],n={health:a.baseStats.health,attack:a.baseStats.attack,healthRegen:a.baseStats.healthRegen,defence:a.baseStats.defence};if(!a.tribulation||!a.tribulation.stepReached)return n;for(var i=0;i<=e;i++){var r=t[i];if(r.tribulation&&r.tribulation.stepReached){var s=Math.pow(r.tribulation.multiplier,r.tribulation.stepReached);n.health*=s,n.attack*=s,n.defence*=s,n.healthRegen*=s}}return n}var Ie=a(0);function ze(e){var t=i.a.useContext(S.c).tickRate,a=i.a.useState({previousTime:Date.now(),currentTime:Date.now()}),n=Object(l.a)(a,2),r=n[0],s=n[1];return i.a.useEffect((function(){var e=setInterval((function(){s((function(e){return{previousTime:e.currentTime,currentTime:Date.now()}}))}),1e3/t);return function(){clearInterval(e)}}),[t]),function(e){var t=i.a.useContext(M),a=t.stats,n=t.state,r=t.updateContext,s=i.a.useContext(S.c).gameSpeed,l=e.currentTime;e.previousTime,i.a.useEffect((function(){if(!["idle","breakthrough"].includes(n.action)){var t=(e.currentTime-e.previousTime)*s;a.age+=t,r({stats:a})}}),[l])}(r),function(e){var t=i.a.useContext(M),a=t.stats,n=t.currentStats,r=t.state,s=t.updateContext,l=i.a.useContext(S.c).gameSpeed,c=e.currentTime,o=e.previousTime;i.a.useEffect((function(){var e=(c-o)*l;if(n.health<=a.health&&["training","activity","cultivating"].includes(r.action)){var t=30*a.health/100*e/x;n.health=Math.min(n.health+a.healthRegen*e/1e3+t,a.health),s({stats:a})}}),[c])}(r),D(r),function(e){var t=i.a.useContext(M),a=i.a.useContext(S.c).gameSpeed,n=t.stats,r=t.state,s=t.skills,l=t.updateContext,c=e.currentTime;e.previousTime,i.a.useEffect((function(){if("cultivating"===r.action&&r.manual){var i=(e.currentTime-e.previousTime)*a,c=r.manual,o=c.learningProgress,u=c.manual,m=o.level,d=o.exp,h=n.insight*i/1e3,p=v(u.maxLevel),j=Math.min(d+h,p),b=j-v(m)>=O(o.level+1,u.realm,u.rarity)?m+1:m;r.manual.learningProgress.exp=j,b!==m&&(r.manual.learningProgress.level=b,u.stats&&(n=Y(t)),u.skills&&(s=H(t))),j>=p&&(r={action:"idle",manual:void 0}),l({state:r,stats:n,skills:s})}}),[c])}(r),Me(r),function(e){var t=i.a.useContext(M),a=i.a.useContext(S.c).gameSpeed,n=i.a.useContext(pe),r=n.cultivationRealms,s=n.updateContext,l=t.stats,c=t.state,o=t.realm,u=t.updateContext,m=t.currentStats,d=e.currentTime;e.previousTime,i.a.useEffect((function(){if("breakthrough"===c.action&&c.realm){var n=(e.currentTime-e.previousTime)*a,i=r[c.realm.index];if(i&&i.currentStats){var d=$(t,i.currentStats||i.baseStats)*n/1e3,h=Z(i.currentStats||i.baseStats,t)*n/1e3,p=Math.min(i.currentStats.currentHealth-d,i.currentStats.health),j=Math.min(m.health-h,l.health);if(p<=0){if(i.tribulation){var b=i.tribulation.stepReached;if(!b||i.tribulation.steps>b){var x=void 0!==b?b+1:1;i.tribulation.stepReached=x;var g=Re(c.realm.index,r),f=g.health,O=g.healthRegen,v=g.attack,y=g.defence;return i.currentStats.health=f,i.currentStats.healthRegen=O,i.currentStats.attack=v,i.currentStats.defence=y,i.currentStats.currentHealth=f,void s({cultivationRealms:r.slice()})}return o.index=c.realm.index,i.tribulation&&(i.tribulation.stepReached=i.tribulation.steps),o.power=Te(o.index,r),c={action:"idle",realm:void 0},i.currentStats=void 0,l=Y(t),u({stats:l,currentStats:m,state:c,realm:o}),s({cultivationRealms:r.slice()}),void alert("Breakthrough success!")}o.index=c.realm.index,c={action:"idle",realm:void 0},o.power=Te(o.index,r),l=Y(t),i.currentStats=void 0,u({stats:l,currentStats:m,state:c,realm:o}),s({cultivationRealms:r.slice()}),alert("Breakthrough success!")}else if(j<=0){if(i.tribulation){if(i.tribulation.stepReached)return o.index=c.realm.index,o.power=Te(o.index,r),c={action:"idle",realm:void 0},l=Y(t),i.currentStats=void 0,i.tribulation.stepReached-=1,u({stats:l,currentStats:m,state:c,realm:o}),s({cultivationRealms:r.slice()}),void alert("Breakthrough success!");u({state:c={action:"idle",realm:void 0}})}c={action:"idle",realm:void 0},i.currentStats=void 0,alert("Breakthrough failed, you are not strong enough yet")}else m.health=j,i.currentStats.currentHealth=p,u({currentStats:m,state:c,realm:o}),s({cultivationRealms:r})}}}),[d])}(r),Object(Ie.jsx)(Ie.Fragment,{children:e.children})}var He=a(28),Le=a(216),Ee=a(221),qe=a(108),Pe=a.n(qe);function Ye(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var Xe={age:"Age",health:"Hp",healthRegen:"Hp.regen",attack:"Atk",defence:"Def",training:"training",mining:"mining",crafting:"crafting"};function Ae(e){return Xe[e]||e}function We(e){for(var t=Object(p.a)({},e.currentStats),a=Y(e),n=0,i=Object.entries(e.baseStats);n<i.length;n++){var r=Object(l.a)(i[n],1)[0];t[r]=Math.min(t[r],a[r])}return t}function Fe(e){var t,a,n,r=Object(He.a)(),s=i.a.useContext(M),l=s.stats,c=s.realm,o=s.state,m=i.a.useContext(pe).cultivationRealms,d=i.a.useContext(S.c).gameSpeed,h=Ye().width,p=o.action;return"activity"===o.action&&(p+=" ("+(null===(t=o.activity)||void 0===t?void 0:t.name)+")"),"cultivating"===o.action&&(p+=" ("+(null===(a=o.manual)||void 0===a?void 0:a.manual.name)+")"),"fighting"===o.action&&(p+=" ("+(null===(n=o.enemy)||void 0===n?void 0:n.name)+")"),Object(Ie.jsx)(Ie.Fragment,{children:Object(Ie.jsx)(Le.a,{elevation:8,children:Object(Ie.jsxs)(u.a,{height:r.spacing(8),width:h,display:"flex",alignItems:"center",gap:2,paddingX:2,children:[Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsxs)(Ee.a,{variant:"h5",children:["Age: ",Ge(l.age)]}),Object(Ie.jsxs)(Ee.a,{variant:"h5",children:["Realm: ",m[c.index].name]})]}),Object(Ie.jsxs)(u.a,{marginLeft:"auto",display:"flex",alignItems:"center",gap:1,children:[Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",children:[Object(Ie.jsxs)(Ee.a,{children:["Game Speed: x",d]}),Object(Ie.jsx)(Ee.a,{children:p})]}),Object(Ie.jsx)(Pe.a,{fontSize:"large",onClick:function(){return e.setSettings((function(e){return!e}))}})]})]})})})}function Ge(e){var t=Math.floor(e/b),a=Math.min(Math.floor((e-t*b)/x),12);return"".concat(t," years ").concat(a," months")}var Be=a(222);function Ne(e){return Object(Ie.jsxs)(u.a,{sx:{display:"flex",alignItems:"center"},children:[Object(Ie.jsx)(u.a,{sx:{minWidth:200},children:Object(Ie.jsx)(Ee.a,{variant:"body1",color:"text.primary",children:e.label})}),Object(Ie.jsx)(u.a,{sx:{width:"50%",m:1},children:Object(Ie.jsx)(Be.a,Object(p.a)({variant:"determinate",color:"success"},e))})]})}var De=a(3),Je=a(74),Qe=a(4),Ve=a(203),Ue=a(37),Ke=["className"],_e=Object(Qe.a)((function(e){var t=e.className,a=Object(Je.a)(e,Ke);return Object(Ie.jsx)(Ve.a,Object(p.a)(Object(p.a)({},a),{},{classes:{popper:t}}))}))((function(e){var t=e.theme;return Object(De.a)({},"& .".concat(Ue.a.tooltip),{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"})}));function Ze(e){var t=i.a.useContext(M),a=function(e,t){var a=t.baseStats,n=t.realm,i=t.manuals,r=t.inventory;return{base:a[e],realm:n.power[e]||1,manuals:X(e,i),treasuresMulti:A(e,r.items),treasures:W(e,r.items)}}(e.stat,t),n=Object(S.i)(),r=Object(He.a)();return Object(Ie.jsx)(_e,{title:Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsxs)(Ee.a,{color:"inherit",children:["Character ",e.stat]}),Object(Ie.jsxs)(Ee.a,{children:["Base ",e.stat,": ",n(a.base)]}),Object(Ie.jsxs)(Ee.a,{children:["Realm bonus:",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.realm>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.realm)]})]}),Object(Ie.jsxs)(Ee.a,{children:["Manuals bonus:",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.manuals>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.manuals)]})]}),Object(Ie.jsxs)(Ee.a,{children:["Treasures multi:",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.treasuresMulti>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.treasuresMulti)]})]}),Object(Ie.jsxs)(Ee.a,{children:["Treasures bonus:",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.treasures>=0?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","+",n(a.treasures)]})]})]}),children:e.children})}function $e(e){var t=i.a.useContext(M),a=Object(S.i)(),n=t.stats,r=t.currentStats,s=n.health,l=r.health,c=Object(He.a)();return Object(Ie.jsxs)(u.a,{width:512,paddingTop:c.spacing(1),paddingLeft:c.spacing(1),children:[Object(Ie.jsx)(Ze,{stat:"health",children:Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(Ne,{label:"Health: ".concat(a(l)," / ").concat(a(s)),value:l/s*100})})}),e.displayStats.map((function(e){return Object(Ie.jsx)(Ze,{stat:e.stat,children:Object(Ie.jsxs)(Ee.a,{children:[e.name," ",a(t.stats[e.stat])]})},e.stat)}))]})}var et=[{name:"Spring blossom village",description:"A tiny village in the fields. The villagers are poor, but kind and hardworking",imagePath:"village.png",activities:[{name:"Run Errands",description:"",baseTime:.1,result:{items:[{type:"money",name:"Copper Coin",amount:1}]}},{name:"Use Training Grounds",description:"",baseTime:.1,result:{baseStats:{attack:.07,defence:.07}}},{name:"Help in the fields",description:"",baseTime:10,result:{baseStats:{attack:.2,defence:.2},items:[{type:"money",name:"Copper Coin",amount:5}]}},{name:"Help in the forge",description:"",baseTime:10,result:{baseStats:{attack:.2,defence:.2},items:[{type:"treasure",name:"Rusty Sword",amount:1},{type:"treasure",name:"Rusty Armor",amount:1},{type:"treasure",name:"Rusty Helmet",amount:1},{type:"treasure",name:"Copper Ring",amount:1},{type:"treasure",name:"Copper Pendant",amount:1}]}}]}];function tt(e,t){return Number(e.spacing(t).slice(0,-2))}function at(){var e=Object(He.a)(),t=et[0],a="/locations/"+t.imagePath;return Object(Ie.jsxs)(u.a,{height:e.spacing(16),padding:e.spacing(1),width:512,children:[Object(Ie.jsx)(Ee.a,{variant:"h5",children:"Current Location"}),Object(Ie.jsxs)(u.a,{display:"flex",children:[Object(Ie.jsx)("img",{src:a,alt:"",height:e.spacing(12),width:e.spacing(12)}),Object(Ie.jsxs)(u.a,{width:512-tt(e,12),paddingLeft:e.spacing(1),children:[Object(Ie.jsx)(Ee.a,{variant:"h6",children:t.name}),Object(Ie.jsx)(Ee.a,{variant:"body1",children:t.description})]})]})]})}var nt=a(215);function it(e){var t=e.path,a=e.box,n=e.position;return Object(Ie.jsx)(u.a,{width:a.x,height:a.y,overflow:"hidden",children:Object(Ie.jsx)("img",{src:t,alt:"copper coin",style:{top:-n.y,left:-n.x,position:"relative"}})})}function rt(e){var t=e.size,a=e.path,n=e.position;return Object(Ie.jsx)(it,{path:a,box:{x:t,y:t},position:n})}function st(e){var t=e.treasure,a=e.type,n=Object(He.a)(),r=i.a.useContext(M),s=Object(S.i)(),c=r.inventory,o=r.stats,m=r.currentStats,d=r.skills,h=r.updateContext;if(!t)return Object(Ie.jsx)(u.a,{width:512,border:"1px solid gray",borderRadius:n.spacing(1),children:Object(Ie.jsxs)(u.a,{display:"flex",margin:n.spacing(1),children:[Object(Ie.jsx)(u.a,{width:32,height:32,bgcolor:"lightgray"}),Object(Ie.jsx)(u.a,{marginLeft:n.spacing(1),marginTop:n.spacing(-1),children:Object(Ie.jsxs)(Ee.a,{children:["Nothing (",a,")"]})})]})});var p=t.item,j=p.image,b=p.name,x=p.realmIndex,g=p.stats,f=j.path,O=j.sizeX,v=j.x,y=j.y,k=ee[x],C=[];if(g.stats)for(var w=0,T=Object.entries(g.stats);w<T.length;w++){var R=Object(l.a)(T[w],2),z=R[0],L=R[1];C.push({text:Ae(z),effect:s(L)})}if(g.skills)for(var E=0,q=Object.entries(g.skills);E<q.length;E++){var P=Object(l.a)(q[E],2),X=P[0],A=P[1];C.push({text:Ae(X),effect:s(A)})}if(g.statsMulti)for(var W=0,F=Object.entries(g.statsMulti);W<F.length;W++){var G=Object(l.a)(F[W],2),B=G[0],N=G[1];C.push({text:Ae(B),effect:s(100*N)+"%"})}if(g.skillsMulti)for(var D=0,J=Object.entries(g.skillsMulti);D<J.length;D++){var Q=Object(l.a)(J[D],2),V=Q[0],U=Q[1];C.push({text:Ae(V),effect:s(100*U)+"%"})}return Object(Ie.jsx)(u.a,{width:512,border:"1px solid gray",borderRadius:n.spacing(1),children:Object(Ie.jsxs)(u.a,{margin:n.spacing(1),children:[Object(Ie.jsxs)(u.a,{width:512,display:"flex",children:[Object(Ie.jsx)(rt,{path:f,size:O,position:{x:v,y:y}}),Object(Ie.jsxs)(u.a,{marginLeft:n.spacing(1),marginTop:n.spacing(-1),children:[Object(Ie.jsxs)(Ee.a,{children:[b," (",a,")"]}),Object(Ie.jsx)(Ee.a,{children:k.name})]}),Object(Ie.jsx)(nt.a,{variant:"contained",color:"warning",size:"small",sx:{maxHeight:32,minHeight:32,margin:"auto"},onClick:function(){return function(e){var t=c.items.findIndex((function(t){return t.id===e}));-1!==t&&I(c[t])&&(c[t].isEquipped=!1,o=Y(r),m=We(r),d=H(r),h({inventory:c,stats:o,currentStats:m,skills:d}))}(t.id)},children:"Unequip"})]}),C.map((function(e,t){return Object(Ie.jsxs)(Ee.a,{variant:"body1",marginLeft:"".concat(32+tt(n,1),"px"),children:[e.text," ",e.effect]},t)}))]})})}function lt(){var e,t=i.a.useContext(M).inventory.getEquippedItems(),a=[],n=Object(je.a)(C);try{var r=function(){var n=e.value,i=t.find((function(e){return e.item.type===n}));a.push(Object(Ie.jsx)(st,{treasure:i,type:n},n))};for(n.s();!(e=n.n()).done;)r()}catch(s){n.e(s)}finally{n.f()}return Object(Ie.jsx)(u.a,{children:a})}var ct=a(110),ot=a.n(ct),ut=a(109),mt=a.n(ut),dt=a(111),ht=a.n(dt),pt=a(112),jt=a.n(pt);function bt(e){var t=e.pages,a=e.setPages;return Object(Ie.jsxs)(u.a,{width:512,height:24,children:[Object(Ie.jsx)(nt.a,{onClick:function(){return a((function(e){return{current:1,total:e.total}}))},disabled:1===t.current,sx:{maxWidth:24,minWidth:24},children:Object(Ie.jsx)(mt.a,{})}),Object(Ie.jsx)(nt.a,{onClick:function(){return a((function(e){return{current:e.current-1,total:e.total}}))},disabled:1===t.current,sx:{maxWidth:24,minWidth:24},children:Object(Ie.jsx)(ot.a,{})}),Object(Ie.jsx)(nt.a,{onClick:function(){return a((function(e){return{current:e.current+1,total:e.total}}))},disabled:t.current===t.total,sx:{maxWidth:24,minWidth:24},children:Object(Ie.jsx)(ht.a,{})}),Object(Ie.jsx)(nt.a,{onClick:function(){return a((function(e){return{current:e.total,total:e.total}}))},disabled:t.current===t.total,sx:{maxWidth:24,minWidth:24},children:Object(Ie.jsx)(jt.a,{})})]})}function xt(e){var t=e.type,a=e.setType;return Object(Ie.jsxs)(u.a,{width:128,height:384,children:[Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){return a("all")},color:"all"===t?"success":"primary",fullWidth:!0,children:"all"}),Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){return a("money")},color:"money"===t?"success":"primary",fullWidth:!0,children:"money"}),Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){return a("treasure")},color:"treasure"===t?"success":"primary",fullWidth:!0,children:"treasures"}),Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){return a("mineral")},color:"mineral"===t?"success":"primary",fullWidth:!0,children:"minerals"}),Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){return a("herb")},color:"herb"===t?"success":"primary",fullWidth:!0,children:"Herbs"})]})}function gt(){return Object(Ie.jsx)(u.a,{width:64,height:64,border:"1px solid gray"})}var ft=a(200),Ot=a(120),vt=a(113),yt=a.n(vt),kt=a(114),Ct=a.n(kt);function St(e){var t=e.isLocked,a=e.fontSize;return Object(Ie.jsx)(u.a,{children:t?Object(Ie.jsx)(yt.a,{fontSize:a||"medium"}):Object(Ie.jsx)(Ct.a,{fontSize:a||"medium"})})}function wt(e){var t=e.item,a=e.isLocked,n=ee[t.realmIndex].name,r=i.a.useState(null),s=Object(l.a)(r,2),c=s[0],o=s[1],m=Object(S.i)(),d=i.a.useContext(M),h=d.inventory,p=d.stats,j=d.skills,b=d.currentStats,x=d.updateContext,g=Boolean(c),f=g?"simple-popper":void 0;if(!t)return Object(Ie.jsx)(gt,{});var O=[],v=t.stats;if(v.stats)for(var y=0,k=Object.entries(v.stats);y<k.length;y++){var C=Object(l.a)(k[y],2),w=C[0],T=C[1];O.push({text:Ae(w),effect:m(T)})}if(v.skills)for(var R=0,z=Object.entries(v.skills);R<z.length;R++){var L=Object(l.a)(z[R],2),E=L[0],q=L[1];O.push({text:Ae(E),effect:m(q)})}if(v.statsMulti)for(var P=0,X=Object.entries(v.statsMulti);P<X.length;P++){var A=Object(l.a)(X[P],2),W=A[0],F=A[1];O.push({text:Ae(W),effect:m(100*F)+"%"})}if(v.skillsMulti)for(var G=0,B=Object.entries(v.skillsMulti);G<B.length;G++){var N=Object(l.a)(B[G],2),D=N[0],J=N[1];O.push({text:Ae(D),effect:m(100*J)+"%"})}var Q=n.substring(0,6)+" "+n.charAt(n.length-1);return Object(Ie.jsx)(ft.a,{onClickAway:function(){o(null)},children:Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsxs)(u.a,{width:64,height:64,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},onClick:function(e){o(c?null:e.currentTarget)},children:[Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(rt,{path:t.image.path,size:t.image.sizeX,position:{x:t.image.x,y:t.image.y}})}),Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(Ee.a,{variant:"body2",children:Q})})]}),Object(Ie.jsx)(Ot.a,{id:f,open:g,anchorEl:c,children:Object(Ie.jsxs)(u.a,{sx:{border:1,p:1,bgcolor:"background.paper"},children:[Object(Ie.jsxs)(u.a,{display:"flex",justifyContent:"space-between",children:[Object(Ie.jsx)(Ee.a,{children:t.name}),Object(Ie.jsx)(u.a,{onClick:function(){return function(e){var t=h.items.findIndex((function(t){return t.id===e}));-1!==t&&(h[t].isLocked=!h[t].isLocked,x({inventory:h}))}(e.id)},children:Object(Ie.jsx)(St,{isLocked:a||!1})})]}),Object(Ie.jsxs)(Ee.a,{children:["Quality: ",m(t.quality)]}),O.map((function(e,t){return Object(Ie.jsxs)(Ee.a,{variant:"body1",children:[e.text," ",e.effect]},t)})),Object(Ie.jsx)(nt.a,{variant:"contained",color:"primary",onClick:function(){return function(e,t){var a=h.items.findIndex((function(t){return t.id===e}));if(-1!==a){var n=h.items.findIndex((function(e){return I(e)&&e.isEquipped&&e.item.type===t}));-1!==n&&(h[n].isEquipped=!1),h[a].isEquipped=!0,p=Y(d),b=We(d),j=H(d),x({inventory:h,stats:p,currentStats:b,skills:j}),o(null)}}(e.id,e.item.type)},children:"Equip"}),Object(Ie.jsx)(nt.a,{variant:"contained",color:"warning",onClick:function(){return function(e){var t=h.items.findIndex((function(t){return t.id===e}));-1===t||h[t].isLocked||(h.items.splice(t,1),x({inventory:h}),o(null))}(e.id)},children:"Drop"})]})})]})})}function Mt(e,t){var a;return"treasure"===t&&(a=Oe.find((function(t){return t.name===e}))),"money"===t&&(a=Se.find((function(t){return t.name===e}))),"mineral"===t&&(a=Ce.find((function(t){return t.name===e}))),"herb"===t&&(a=ke.find((function(t){return t.name===e}))),a}function Tt(e){var t=e.name,a=e.amount,n=e.type,i=Object(S.i)(),r=Mt(t,n);return r?Object(Ie.jsx)(Rt,{name:t,description:r.description,children:Object(Ie.jsxs)(u.a,{width:64,height:64,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},children:[Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(rt,{path:r.image.path,size:r.image.sizeX,position:{x:r.image.x,y:r.image.y}})}),Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(Ee.a,{variant:"body2",children:i(a)})})]})}):Object(Ie.jsx)(gt,{})}function Rt(e){var t=e.name,a=e.description;return Object(Ie.jsx)(_e,{title:Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)(Ee.a,{color:"inherit",children:t}),Object(Ie.jsx)(Ee.a,{variant:"body2",children:a})]}),children:e.children})}function It(e){var t=e.item;return t?"money"===t.type||"mineral"===t.type||"herb"===t.type?Object(Ie.jsx)(Tt,Object(p.a)({},t)):"treasure"===t.type?Object(Ie.jsx)(wt,Object(p.a)({},t)):Object(Ie.jsx)(gt,{}):Object(Ie.jsx)(gt,{})}function zt(e){var t=e.inventory,a=0===t.length?36:36*Math.ceil(t.length/36),n=Array(a).fill(0).map((function(e,t){return t})).map((function(e){return{item:t[e]||void 0,index:e}}));return Object(Ie.jsx)(u.a,{width:384,height:384,display:"flex",flexWrap:"wrap",children:n.map((function(e){return Object(Ie.jsx)(It,{item:e.item},e.index)}))})}var Ht=a(224),Lt=a(213),Et=a(205),qt=a(210),Pt=a(214),Yt=a(225),Xt=a(226),At=a(211),Wt=[{label:"Mortal",index:8},{label:"Body Ref.",index:17},{label:"Qi Gath.",index:26}],Ft=R.map((function(e){return e}));function Gt(){var e=i.a.useContext(M),t=e.inventory,a=e.updateContext,n=i.a.useState(Ft[0]),r=Object(l.a)(n,2),s=r[0],c=r[1],o=i.a.useState(Wt[0]),m=Object(l.a)(o,2),d=m[0],h=m[1],p=i.a.useState(1),j=Object(l.a)(p,2),b=j[0],x=j[1],g=i.a.useState(!1),f=Object(l.a)(g,2),O=f[0],v=f[1];return i.a.useEffect((function(){var e=setInterval((function(){O&&(t.items=t.items.filter((function(e){if(T.includes(e.type))return!0;var t=e;if(t.isEquipped||t.isLocked)return!0;var a=t.type,n=t.item.realmIndex,i=t.item.quality;return"all"!==s&&a!==s||!(("all"===s||a===s)&&n<=d.index&&i<=b)})),a({inventory:JSON.parse(JSON.stringify(t))}))}),1e3);return function(){clearInterval(e)}}),[s,d,b,O]),Object(Ie.jsxs)(u.a,{marginTop:2,display:"flex",gap:2,alignItems:"center",flexWrap:"wrap",children:[Object(Ie.jsx)(u.a,{children:Object(Ie.jsxs)(Ht.a,{children:[Object(Ie.jsx)(Lt.a,{id:"type-label",children:"Type"}),Object(Ie.jsx)(Et.a,{labelId:"type-label",value:s,label:"Type",onChange:function(e){c(e.target.value)},children:Ft.map((function(e){return Object(Ie.jsx)(qt.a,{value:e,children:e},e)}))})]})}),Object(Ie.jsx)(u.a,{children:Object(Ie.jsxs)(Ht.a,{children:[Object(Ie.jsx)(Lt.a,{id:"realm-label",children:"Realm"}),Object(Ie.jsx)(Et.a,{labelId:"realm-label",value:d.index.toString(),label:"Realm",onChange:function(e){var t=parseInt(e.target.value),a=Wt.find((function(e){return e.index===t}));a&&h(a)},children:Wt.map((function(e){return Object(Ie.jsx)(qt.a,{value:e.index,children:e.label},e.index)}))})]})}),Object(Ie.jsx)(u.a,{maxWidth:120,children:Object(Ie.jsx)(Pt.a,{id:"quality",label:"Quality",variant:"outlined",onChange:function(e){var t=parseInt(e.target.value);isNaN(t)||x(t)},value:b})}),Object(Ie.jsx)(Yt.a,{children:Object(Ie.jsx)(Xt.a,{control:Object(Ie.jsx)(At.a,{checked:O,onClick:function(){return v(!O)}}),label:"Autosell"})})]})}function Bt(){var e=i.a.useContext(M).inventory,t=i.a.useState("all"),a=Object(l.a)(t,2),n=a[0],r=a[1],s=e.items.filter((function(e){return!I(e)||!e.isEquipped}));"all"!==n&&(s=s.filter((function(e){return e.type===n})));var c=i.a.useState({current:1,total:Math.ceil(s.length/36)}),o=Object(l.a)(c,2),m=o[0],d=o[1];i.a.useEffect((function(){d((function(e){var t=Math.max(Math.ceil(s.length/36),1);return{current:Math.min(e.current,t),total:t}}))}),[s.length]);var h=s.slice(36*(m.current-1),Math.min(36*m.current,s.length));return Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsxs)(u.a,{display:"flex",children:[Object(Ie.jsx)(zt,{inventory:h}),Object(Ie.jsx)(xt,{type:n,setType:r})]}),Object(Ie.jsx)(bt,{pages:m,setPages:d}),Object(Ie.jsx)(Gt,{})]})}function Nt(){for(var e=i.a.useContext(M).baseStats,t=Object(S.i)(),a=Object(He.a)(),n=[],r=0,s=Object.entries(e);r<s.length;r++){var c=Object(l.a)(s[r],2),o=c[0],m=c[1];n.push(Object(Ie.jsxs)(Ee.a,{children:[Ae(o),": ",t(m)]},o))}return Object(Ie.jsxs)(u.a,{paddingTop:a.spacing(1),paddingLeft:a.spacing(1),children:[Object(Ie.jsx)(Ee.a,{children:"Base stats"}),n]})}function Dt(e){var t=i.a.useContext(M),a=function(e,t){var a=t.baseSkills,n=t.manuals,i=t.inventory;return{base:a[e],manuals:L(e,n),treasuresMulti:E(e,i.items),treasures:q(e,i.items)}}(e.skill,t),n=Object(S.i)(),r=Object(He.a)();return Object(Ie.jsx)(_e,{title:Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsxs)(Ee.a,{color:"inherit",children:["Character ",e.skill]}),Object(Ie.jsxs)(Ee.a,{children:["Base ",e.skill,": ",n(a.base)]}),Object(Ie.jsxs)(Ee.a,{children:["Manuals multi:",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.manuals>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.manuals)]})]}),Object(Ie.jsxs)(Ee.a,{children:["Treasures Multi:",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.treasuresMulti>=1?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","x",n(a.treasuresMulti)]})]}),Object(Ie.jsxs)(Ee.a,{children:["Treasures bonus:",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.treasures>=0?r.palette.success.main:r.palette.error.main,display:"inline",children:[" ","+",n(a.treasures)]})]})]}),children:e.children})}function Jt(){for(var e=i.a.useContext(M).skills,t=Object(S.i)(),a=Object(He.a)(),n=[],r=0,s=Object.entries(e);r<s.length;r++){var c=Object(l.a)(s[r],2),o=c[0],m=c[1];n.push(Object(Ie.jsx)(Dt,{skill:o,children:Object(Ie.jsxs)(Ee.a,{children:[Ae(o),": ",t(m)]},o)},o))}return Object(Ie.jsx)(u.a,{paddingTop:a.spacing(1),paddingLeft:a.spacing(1),children:n})}function Qt(){var e=i.a.useState("inventory"),t=Object(l.a)(e,2),a=t[0],n=t[1],r=Object(He.a)();return Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsxs)(u.a,{width:512,height:32,paddingBottom:r.spacing(5),children:[Object(Ie.jsx)(nt.a,{variant:"outlined",size:"small",onClick:function(){return n("inventory")},color:"inventory"===a?"success":"primary",children:"Inventory"}),Object(Ie.jsx)(nt.a,{variant:"outlined",size:"small",onClick:function(){return n("equipment")},color:"equipment"===a?"success":"primary",children:"Equipment"}),Object(Ie.jsx)(nt.a,{variant:"outlined",size:"small",onClick:function(){return n("stats")},color:"stats"===a?"success":"primary",children:"Stats"}),Object(Ie.jsx)(nt.a,{variant:"outlined",size:"small",onClick:function(){return n("skills")},color:"skills"===a?"success":"primary",children:"Skills"})]}),Object(Ie.jsxs)(u.a,{width:512,height:512,overflow:"auto",children:["inventory"===a?Object(Ie.jsx)(Bt,{}):"","equipment"===a?Object(Ie.jsx)(lt,{}):"","stats"===a?Object(Ie.jsx)(Nt,{}):"","skills"===a?Object(Ie.jsx)(Jt,{}):""]})]})}function Vt(){return Object(Ie.jsxs)(u.a,{borderRight:"1px solid gray",children:[Object(Ie.jsx)($e,{displayStats:[{name:"Health Regen",stat:"healthRegen"},{name:"Attack",stat:"attack"},{name:"Defence",stat:"defence"},{name:"Insight",stat:"insight"}]}),Object(Ie.jsx)(Qt,{}),Object(Ie.jsx)(at,{})]})}Ft.unshift("all");var Ut=["label","rightLabel"];function Kt(e){var t=e.label,a=e.rightLabel,n=Object(Je.a)(e,Ut),i=a;return Object(Ie.jsxs)(u.a,{sx:{display:"flex",alignItems:"center"},children:[!i&&Object(Ie.jsx)(Ee.a,{variant:"body1",color:"text.primary",children:t}),Object(Ie.jsx)(u.a,{sx:{width:"60%",m:1},children:Object(Ie.jsx)(Be.a,Object(p.a)({variant:"determinate",color:"primary"},n))}),i&&Object(Ie.jsx)(Ee.a,{variant:"body1",color:"text.primary",children:t})]})}function _t(e){var t=Math.floor(e/b),a=Math.min((e-t*b)/x,12);return 0!==t?"".concat(t," y ").concat(a.toPrecision(2)," m"):"".concat(a.toPrecision(2)," m")}function Zt(e){for(var t=i.a.useContext(M),a=e.stats,n=e.activity,r=e.multiplicatorFunctionName,s=e.requiredTime,c=Object(S.i)(),o=[],m=0,d=Object.entries(a);m<d.length;m++){var h=Object(l.a)(d[m],2),p=h[0],j=h[1];o.push({text:Ae(p),effect:j*(r?we[r](n,t):1)})}return Object(Ie.jsxs)(u.a,{display:"flex",gap:1,children:[o.map((function(e){return Object(Ie.jsxs)(Ee.a,{variant:"body1",display:"inline",children:[e.text," ",s?c(s>1e3?e.effect:e.effect/s*1e3):""]},e.text)})),s&&s<1e3?"/s":""]})}function $t(e){var t,a=e.items,n=[],i=0,r=Object(je.a)(a);try{for(r.s();!(t=r.n()).done;){var s=t.value;i++;var l=Mt(s.name,s.type);if(l){var c=l.image,o=c.path,m=c.sizeX,d=c.x,h=c.y;n.push(Object(Ie.jsx)(u.a,{display:"flex",children:Object(Ie.jsx)(rt,{path:o,size:m,position:{x:d,y:h}})},i))}}}catch(p){r.e(p)}finally{r.f()}return Object(Ie.jsx)(u.a,{children:n.map((function(e){return e}))})}function ea(e){var t=e.activity,a=e.isActive,n=e.source,r=i.a.useContext(M),s=Object(S.i)(),l=r.updateContext,c=t.result,o=t.price,m=Object(He.a)(),d=[];if(c.items){var h,p=Object(je.a)(c.items);try{for(p.s();!(h=p.n()).done;){var b=h.value;d.push({name:b.name,amount:b.amount})}}catch(v){p.e(v)}finally{p.f()}}var x=t.time?we[t.time](t,r):t.baseTime,g=t.currentTime||0,f=x/j<5,O=x<1e3?(1e3/x).toFixed(2)+"/s":_t(x);return Object(Ie.jsx)(Le.a,{elevation:8,sx:{paddingX:m.spacing(2),paddingY:m.spacing(1),margin:m.spacing(2),borderRadius:m.spacing(2),minHeight:60,border:"1px solid lightgray",borderColor:a?m.palette.primary.main:"lightgray",padding:m.spacing(1)},children:Object(Ie.jsx)(u.a,{display:"flex",children:Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:o?400:600,minHeight:60,height:"100%",onClick:function(){l(a?{state:{action:"idle",activity:void 0}}:{state:{action:"activity",activity:{name:t.name,source:n}}})},children:[Object(Ie.jsxs)(u.a,{display:"flex",children:[Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",children:[Object(Ie.jsx)(Ee.a,{children:t.name}),c.baseStats&&Object(Ie.jsx)(Zt,{stats:c.baseStats,activity:t,requiredTime:x,multiplicatorFunctionName:c.baseStatsMulti}),d.length>0&&Object(Ie.jsx)(u.a,{display:"flex",gap:m.spacing(1),children:d.map((function(e,t){return Object(Ie.jsxs)(Ee.a,{variant:"body1",display:"inline",children:[e.name," ",s(e.amount)]},t)}))}),c.skills&&Object(Ie.jsx)(Zt,{stats:c.skills,activity:t,requiredTime:x,multiplicatorFunctionName:c.skillsMulti})]}),Object(Ie.jsx)(u.a,{marginLeft:"auto",display:"flex",marginRight:2,children:c.items&&Object(Ie.jsx)($t,{items:c.items})})]}),Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(Kt,{value:f&&a?100:g/x*100,label:O,rightLabel:!0})})]})})})}function ta(e){var t=e.source,a=e.Card,n=i.a.useContext(pe),r=i.a.useContext(M).state,s=r.action,l=r.activity,c="";return"activity"===s&&l&&(c=l.name),Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(u.a,{display:"flex",flexWrap:"wrap",children:n[t].map((function(e){return Object(Ie.jsx)(a,{activity:e,isActive:c===e.name,showTimesCompleted:!0,source:t},e.name)}))})})}var aa=a(55),na=a.n(aa);function ia(e){var t,a=e.items,n=Object(S.i)(),i=[],r=0,s=Object(je.a)(a);try{for(s.s();!(t=s.n()).done;){var l=t.value;r++;var c=Mt(l.name,l.type);if(c){var o=c.image,m=o.path,d=o.sizeX,h=o.x,p=o.y;i.push(Object(Ie.jsxs)(u.a,{display:"flex",alignItems:"center",gap:1,children:[Object(Ie.jsx)(rt,{path:m,size:d,position:{x:h,y:p}}),Object(Ie.jsxs)(Ee.a,{display:"inline",children:[l.name," ",n(l.amount)]})]},r))}}}catch(j){s.e(j)}finally{s.f()}return Object(Ie.jsx)(u.a,{children:i.map((function(e){return e}))})}function ra(e){var t=e.item,a=e.context,n=t,i=n.time?we[n.time](n):n.baseTime,r=i<1e3?(1e3/i).toFixed(2)+"/s":_t(i),s=n.result,l=n.price;return Object(Ie.jsxs)(u.a,{sx:{border:1,p:1,bgcolor:"background.paper"},children:[Object(Ie.jsx)(Ee.a,{variant:"h6",children:t.name}),Object(Ie.jsxs)(Ee.a,{children:["Craft time: ",r]}),Object(Ie.jsx)(Ee.a,{children:t.description}),Object(Ie.jsxs)(u.a,{display:"flex",justifyContent:"space-between",marginY:2,alignItems:"center",children:[l&&l.items&&Object(Ie.jsx)(ia,{items:l.items}),Object(Ie.jsx)(na.a,{fontSize:"large"}),Object(Ie.jsx)(u.a,{display:"flex",marginRight:2,children:s.items&&Object(Ie.jsx)(ia,{items:s.items})})]}),s.baseStats&&Object(Ie.jsx)(Zt,{stats:s.baseStats,activity:n,requiredTime:i,multiplicatorFunctionName:n.result.baseStatsMulti}),s.skills&&Object(Ie.jsx)(Zt,{stats:s.skills,activity:n,requiredTime:i,multiplicatorFunctionName:n.result.skillsMulti}),Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){return a.setActiveItem(n.name)},children:"Select"})]})}function sa(e){var t=e.width,a=e.height,n=e.item,r=e.Cell,s=e.Tooltip,c=i.a.useState(null),o=Object(l.a)(c,2),m=o[0],d=o[1],h=Boolean(m),p=h?"simple-popper":void 0;return Object(Ie.jsx)(ft.a,{onClickAway:function(){d(null)},children:Object(Ie.jsxs)(u.a,{width:t,height:a,onClick:function(e){d(m?null:e.currentTarget)},children:[Object(Ie.jsx)(r,{width:t,height:a,item:n,context:e.context}),Object(Ie.jsx)(Ot.a,{id:p,open:h,anchorEl:m,children:s&&Object(Ie.jsx)(s,{item:n,context:e.context})})]})})}function la(e){var t=e.width,a=e.height;return Object(Ie.jsx)(u.a,{width:t,height:a,border:"1px solid gray"})}function ca(e){var t=e.cellWidth,a=e.cellHeight,n=e.sizeX,i=e.sizeY,r=e.items,s=e.itemTypes,l=e.Cell,c=e.Tooltip,o=Array(n*i).fill(0).map((function(e,t){return t})).map((function(e){var t=r[e];if(!t)return{index:e,Cell:la};if(l)return{index:e,Cell:l,Tooltip:c};if(!s)return{index:e,Cell:la};var a=s.find((function(e){return e.type===t.type}));return a?{index:e,Cell:a.Cell,Tooltip:a.Tooltip}:{index:e,Cell:la}}));return Object(Ie.jsx)(u.a,{width:n*t,height:i*a,display:"flex",flexWrap:"wrap",children:o.map((function(n){return Object(Ie.jsx)(sa,{width:t,height:a,item:r[n.index],Cell:n.Cell,Tooltip:n.Tooltip,context:e.context},n.index)}))})}function oa(e){var t=e.width,a=e.height,n=e.item,i=Mt(n.name,n.type).image;return Object(Ie.jsxs)(u.a,{width:t,height:a,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},children:[Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(rt,{path:i.path,size:i.sizeX,position:{x:i.x,y:i.y}})}),Object(Ie.jsx)(u.a,{maxWidth:t,overflow:"auto",whiteSpace:"nowrap",children:Object(Ie.jsx)(Ee.a,{children:n.name})})]})}a(206),a(212);var ua=a(228),ma=a(229),da=a(230),ha=a(231),pa=a(232);function ja(e){var t=i.a.useContext(M).skills,a=e.activity,n=a.result.items;if(!n)return Object(Ie.jsx)(Ie.Fragment,{});var r,s=Object(S.i)(),l=[],c=0,o=Object(je.a)(n);try{for(o.s();!(r=o.n()).done;){var m=r.value;c++;var d=Mt(m.name,m.type);if(d){var h,p=d.image,j=p.path,b=p.sizeX,x=p.x,g=p.y,f=void 0,O=void 0;if(R.includes(m.type))O=fe(f=xe(d.realmIndex,t.crafting,(null===(h=a.price)||void 0===h?void 0:h.priceMulti)||1),d.realmIndex);l.push(Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",children:[Object(Ie.jsxs)(u.a,{display:"flex",alignItems:"center",gap:1,children:[Object(Ie.jsx)(rt,{path:j,size:b,position:{x:x,y:g}}),Object(Ie.jsxs)(Ee.a,{display:"inline",children:[m.name," ",s(m.amount)]})]}),R.includes(m.type)?Object(Ie.jsxs)(Ee.a,{children:["quality: ",s(f)," power: ",s(O)]}):""]},c))}}}catch(v){o.e(v)}finally{o.f()}return Object(Ie.jsx)(u.a,{children:l.map((function(e){return e}))})}function ba(e){var t,a=e.activity,n=i.a.useContext(M),r=i.a.useContext(pe),s=r.crafting,l=r.updateContext,c=Object(He.a)(),o=a.price,m=a.result,d="activity"===n.state.action&&(null===(t=n.state.activity)||void 0===t?void 0:t.name)===a.name,h=a.time?we[a.time](a,n):a.baseTime,p=a.currentTime||0,b=h/j<5,x=h<1e3?(1e3/h).toFixed(2)+"/s":_t(h);return Object(Ie.jsx)(Le.a,{elevation:8,sx:{paddingX:c.spacing(2),paddingY:c.spacing(1),borderRadius:c.spacing(2),minHeight:60,border:"1px solid lightgray",borderColor:d?c.palette.primary.main:"lightgray",padding:c.spacing(1),maxWidth:"600px"},children:Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:o?400:600,minHeight:60,height:"100%",children:[" ",Object(Ie.jsxs)(u.a,{display:"flex",justifyContent:"space-between",marginY:2,alignItems:"center",children:[o&&o.items&&Object(Ie.jsx)(ia,{items:o.items}),Object(Ie.jsx)(na.a,{fontSize:"large"}),Object(Ie.jsx)(u.a,{display:"flex",marginRight:2,children:m.items&&Object(Ie.jsx)(ja,{activity:a})})]}),m.baseStats&&Object(Ie.jsx)(Zt,{stats:m.baseStats,activity:a,requiredTime:h,multiplicatorFunctionName:a.result.baseStatsMulti}),m.skills&&Object(Ie.jsx)(Zt,{stats:m.skills,activity:a,requiredTime:h,multiplicatorFunctionName:a.result.skillsMulti}),Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(Kt,{value:b&&d?100:p/h*100,label:x,rightLabel:!0})}),Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){if(d){n.updateContext({state:{action:"idle",activity:void 0}});var e=s.findIndex((function(e){return e.name===a.name}));-1!==e&&(s[e].currentTime=0,l({crafting:s.slice()}))}else n.updateContext({state:{action:"activity",activity:{name:a.name,source:"crafting"}}})},children:d?"stop":"craft"})]})})}var xa=a(223);function ga(e){var t,a=e.activity,n=i.a.useContext(pe),r=n.crafting,s=n.updateContext,l=(null===(t=a.price)||void 0===t?void 0:t.priceMulti)||1;return Object(Ie.jsx)(Le.a,{elevation:8,sx:{borderRadius:2,minHeight:60,border:"1px solid lightgray",borderColor:"lightgray",padding:1,minWidth:60},children:Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",minHeight:60,height:"100%",children:[Object(Ie.jsx)(Ee.a,{children:"Price Multi"}),Object(Ie.jsx)(xa.a,{defaultValue:l,onChange:function(e){try{var t=parseInt(e.target.value);if(isNaN(t))throw new Error("Price multiplier is not a number");var n=r.findIndex((function(e){return e.name===a.name}));if(-1===n)return;r[n].price&&(r[n].price.priceMulti=t),s({crafting:r.slice()})}catch(i){console.log(i)}}})]})})}function fa(e){var t=e.width,a=e.height,n=e.item.result.items[0],i=n.name,r=n.type;return Object(Ie.jsx)(oa,{width:t,height:a,item:{name:i,type:r}})}function Oa(){var e=i.a.useContext(pe).crafting,t=i.a.useState(),a=Object(l.a)(t,2),n=a[0],r=a[1];return Object(Ie.jsxs)(u.a,{marginLeft:2,marginTop:2,children:[n&&Object(Ie.jsxs)(u.a,{display:"flex",gap:2,marginBottom:2,children:[Object(Ie.jsx)(ga,{activity:e.find((function(e){return e.name===n}))}),Object(Ie.jsx)(ba,{activity:e.find((function(e){return e.name===n}))})]}),Object(Ie.jsx)(ca,{cellWidth:160,cellHeight:64,sizeX:5,sizeY:5,items:e,Cell:fa,Tooltip:ra,context:{setActiveItem:r}})]})}var va=a(233);var ya=Object(S.k)((function(e){var t=e.item,a=t.name,n=t.health,r=t.attack,s=t.defence,l=t.healthRegen,c=Object(S.i)(),o=i.a.useContext(M),u=o.state,m=o.updateContext,d=!("fighting"!==u.action||!u.enemy)&&u.enemy.name===a,h=d&&u.enemy?"".concat(c(u.enemy.health),"/").concat(c(u.enemy.currentHealth)):c(n);return Object(Ie.jsxs)(ha.a,{children:[Object(Ie.jsx)(va.a,{onClick:e.toggleTooltip,onMouseOver:e.showTooltip,onMouseOut:e.hideTooltip,children:a}),Object(Ie.jsx)(va.a,{onClick:e.toggleTooltip,children:h}),Object(Ie.jsx)(va.a,{onClick:e.toggleTooltip,children:c(r)}),Object(Ie.jsx)(va.a,{onClick:e.toggleTooltip,children:c(s)}),Object(Ie.jsx)(va.a,{onClick:e.toggleTooltip,children:c(l)}),Object(Ie.jsx)(va.a,{children:Object(Ie.jsx)(nt.a,{variant:"contained",onClick:function(){if(d)m({state:{action:"idle",enemy:void 0}});else{var e=JSON.parse(JSON.stringify(t));e.currentHealth=e.health,m({state:{action:"fighting",enemy:e}})}},color:d?"warning":"primary",children:d?"Flee":"Fight"})})]})}),(function(e){for(var t=e.item,a=t.health,n=t.healthRegen,i=t.defence,r=t.attack,s=Object(S.i)(),c=[],o=0,m=Object.entries({health:a,attack:r,healthRegen:n,defence:i});o<m.length;o++){var d=Object(l.a)(m[o],2),h=d[0],p=d[1];c.push(Object(Ie.jsxs)(Ee.a,{children:[Ae(h),": ",s(p)]},h))}return Object(Ie.jsxs)(u.a,{bgcolor:"background.paper",border:1,padding:2,children:[Object(Ie.jsx)(Ee.a,{variant:"h6",children:t.name}),Object(Ie.jsx)(Ee.a,{marginY:1,children:t.description}),c,t.result.items&&Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)(Ee.a,{variant:"h6",marginTop:2,children:"Reward"}),Object(Ie.jsx)(ia,{items:t.result.items})]})]})}));function ka(){var e=i.a.useContext(pe).enemies;return Object(Ie.jsx)(u.a,{marginTop:2,marginLeft:2,children:Object(Ie.jsx)(ua.a,{sx:{width:600,height:600,overflow:"auto"},children:Object(Ie.jsxs)(ma.a,{children:[Object(Ie.jsx)(da.a,{children:Object(Ie.jsxs)(ha.a,{children:[Object(Ie.jsx)(va.a,{children:"name"}),Object(Ie.jsx)(va.a,{children:"health"}),Object(Ie.jsx)(va.a,{children:"attack"}),Object(Ie.jsx)(va.a,{children:"defence"}),Object(Ie.jsx)(va.a,{children:"healthRegen"})]})}),Object(Ie.jsx)(pa.a,{children:e.map((function(e){return Object(Ie.jsx)(ya,{item:e},e.name)}))})]})})})}function Ca(){var e=i.a.useContext(M).state,t=Object(He.a)();if("cultivating"!==e.action||!e.manual)return Object(Ie.jsx)(u.a,{width:"60%",border:"1px solid gray",height:t.spacing(10),borderRadius:t.spacing(1),children:Object(Ie.jsx)(Ee.a,{variant:"h5",marginTop:t.spacing(2),marginLeft:t.spacing(2),children:"No manual selected"})});var a=e.manual,n=a.manual,r=a.learningProgress,s=(n.rarity,n.realm,n.maxLevel),c=r.exp,o=r.level,m=v(o),d=O(o+1),h=[];if(n.stats)for(var p=0,j=Object.entries(n.stats);p<j.length;p++){var b=Object(l.a)(j[p],2),x=b[0],g=b[1];h.push({text:Ae(x),effect:g*r.level})}var f=[];if(n.skills)for(var y=0,k=Object.entries(n.skills);y<k.length;y++){var C=Object(l.a)(k[y],2),S=C[0],w=C[1];f.push({text:Ae(S),effect:w*r.level})}return Object(Ie.jsxs)(u.a,{width:"60%",border:"1px solid gray",borderRadius:t.spacing(1),children:[Object(Ie.jsxs)(u.a,{display:"flex",marginTop:t.spacing(2),marginLeft:t.spacing(2),alignItems:"center",children:[Object(Ie.jsx)(u.a,{width:100,minHeight:60,marginY:t.spacing(1),display:"flex",justifyContent:"center",children:Object(Ie.jsx)("img",{src:n.image.path||"/manuals/placeholder.png",width:"60px",height:"auto",alt:""})}),Object(Ie.jsx)(Ee.a,{variant:"h5",children:n.name}),Object(Ie.jsxs)(Ee.a,{marginLeft:t.spacing(2),children:["Level: ",o," / ",s]}),Object(Ie.jsx)(u.a,{width:400,marginLeft:t.spacing(4),children:Object(Ie.jsx)(Sa,{value:(c-m)/d*100,label:o!==s?"Exp: ".concat((c-m).toFixed(2),"/").concat(d):""})})]}),Object(Ie.jsxs)(u.a,{marginLeft:t.spacing(2),marginBottom:t.spacing(2),display:"flex",children:[Object(Ie.jsxs)(Ee.a,{children:[n.realm," (",n.rarity,")"]}),h.map((function(e){return Object(Ie.jsxs)(Ee.a,{marginLeft:t.spacing(2),children:[e.text,": +",(100*e.effect).toFixed(2),"%"]},e.text)})),f.map((function(e){return Object(Ie.jsxs)(Ee.a,{marginLeft:t.spacing(2),children:[e.text,": +",(100*e.effect).toFixed(2),"%"]},e.text)}))]})]})}function Sa(e){return Object(Ie.jsxs)(u.a,{sx:{display:"flex",alignItems:"center"},children:[Object(Ie.jsx)(Ee.a,{variant:"body1",color:"text.primary",children:e.label}),Object(Ie.jsx)(u.a,{sx:{width:"60%",m:1},children:Object(Ie.jsx)(Be.a,Object(p.a)({variant:"determinate",color:"primary"},e))})]})}function wa(e){var t=e.manual,a=e.learningProgress,n=i.a.useContext(M),r=n.manuals,s=n.state,c=n.updateContext,o=n.stats,m=i.a.useState(null),d=Object(l.a)(m,2),h=d[0],p=d[1],j=Object(He.a)(),b=Boolean(h),x=b?"simple-popper":void 0;return Object(Ie.jsx)(ft.a,{onClickAway:function(){p(null)},children:Object(Ie.jsxs)(u.a,{border:"1px solid gray",width:120,height:200,borderRadius:j.spacing(1),onClick:function(e){p(h?null:e.currentTarget)},children:[Object(Ie.jsx)(u.a,{width:100,minHeight:60,marginY:j.spacing(1),display:"flex",justifyContent:"center",children:Object(Ie.jsx)("img",{src:t.image.path||"/manuals/placeholder.png",width:"60px",height:"auto",alt:""})}),Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsx)(Ee.a,{variant:"body2",marginLeft:j.spacing(1),children:t.name}),Object(Ie.jsxs)(Ee.a,{variant:"body2",marginLeft:j.spacing(1),children:[a.level,"/",t.maxLevel]}),Object(Ie.jsx)(Ee.a,{variant:"body2",marginLeft:j.spacing(1),children:t.realm})]}),Object(Ie.jsx)(Ot.a,{id:x,open:b,anchorEl:h,children:Object(Ie.jsxs)(u.a,{sx:{border:1,p:1,bgcolor:"background.paper"},children:[Object(Ie.jsx)(nt.a,{onClick:function(){if(r){var e=r.findIndex((function(e){return e.manual.name===t.name}));-1!==e&&c({state:{action:"cultivating",manual:r[e]}})}},color:"success",children:"Study"}),Object(Ie.jsx)(nt.a,{onClick:function(){if(r){var e=r.findIndex((function(e){return e.manual.name===t.name}));-1!==e&&(r[e].isEquipped=!r[e].isEquipped,s.manual&&s.manual.manual.name===t.name&&(s={action:"idle"}),o=Y(n),c({manuals:r,state:s,stats:o}))}},color:"warning",children:"Unequip"})]})})]})})}function Ma(){var e=Object(He.a)();return Object(Ie.jsx)(u.a,{border:"1px solid gray",width:120,height:200,borderRadius:e.spacing(1)})}function Ta(){var e=i.a.useContext(M).manuals,t=Ye().width,a=Object(He.a)(),r=null===e||void 0===e?void 0:e.filter((function(e){return e.isEquipped})),s=Array(10).fill(0).map((function(e,t){return t}));return Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)(Ee.a,{variant:"h5",marginTop:a.spacing(2),marginBottom:a.spacing(2),children:"Equipped Manuals"}),Object(Ie.jsx)(u.a,{display:"flex",flexWrap:"wrap",maxWidth:t-512,children:s.map((function(e){return r&&r[e]?Object(n.createElement)(wa,Object(p.a)(Object(p.a)({},r[e]),{},{key:e})):Object(Ie.jsx)(Ma,{},e)}))})]})}function Ra(){var e=i.a.useContext(M),t=e.manuals,a=e.updateContext,n=e.stats,r=Object(He.a)();if(!t)return Object(Ie.jsx)(u.a,{});var s=t.filter((function(e){return!e.isEquipped}));s.sort((function(e,t){var a=ee.findIndex((function(t){return t.name===e.manual.realm}));return ee.findIndex((function(e){return e.name===t.manual.realm}))-a}));var c=t.filter((function(e){return e.isEquipped})).length<10;return Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsx)(Ee.a,{variant:"h5",marginY:r.spacing(2),children:"Known manuals"}),s.map((function(i){var s=i.manual,o=i.learningProgress,m=[];if(s.stats)for(var d=0,h=Object.entries(s.stats);d<h.length;d++){var p=Object(l.a)(h[d],2),j=p[0],b=p[1];m.push({text:Ae(j),effect:b*o.level})}var x=[];if(s.skills)for(var g=0,f=Object.entries(s.skills);g<f.length;g++){var O=Object(l.a)(f[g],2),v=O[0],y=O[1];x.push({text:Ae(v),effect:y*o.level})}return Object(Ie.jsxs)(u.a,{display:"flex",alignItems:"center",width:500,children:[Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsxs)(Ee.a,{children:[s.name," ",s.realm," (",s.rarity,")"]}),Object(Ie.jsxs)(Ee.a,{children:["Level: ",o.level," / ",s.maxLevel]}),m.map((function(e){return Object(Ie.jsxs)(Ee.a,{children:[e.text,": ",(100*e.effect).toFixed(2),"%"]},e.text)})),x.map((function(e){return Object(Ie.jsxs)(Ee.a,{children:[e.text,": ",(100*e.effect).toFixed(2),"%"]},e.text)}))]}),Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){return function(i){if(c&&t){var r=t.findIndex((function(e){return e.manual.name===i}));-1!==r&&(t[r].isEquipped=!t[r].isEquipped,n=Y(e),a({manuals:t,stats:n}))}}(s.name)},sx:{maxHeight:r.spacing(4),minHeight:r.spacing(4),margin:"auto"},disabled:!c,children:"Select"})]},s.name)}))]})}function Ia(){var e=Object(He.a)(),t=Ye().height;return Object(Ie.jsxs)(u.a,{marginLeft:e.spacing(2),marginTop:e.spacing(2),height:t-tt(e,20),overflow:"auto",children:[Object(Ie.jsx)(Ee.a,{variant:"h5",marginBottom:e.spacing(2),children:"Studying Manual"}),Object(Ie.jsx)(Ca,{}),Object(Ie.jsx)(Ta,{}),Object(Ie.jsx)(Ra,{})]})}function za(e){var t=e.progress,a=e.isHeavenly,n=400*t||0;return Object(Ie.jsxs)(u.a,{position:"relative",children:[Object(Ie.jsx)(u.a,{bgcolor:"black",height:400,maxHeight:400,overflow:"hidden",width:100,position:"absolute",top:0,left:0,zIndex:2,sx:{opacity:.3},border:"3px solid gray",borderRadius:4}),Object(Ie.jsxs)(u.a,{height:400,maxHeight:400,overflow:"hidden",width:100,display:"flex",flexDirection:"column",position:"absolute",top:0,left:0,borderRadius:4,children:[Object(Ie.jsx)(u.a,{height:400-n,minHeight:400-n,maxHeight:400-n,bgcolor:"lightgrey",sx:{opacity:.3}}),Object(Ie.jsx)(u.a,{height:n,minHeight:n,maxHeight:n,bgcolor:a?"rgb(51,157,255)":"rgb(0, 153, 0)"})]})]})}function Ha(e){var t=e.PassedTribulations,a=e.currentPower,n=Object(S.i)(),i=Object(He.a)(),r=Ye().height;return Object(Ie.jsx)(u.a,{paddingLeft:i.spacing(2),paddingTop:i.spacing(2),children:Object(Ie.jsxs)(u.a,{height:r-tt(i,16),display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,children:[Object(Ie.jsx)(Ee.a,{variant:"h4",marginBottom:i.spacing(2),children:"You have reached the pinnacle of cultivation"}),Object(Ie.jsx)(Ee.a,{variant:"h6",children:"Passed tribulations"}),t.map((function(e){return Object(Ie.jsx)(_e,{title:Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)(Ee.a,{children:"Multipliers:"}),Object(Ie.jsxs)(Ee.a,{children:["Player stats: ",n(e.statMulti)]}),Object(Ie.jsxs)(Ee.a,{children:["Tribulation power: ",n(e.tribulationMulti)]})]}),children:Object(Ie.jsx)(u.a,{children:Object(Ie.jsxs)(Ee.a,{children:[e.name,": ",e.stepReached]})})},e.name)})),Object(Ie.jsx)(u.a,{border:"1px solid gray",borderRadius:4,display:"flex",alignItems:"center",padding:i.spacing(2),gap:i.spacing(4),children:Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsxs)(Ee.a,{children:["Health x ",n(a.health)]}),Object(Ie.jsxs)(Ee.a,{children:["Health regen x ",n(a.healthRegen)]}),Object(Ie.jsxs)(Ee.a,{children:["Attack x ",n(a.attack)]}),Object(Ie.jsxs)(Ee.a,{children:["Defence x ",n(a.defence)]}),Object(Ie.jsxs)(Ee.a,{children:["Insight x ",n(a.insight)]})]})})]})})}function La(e){var t=e.player,a=e.cultivationRealms,n=e.nextRealmIndex,i=(t.stats,0),r=t.currentStats.health,s=JSON.parse(JSON.stringify(a)),l=s[n];if(!l.tribulation)return 0;for(var c=0;c<=l.tribulation.steps;c++){var o=Re(n,s),u=Z(o,t),m=$(t,o);if(m<=0)break;if(u<=0)i++,s[n].tribulation.stepReached=i;else{if((r-=u*(o.health/m))<=0)break;i++,s[n].tribulation.stepReached=i}}return Math.min(Math.max(i-1,0),l.tribulation.steps)}function Ea(){for(var e,t,a=Object(He.a)(),n=i.a.useContext(M),r=n.realm,s=i.a.useContext(pe),l=s.cultivationRealms,c=s.updateContext,o=l.length>=r.index+2?r.index+1:void 0,m=Ye().height,d=[],h=0;h<=r.index;h++){var p=l[h];p.tribulation&&d.push({name:p.name,stepReached:p.tribulation.stepReached||0,statMulti:p.tribulation.stepReached?Math.pow(p.tribulation.statsMulti,p.tribulation.stepReached):1,tribulationMulti:p.tribulation.stepReached?Math.pow(p.tribulation.multiplier,p.tribulation.stepReached):1})}for(var j={statMulti:1,tribulationMulti:1},b=0;b<d.length;b++){var x=d[b];j.statMulti*=x.statMulti||1,j.tribulationMulti*=x.tribulationMulti||1}var g=Te(r.index,l);if(!o)return Object(Ie.jsx)(Ha,{currentPower:g,PassedTribulations:d});var f=l[o],O=Re(o,l),v=Object(S.i)(),y=O.healthRegen,k=O.attack,C=O.defence,w=O.health,T=i.a.useContext(M),R=T.state,I=T.updateContext,z="breakthrough"===R.action,H=(null===(e=f.currentStats)||void 0===e?void 0:e.currentHealth)||w,L=Te(o,l);return Object(Ie.jsx)(u.a,{paddingLeft:a.spacing(2),paddingTop:a.spacing(2),children:Object(Ie.jsxs)(u.a,{height:m-tt(a,16),display:"flex",flexDirection:"column",alignItems:"center",maxWidth:600,children:[Object(Ie.jsxs)(Ee.a,{variant:"h4",marginBottom:a.spacing(2),children:["Next realm: ",f.name]}),f.tribulation&&Object(Ie.jsx)(_e,{title:Object(Ie.jsx)(Ie.Fragment,{children:Object(Ie.jsxs)(Ee.a,{children:["Each completed stage provides",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.palette.success.main,display:"inline",children:[" ","x",f.tribulation.statsMulti," "]}),"multiplier to all stats aIndex",Object(Ie.jsxs)(Ee.a,{component:"span",color:a.palette.error.main,display:"inline",children:[" ","x",f.tribulation.multiplier," "]}),"to all following heavenly tribulations"]})}),children:Object(Ie.jsxs)(Ee.a,{variant:"h6",marginBottom:a.spacing(2),children:["Tribulation stages: ",f.tribulation.steps]})}),Object(Ie.jsx)(u.a,{children:Object(Ie.jsxs)(u.a,{display:"flex",alignItems:"center",children:[Object(Ie.jsxs)(u.a,{marginRight:a.spacing(4),children:[Object(Ie.jsx)(Ee.a,{variant:"h6",children:"Passed tribulations"}),d.map((function(e){return Object(Ie.jsx)(_e,{title:Object(Ie.jsxs)(Ie.Fragment,{children:[Object(Ie.jsx)(Ee.a,{children:"Multipliers:"}),Object(Ie.jsxs)(Ee.a,{children:["Player stats: ",v(e.statMulti)]}),Object(Ie.jsxs)(Ee.a,{children:["Tribulation power: ",v(e.tribulationMulti)]})]}),children:Object(Ie.jsx)(u.a,{children:Object(Ie.jsxs)(Ee.a,{children:[e.name,": ",e.stepReached]})})},e.name)}))]}),Object(Ie.jsx)(u.a,{width:100,height:400,children:Object(Ie.jsx)(za,{progress:w?(w-H)/w:0,isHeavenly:!(null===(t=f.tribulation)||void 0===t||!t.stepReached)})}),Object(Ie.jsxs)(u.a,{marginLeft:a.spacing(4),children:[Object(Ie.jsx)(Ee.a,{variant:"h6",children:"Tribulation power:"}),Object(Ie.jsxs)(Ee.a,{children:["Hp: ",v(H)]}),Object(Ie.jsxs)(Ee.a,{children:["Hp.regen: ",v(y)]}),Object(Ie.jsxs)(Ee.a,{children:["Atk: ",v(k)]}),Object(Ie.jsxs)(Ee.a,{children:["Def: ",v(C)]}),Object(Ie.jsx)(Ee.a,{variant:"h6",children:f.tribulation?"Tribulation stage: ".concat(f.tribulation.stepReached||0,"/").concat(f.tribulation.steps):""}),Object(Ie.jsx)(Ee.a,{variant:"h6",children:f.tribulation?"Power multi: ".concat(f.tribulation.stepReached?v(j.tribulationMulti*Math.pow(f.tribulation.multiplier,f.tribulation.stepReached)):1):""})]})]})}),Object(Ie.jsxs)(u.a,{marginY:a.spacing(2),children:[Object(Ie.jsx)(nt.a,{variant:"outlined",onClick:function(){if(z)R.action="idle",R.realm=void 0,l[o].currentStats=void 0,l[o].tribulation&&(l[o].tribulation.stepReached=void 0);else{R.action="breakthrough",R.realm={index:o};var e=f.baseStats,t=e.health,a=e.healthRegen,n=e.attack,i=e.defence;l[o].currentStats={health:t,currentHealth:t,healthRegen:a,attack:n,defence:i},l[o].tribulation&&(l[o].tribulation.stepReached=0)}I({state:R}),c({cultivationRealms:l.slice()})},size:"large",children:z?"Stop":"Breakthrough"}),f.tribulation&&!z&&Object(Ie.jsxs)(Ee.a,{children:["estim. stage"," ",La({player:n,cultivationRealms:l,nextRealmIndex:o})]})]}),Object(Ie.jsxs)(u.a,{border:"1px solid gray",borderRadius:4,display:"flex",alignItems:"center",padding:a.spacing(2),gap:a.spacing(4),children:[Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsxs)(Ee.a,{children:["Health x ",v(g.health)]}),Object(Ie.jsxs)(Ee.a,{children:["Health regen x ",v(g.healthRegen)]}),Object(Ie.jsxs)(Ee.a,{children:["Attack x ",v(g.attack)]}),Object(Ie.jsxs)(Ee.a,{children:["Defence x ",v(g.defence)]}),Object(Ie.jsxs)(Ee.a,{children:["Insight x ",v(g.insight)]})]}),Object(Ie.jsx)(na.a,{fontSize:"large"}),Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsxs)(Ee.a,{children:["Health x ",v(L.health)]}),Object(Ie.jsxs)(Ee.a,{children:["Health regen x ",v(L.healthRegen)]}),Object(Ie.jsxs)(Ee.a,{children:["Attack x ",v(L.attack)]}),Object(Ie.jsxs)(Ee.a,{children:["Defence x ",v(L.defence)]}),Object(Ie.jsxs)(Ee.a,{children:["Insight x ",v(L.insight)," "]})]})]})]})})}function qa(e){var t=e.width,a=e.height,n=e.item,i=n.image;return Object(Ie.jsxs)(u.a,{width:t,height:a,border:"1px solid gray",display:"flex",flexDirection:"column",sx:{justifyContent:"space-around",alignItems:"center"},children:[Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)("img",{src:i.path||"/manuals/placeholder.png",width:"60px",height:"auto",alt:""})}),Object(Ie.jsx)(u.a,{maxWidth:t,overflow:"auto",whiteSpace:"nowrap",children:Object(Ie.jsx)(Ee.a,{children:n.name})})]})}function Pa(e){var t=e.item,a=(e.context,i.a.useContext(M)),n=(a.manuals,a.inventory,t.name),r=t.realm,s=t.stats,c=t.skills,o=t.maxLevel,m=t.price,d=Object(S.i)(),h=[];if(s)for(var p=0,j=Object.entries(s);p<j.length;p++){var b=Object(l.a)(j[p],2),x=b[0],g=b[1];h.push(Object(Ie.jsxs)(Ee.a,{children:[Ae(x),": ",d(100*g)+"%"]},x))}if(c)for(var f=0,O=Object.entries(c);f<O.length;f++){var v=Object(l.a)(O[f],2),y=v[0],k=v[1];h.push(Object(Ie.jsxs)(Ee.a,{children:[Ae(y),": ",d(100*k)+"%"]},y))}return Object(Ie.jsxs)(u.a,{border:1,p:2,bgcolor:"background.paper",children:[Object(Ie.jsx)(Ee.a,{variant:"h6",children:n}),Object(Ie.jsx)(Ee.a,{children:r}),Object(Ie.jsxs)(Ee.a,{children:["Max Level: ",o]}),Object(Ie.jsx)(Ee.a,{variant:"h6",marginY:1,children:"Stats per Level:"}),h,Object(Ie.jsx)(Ee.a,{variant:"h6",children:"Price"}),Object(Ie.jsx)(ia,{items:m}),Object(Ie.jsx)(nt.a,{variant:"contained",onClick:function(e){},children:"Buy"})]})}function Ya(){var e=i.a.useState(f),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(ca,{cellWidth:100,cellHeight:100,sizeX:5,sizeY:5,items:a,Cell:qa,Tooltip:Pa,context:n})})}var Xa={Manuals:Object(Ie.jsx)(Ya,{})};function Aa(){var e=Object(S.h)("Manuals",Xa),t=e.state,a=e.states,n=e.setState,i=e.Content;return Object(Ie.jsxs)(u.a,{children:[Object(Ie.jsx)(Wa,{state:t,states:a,setState:n}),Object(Ie.jsx)(i,{})]})}var Wa=function(e){var t=e.state,a=e.states,n=e.setState,i=Object(S.j)().width;return Object(Ie.jsx)(Le.a,{elevation:2,children:Object(Ie.jsx)(u.a,{width:i-512,children:a.map((function(e){return Object(Ie.jsx)(nt.a,{variant:"outlined",size:"large",color:t===e?"info":"primary",onClick:function(){return n(e)},sx:{margin:2},children:e},e)}))})})},Fa={Training:Object(Ie.jsx)(ta,{source:"trainings",Card:function(e){var t,a=e.activity,n=e.isActive,r=e.source,s=e.showTimesCompleted,l=i.a.useContext(M),c=Object(S.i)(),o=l.updateContext,m=a.result,d=a.price,h=Object(He.a)(),p=[];if(m.items){var b,x=Object(je.a)(m.items);try{for(x.s();!(b=x.n()).done;){var g=b.value;p.push({name:g.name,amount:g.amount})}}catch(R){x.e(R)}finally{x.f()}}var f=[];if(null!==d&&void 0!==d&&d.items){var O,v=Object(je.a)(d.items);try{for(v.s();!(O=v.n()).done;){var y=O.value;f.push({name:y.name,amount:y.amount})}}catch(R){v.e(R)}finally{v.f()}}var k=a.time?we[a.time](a,l):a.baseTime,C=a.currentTime||0,w=k/j<5,T=k<1e3?(1e3/k).toFixed(2)+"/s":_t(k);return Object(Ie.jsx)(Le.a,{elevation:8,sx:{paddingX:h.spacing(2),paddingY:h.spacing(1),margin:h.spacing(2),borderRadius:h.spacing(2),minHeight:60,border:"1px solid lightgray",borderColor:n?h.palette.primary.main:"lightgray",padding:h.spacing(1)},children:Object(Ie.jsxs)(u.a,{display:"flex",children:[Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minWidth:d?400:600,minHeight:60,height:"100%",onClick:function(){o(n?{state:{action:"idle",activity:void 0}}:{state:{action:"activity",activity:{name:a.name,source:r}}})},children:[Object(Ie.jsxs)(u.a,{display:"flex",children:[Object(Ie.jsxs)(u.a,{display:"flex",flexDirection:"column",children:[Object(Ie.jsx)(Ee.a,{children:a.name}),a.result.baseStats&&Object(Ie.jsx)(Zt,{stats:a.result.baseStats,activity:a,requiredTime:k,multiplicatorFunctionName:a.result.baseStatsMulti}),p.length>0&&Object(Ie.jsx)(u.a,{display:"flex",gap:h.spacing(1),children:p.map((function(e){return Object(Ie.jsxs)(Ee.a,{variant:"body1",display:"inline",children:[e.name," ",c(e.amount)]},e.name)}))}),a.result.skills&&Object(Ie.jsx)(Zt,{stats:a.result.skills,activity:a,requiredTime:k,multiplicatorFunctionName:a.result.skillsMulti})]}),s&&Object(Ie.jsx)(u.a,{marginLeft:"auto",children:Object(Ie.jsx)(Ee.a,{children:a.timesCompleted&&a.timesCompleted>1e4?c(a.timesCompleted):a.timesCompleted})})]}),Object(Ie.jsx)(u.a,{children:Object(Ie.jsx)(Kt,{value:w&&n?100:C/k*100,label:T,rightLabel:!0})})]}),d&&Object(Ie.jsxs)(u.a,{borderLeft:"1px solid gray",paddingLeft:h.spacing(2),minWidth:200,minHeight:60,children:[Object(Ie.jsx)(Ee.a,{children:"Price"}),(null===(t=a.price)||void 0===t?void 0:t.baseStats)&&Object(Ie.jsx)(Zt,{stats:a.price.baseStats,activity:a}),Object(Ie.jsx)(u.a,{display:"flex",gap:h.spacing(1),children:f.map((function(e){return Object(Ie.jsxs)(Ee.a,{variant:"body1",display:"inline",children:[e.name," ",c(e.amount)]},e.name)}))})]})]})})}}),Manuals:Object(Ie.jsx)(Ia,{}),Breakthrough:Object(Ie.jsx)(Ea,{}),Mining:Object(Ie.jsx)(ta,{source:"mining",Card:ea}),Crafting:Object(Ie.jsx)(Oa,{}),Gathering:Object(Ie.jsx)(ta,{source:"gathering",Card:ea}),Fighting:Object(Ie.jsx)(ka,{}),Shops:Object(Ie.jsx)(Aa,{})},Ga=function(e){var t=Object(S.j)(),a=t.width,n=t.height,i=Object(He.a)(),r=Object(S.h)("Training",e.states),s=r.state,l=r.setState,c=r.states,o=r.Content;return Object(Ie.jsxs)(u.a,{width:a-512,height:n-Object(S.e)(i,8),children:[Object(Ie.jsx)(Ba,{state:s,setState:l,states:c}),s&&Object(Ie.jsx)(o,{})]})},Ba=function(e){var t=e.state,a=e.states,n=e.setState,r=Object(S.j)().width,s=i.a.useContext(M),l=function(e,t){if(!t)return!1;var a=$(e,t.baseStats),n=Z(t.currentStats||t.baseStats,e),i=t.baseStats.health/a;return e.currentStats.health>n*i}(s,i.a.useContext(pe).cultivationRealms[s.realm.index+1]);function c(e,t){var a="primary";return e===t&&(a="success"),l&&"Breakthrough"===t&&(a="warning"),a}return Object(Ie.jsx)(Le.a,{elevation:2,children:Object(Ie.jsx)(u.a,{width:r-512,children:a.map((function(e){return Object(Ie.jsx)(nt.a,{variant:"outlined",size:"large",color:c(t,e),onClick:function(){return n(e)},sx:{margin:2},children:e},e)}))})})};function Na(){!function(){var e=i.a.useState(Ye()),t=Object(l.a)(e,2),a=t[0],n=t[1];i.a.useEffect((function(){function e(){n(Ye())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[])}();var e=Ye(),t=e.width,a=e.height,n=i.a.useState(!1),r=Object(l.a)(n,2),s=r[0],m=r[1];return Object(Ie.jsx)(c.a,{children:Object(Ie.jsx)(o.a,{theme:h,children:Object(Ie.jsx)(S.a,{data:Da,children:Object(Ie.jsx)(ze,{children:Object(Ie.jsxs)(u.a,{width:t,height:a,overflow:"hidden",children:[Object(Ie.jsx)(Fe,{setSettings:m}),s&&Object(Ie.jsx)(S.d,{setOpened:m,data:Da}),!s&&Object(Ie.jsxs)(u.a,{display:"flex",children:[Object(Ie.jsx)(Vt,{}),Object(Ie.jsx)(Ga,{states:Fa})]})]})})})})})}S.g;var Da=[{Context:S.c,defaultContextValue:S.f,cookies:[{key:"tickRate",cookieName:"tickrate",type:"number"},{key:"gameSpeed",cookieName:"gamespeed",type:"number"},{key:"notation",cookieName:"notation"}]},{Context:M,defaultContextValue:w,localStorageName:"player"},{Context:pe,defaultContextValue:de,localStorageName:"game"}];s.a.render(Object(Ie.jsx)(i.a.StrictMode,{children:Object(Ie.jsx)(Na,{})}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.2f3a07bb.chunk.js.map